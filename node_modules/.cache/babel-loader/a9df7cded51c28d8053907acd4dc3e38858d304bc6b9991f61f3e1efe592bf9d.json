{"ast":null,"code":"import React,{useState,useCallback,useEffect,useRef}from'react';import'./App.css';import MainLayout from'./components/Layout/MainLayout';import ChatBox from'./components/ChatBox/ChatBox';import SampleDataDisplay from'./components/DataTable/SampleDataDisplay';import ResponseDisplay from'./components/ResponseDisplay/ResponseDisplay';import{useLocalStorage}from'./hooks/useLocalStorage';import{useApi}from'./hooks/useApi';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[messages,setMessages]=useLocalStorage('chat-messages',[]);const[analysisHistory,setAnalysisHistory]=useLocalStorage('analysis-history',[]);const[isLoading,setIsLoading]=useState(false);const[activeView,setActiveView]=useState('data');const[hassentFirstMessage,setHasSentFirstMessage]=useState(false);const[highlightedAnalysis,setHighlightedAnalysis]=useState(null);const analysisRefs=useRef({});const{sendQuery}=useApi();// Scroll to specific analysis when message is clicked\nconst scrollToAnalysis=messageId=>{const element=analysisRefs.current[messageId];if(element){element.scrollIntoView({behavior:'smooth',block:'start'});setHighlightedAnalysis(messageId);setTimeout(()=>setHighlightedAnalysis(null),2000);}};// Sample markdown generator with actual chart syntax\nconst generateSampleMarkdown=()=>{const randomData={signals:(Math.random()*30+40).toFixed(1),speedControl:(Math.random()*30+45).toFixed(1),nightDrive:(Math.random()*25+35).toFixed(1),roadSigns:(Math.random()*35+40).toFixed(1),parking:(Math.random()*25+30).toFixed(1)};return`\n## Performance Analysis Results\n\n### Driving Skills Assessment\n\nThe analysis shows the performance distribution across key driving competencies:\n\n\\`\\`\\`chart\n{\n  \"type\": \"bar\",\n  \"data\": [\n    {\"category\": \"Signals\", \"value\": ${randomData.signals}, \"unit\": \"%\"},\n    {\"category\": \"Speed Control\", \"value\": ${randomData.speedControl}, \"unit\": \"%\"},\n    {\"category\": \"Night Drive\", \"value\": ${randomData.nightDrive}, \"unit\": \"%\"},\n    {\"category\": \"Road Signs\", \"value\": ${randomData.roadSigns}, \"unit\": \"%\"},\n    {\"category\": \"Parking\", \"value\": ${randomData.parking}, \"unit\": \"%\"}\n  ],\n  \"config\": {\n    \"xField\": \"value\",\n    \"yField\": \"category\",\n    \"color\": \"#3b82f6\"\n  }\n}\n\\`\\`\\`\n\n### Qualification Distribution by Age Group\n\n\\`\\`\\`chart\n{\n  \"type\": \"pie\",\n  \"data\": [\n    {\"type\": \"Teenager (Qualified)\", \"value\": ${Math.floor(Math.random()*5+10)}},\n    {\"type\": \"Teenager (Not Qualified)\", \"value\": ${Math.floor(Math.random()*5+5)}},\n    {\"type\": \"Young Adult (Qualified)\", \"value\": ${Math.floor(Math.random()*15+30)}},\n    {\"type\": \"Young Adult (Not Qualified)\", \"value\": ${Math.floor(Math.random()*10+15)}},\n    {\"type\": \"Middle Age (Qualified)\", \"value\": ${Math.floor(Math.random()*10+25)}},\n    {\"type\": \"Middle Age (Not Qualified)\", \"value\": ${Math.floor(Math.random()*5+10)}}\n  ]\n}\n\\`\\`\\`\n\n### Training Impact Analysis\n\n| Training Level | Pass Rate | Avg Score | Sample Size |\n|---------------|-----------|-----------|-------------|\n| None          | 28.6%     | 42.3      | 7           |\n| Basic         | 72.7%     | 58.9      | 11          |\n| Advanced      | 92.3%     | 74.2      | 13          |\n`;};const generateSampleDescription=()=>{const descriptions=[\"Based on the analysis of driving test performance metrics, the data reveals significant variations in skill proficiency across different categories. Speed control and road sign recognition show the strongest performance indicators, while parking and night driving present areas requiring additional focus.\",\"The comprehensive assessment indicates a clear relationship between formal training participation and test success rates. Applicants with advanced training demonstrate a 92.3% pass rate, compared to only 28.6% for those without formal preparation.\",\"Analysis of the current dataset highlights critical performance gaps in specific driving competencies. Signal usage and steering control show the highest variance among applicants, suggesting these areas require targeted intervention.\"];return descriptions[Math.floor(Math.random()*descriptions.length)];};const handleSendMessage=useCallback(async message=>{const userMessage={id:Date.now(),type:'user',content:message,timestamp:new Date().toISOString()};setMessages(prev=>[...prev,userMessage]);setIsLoading(true);// After first message, switch to analysis view\nif(!hassentFirstMessage){setHasSentFirstMessage(true);setActiveView('analysis');}try{// Simulate backend delay\nawait new Promise(resolve=>setTimeout(resolve,1500));const mockMarkdown=generateSampleMarkdown();const mockDescription=generateSampleDescription();const assistantMessage={id:Date.now()+1,type:'assistant',content:`I've analyzed the data based on your query: \"${message}\". The results have been generated and displayed in the Analysis Results panel.`,timestamp:new Date().toISOString(),analysisId:userMessage.id// Link to analysis\n};setMessages(prev=>[...prev,assistantMessage]);const analysisResult={id:userMessage.id,// Use same ID for linking\nmessageId:userMessage.id,query:message,markdown:mockMarkdown,description:mockDescription,timestamp:new Date().toISOString()};setAnalysisHistory(prev=>[...prev,analysisResult]);// Auto-scroll to new analysis after adding\nsetTimeout(()=>{scrollToAnalysis(userMessage.id);},100);}catch(error){console.error('Error sending message:',error);const errorMessage={id:Date.now()+1,type:'error',content:'Failed to get response. Please try again.',timestamp:new Date().toISOString()};setMessages(prev=>[...prev,errorMessage]);}finally{setIsLoading(false);}},[hassentFirstMessage,setMessages,setAnalysisHistory]);const handleClearChat=useCallback(()=>{setMessages([]);setAnalysisHistory([]);setHasSentFirstMessage(false);setActiveView('data');},[setMessages,setAnalysisHistory]);const handleClearAnalysis=useCallback(()=>{setAnalysisHistory([]);},[setAnalysisHistory]);return/*#__PURE__*/_jsx(\"div\",{className:\"App min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 overflow-hidden\",children:/*#__PURE__*/_jsx(MainLayout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-4 h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 h-full\",style:{height:'calc(100vh - 100px)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2 h-full overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg h-full flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b px-6 py-3 flex-shrink-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveView('data'),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${activeView==='data'?'bg-blue-100 text-blue-700':'text-gray-600 hover:text-gray-800 hover:bg-gray-100'}`,children:\"Sample Data Overview\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveView('analysis'),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${activeView==='analysis'?'bg-blue-100 text-blue-700':'text-gray-600 hover:text-gray-800 hover:bg-gray-100'}`,children:[\"Analysis Results\",analysisHistory.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-2 py-0.5 text-xs bg-blue-600 text-white rounded-full\",children:analysisHistory.length})]})]}),activeView==='analysis'&&analysisHistory.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:handleClearAnalysis,className:\"text-sm text-gray-500 hover:text-gray-700 transition-colors\",children:\"Clear History\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-6 analysis-scroll-area\",children:activeView==='data'?/*#__PURE__*/_jsx(SampleDataDisplay,{}):/*#__PURE__*/_jsx(_Fragment,{children:analysisHistory.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-full text-gray-400\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-16 h-16 mb-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium\",children:\"No analysis results yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"Send a query to see analysis results here\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:analysisHistory.map((analysis,index)=>/*#__PURE__*/_jsxs(\"div\",{ref:el=>analysisRefs.current[analysis.messageId]=el,className:`border rounded-lg p-6 transition-all duration-500 ${highlightedAnalysis===analysis.messageId?'bg-blue-50 border-blue-400 shadow-lg':'bg-gray-50'}`,\"data-message-id\":analysis.messageId,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:[\"Analysis #\",index+1]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:new Date(analysis.timestamp).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 italic\",children:[\"Query: \\\"\",analysis.query,\"\\\"\"]})]}),/*#__PURE__*/_jsx(ResponseDisplay,{response:{content:analysis.markdown,description:analysis.description}})]},analysis.id))})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 h-full overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg h-full flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-b px-4 py-3 flex justify-between items-center flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-800\",children:\"Analytics Chat\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClearChat,className:\"text-sm text-gray-500 hover:text-gray-700 transition-colors\",children:\"Clear\"})]}),/*#__PURE__*/_jsx(ChatBox,{messages:messages,onSendMessage:handleSendMessage,isLoading:isLoading,onMessageClick:scrollToAnalysis})]})})]})})})});}export default App;","map":{"version":3,"names":["React","useState","useCallback","useEffect","useRef","MainLayout","ChatBox","SampleDataDisplay","ResponseDisplay","useLocalStorage","useApi","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","messages","setMessages","analysisHistory","setAnalysisHistory","isLoading","setIsLoading","activeView","setActiveView","hassentFirstMessage","setHasSentFirstMessage","highlightedAnalysis","setHighlightedAnalysis","analysisRefs","sendQuery","scrollToAnalysis","messageId","element","current","scrollIntoView","behavior","block","setTimeout","generateSampleMarkdown","randomData","signals","Math","random","toFixed","speedControl","nightDrive","roadSigns","parking","floor","generateSampleDescription","descriptions","length","handleSendMessage","message","userMessage","id","Date","now","type","content","timestamp","toISOString","prev","Promise","resolve","mockMarkdown","mockDescription","assistantMessage","analysisId","analysisResult","query","markdown","description","error","console","errorMessage","handleClearChat","handleClearAnalysis","className","children","style","height","onClick","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","map","analysis","index","ref","el","toLocaleString","response","onSendMessage","onMessageClick"],"sources":["/Users/yizelu/Desktop/mcp/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport './App.css';\nimport MainLayout from './components/Layout/MainLayout';\nimport ChatBox from './components/ChatBox/ChatBox';\nimport SampleDataDisplay from './components/DataTable/SampleDataDisplay';\nimport ResponseDisplay from './components/ResponseDisplay/ResponseDisplay';\nimport { useLocalStorage } from './hooks/useLocalStorage';\nimport { useApi } from './hooks/useApi';\n\nfunction App() {\n  const [messages, setMessages] = useLocalStorage('chat-messages', []);\n  const [analysisHistory, setAnalysisHistory] = useLocalStorage('analysis-history', []);\n  const [isLoading, setIsLoading] = useState(false);\n  const [activeView, setActiveView] = useState('data');\n  const [hassentFirstMessage, setHasSentFirstMessage] = useState(false);\n  const [highlightedAnalysis, setHighlightedAnalysis] = useState(null);\n  const analysisRefs = useRef({});\n  const { sendQuery } = useApi();\n\n  // Scroll to specific analysis when message is clicked\n  const scrollToAnalysis = (messageId) => {\n    const element = analysisRefs.current[messageId];\n    if (element) {\n      element.scrollIntoView({ behavior: 'smooth', block: 'start' });\n      setHighlightedAnalysis(messageId);\n      setTimeout(() => setHighlightedAnalysis(null), 2000);\n    }\n  };\n\n  // Sample markdown generator with actual chart syntax\n  const generateSampleMarkdown = () => {\n    const randomData = {\n      signals: (Math.random() * 30 + 40).toFixed(1),\n      speedControl: (Math.random() * 30 + 45).toFixed(1),\n      nightDrive: (Math.random() * 25 + 35).toFixed(1),\n      roadSigns: (Math.random() * 35 + 40).toFixed(1),\n      parking: (Math.random() * 25 + 30).toFixed(1),\n    };\n\n    return `\n## Performance Analysis Results\n\n### Driving Skills Assessment\n\nThe analysis shows the performance distribution across key driving competencies:\n\n\\`\\`\\`chart\n{\n  \"type\": \"bar\",\n  \"data\": [\n    {\"category\": \"Signals\", \"value\": ${randomData.signals}, \"unit\": \"%\"},\n    {\"category\": \"Speed Control\", \"value\": ${randomData.speedControl}, \"unit\": \"%\"},\n    {\"category\": \"Night Drive\", \"value\": ${randomData.nightDrive}, \"unit\": \"%\"},\n    {\"category\": \"Road Signs\", \"value\": ${randomData.roadSigns}, \"unit\": \"%\"},\n    {\"category\": \"Parking\", \"value\": ${randomData.parking}, \"unit\": \"%\"}\n  ],\n  \"config\": {\n    \"xField\": \"value\",\n    \"yField\": \"category\",\n    \"color\": \"#3b82f6\"\n  }\n}\n\\`\\`\\`\n\n### Qualification Distribution by Age Group\n\n\\`\\`\\`chart\n{\n  \"type\": \"pie\",\n  \"data\": [\n    {\"type\": \"Teenager (Qualified)\", \"value\": ${Math.floor(Math.random() * 5 + 10)}},\n    {\"type\": \"Teenager (Not Qualified)\", \"value\": ${Math.floor(Math.random() * 5 + 5)}},\n    {\"type\": \"Young Adult (Qualified)\", \"value\": ${Math.floor(Math.random() * 15 + 30)}},\n    {\"type\": \"Young Adult (Not Qualified)\", \"value\": ${Math.floor(Math.random() * 10 + 15)}},\n    {\"type\": \"Middle Age (Qualified)\", \"value\": ${Math.floor(Math.random() * 10 + 25)}},\n    {\"type\": \"Middle Age (Not Qualified)\", \"value\": ${Math.floor(Math.random() * 5 + 10)}}\n  ]\n}\n\\`\\`\\`\n\n### Training Impact Analysis\n\n| Training Level | Pass Rate | Avg Score | Sample Size |\n|---------------|-----------|-----------|-------------|\n| None          | 28.6%     | 42.3      | 7           |\n| Basic         | 72.7%     | 58.9      | 11          |\n| Advanced      | 92.3%     | 74.2      | 13          |\n`;\n  };\n\n  const generateSampleDescription = () => {\n    const descriptions = [\n      \"Based on the analysis of driving test performance metrics, the data reveals significant variations in skill proficiency across different categories. Speed control and road sign recognition show the strongest performance indicators, while parking and night driving present areas requiring additional focus.\",\n      \"The comprehensive assessment indicates a clear relationship between formal training participation and test success rates. Applicants with advanced training demonstrate a 92.3% pass rate, compared to only 28.6% for those without formal preparation.\",\n      \"Analysis of the current dataset highlights critical performance gaps in specific driving competencies. Signal usage and steering control show the highest variance among applicants, suggesting these areas require targeted intervention.\"\n    ];\n    \n    return descriptions[Math.floor(Math.random() * descriptions.length)];\n  };\n\n  const handleSendMessage = useCallback(async (message) => {\n    const userMessage = {\n      id: Date.now(),\n      type: 'user',\n      content: message,\n      timestamp: new Date().toISOString()\n    };\n    \n    setMessages(prev => [...prev, userMessage]);\n    setIsLoading(true);\n    \n    // After first message, switch to analysis view\n    if (!hassentFirstMessage) {\n      setHasSentFirstMessage(true);\n      setActiveView('analysis');\n    }\n\n    try {\n      // Simulate backend delay\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      const mockMarkdown = generateSampleMarkdown();\n      const mockDescription = generateSampleDescription();\n      \n      const assistantMessage = {\n        id: Date.now() + 1,\n        type: 'assistant',\n        content: `I've analyzed the data based on your query: \"${message}\". The results have been generated and displayed in the Analysis Results panel.`,\n        timestamp: new Date().toISOString(),\n        analysisId: userMessage.id // Link to analysis\n      };\n      \n      setMessages(prev => [...prev, assistantMessage]);\n      \n      const analysisResult = {\n        id: userMessage.id, // Use same ID for linking\n        messageId: userMessage.id,\n        query: message,\n        markdown: mockMarkdown,\n        description: mockDescription,\n        timestamp: new Date().toISOString()\n      };\n      \n      setAnalysisHistory(prev => [...prev, analysisResult]);\n      \n      // Auto-scroll to new analysis after adding\n      setTimeout(() => {\n        scrollToAnalysis(userMessage.id);\n      }, 100);\n      \n    } catch (error) {\n      console.error('Error sending message:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        type: 'error',\n        content: 'Failed to get response. Please try again.',\n        timestamp: new Date().toISOString()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [hassentFirstMessage, setMessages, setAnalysisHistory]);\n\n  const handleClearChat = useCallback(() => {\n    setMessages([]);\n    setAnalysisHistory([]);\n    setHasSentFirstMessage(false);\n    setActiveView('data');\n  }, [setMessages, setAnalysisHistory]);\n\n  const handleClearAnalysis = useCallback(() => {\n    setAnalysisHistory([]);\n  }, [setAnalysisHistory]);\n\n  return (\n    <div className=\"App min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 overflow-hidden\">\n      <MainLayout>\n        <div className=\"container mx-auto px-4 py-4 h-full\">\n          <div className=\"grid grid-cols-3 gap-4 h-full\" style={{ height: 'calc(100vh - 100px)' }}>\n            \n            {/* Left Side - 2/3 of page - Data/Analysis View */}\n            <div className=\"col-span-2 h-full overflow-hidden\">\n              <div className=\"bg-white rounded-xl shadow-lg h-full flex flex-col\">\n                {/* Tab Navigation */}\n                <div className=\"border-b px-6 py-3 flex-shrink-0\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex space-x-1\">\n                      <button\n                        onClick={() => setActiveView('data')}\n                        className={`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${\n                          activeView === 'data'\n                            ? 'bg-blue-100 text-blue-700'\n                            : 'text-gray-600 hover:text-gray-800 hover:bg-gray-100'\n                        }`}\n                      >\n                        Sample Data Overview\n                      </button>\n                      <button\n                        onClick={() => setActiveView('analysis')}\n                        className={`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${\n                          activeView === 'analysis'\n                            ? 'bg-blue-100 text-blue-700'\n                            : 'text-gray-600 hover:text-gray-800 hover:bg-gray-100'\n                        }`}\n                      >\n                        Analysis Results\n                        {analysisHistory.length > 0 && (\n                          <span className=\"ml-2 px-2 py-0.5 text-xs bg-blue-600 text-white rounded-full\">\n                            {analysisHistory.length}\n                          </span>\n                        )}\n                      </button>\n                    </div>\n                    {activeView === 'analysis' && analysisHistory.length > 0 && (\n                      <button\n                        onClick={handleClearAnalysis}\n                        className=\"text-sm text-gray-500 hover:text-gray-700 transition-colors\"\n                      >\n                        Clear History\n                      </button>\n                    )}\n                  </div>\n                </div>\n\n                {/* Content Area with Scroll */}\n                <div className=\"flex-1 overflow-y-auto p-6 analysis-scroll-area\">\n                  {activeView === 'data' ? (\n                    <SampleDataDisplay />\n                  ) : (\n                    <>\n                      {analysisHistory.length === 0 ? (\n                        <div className=\"flex flex-col items-center justify-center h-full text-gray-400\">\n                          <svg className=\"w-16 h-16 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} \n                              d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                          </svg>\n                          <p className=\"text-lg font-medium\">No analysis results yet</p>\n                          <p className=\"text-sm mt-2\">Send a query to see analysis results here</p>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-6\">\n                          {analysisHistory.map((analysis, index) => (\n                            <div \n                              key={analysis.id}\n                              ref={el => analysisRefs.current[analysis.messageId] = el}\n                              className={`border rounded-lg p-6 transition-all duration-500 ${\n                                highlightedAnalysis === analysis.messageId \n                                  ? 'bg-blue-50 border-blue-400 shadow-lg' \n                                  : 'bg-gray-50'\n                              }`}\n                              data-message-id={analysis.messageId}\n                            >\n                              <div className=\"mb-4\">\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <h3 className=\"text-lg font-semibold text-gray-800\">\n                                    Analysis #{index + 1}\n                                  </h3>\n                                  <span className=\"text-xs text-gray-500\">\n                                    {new Date(analysis.timestamp).toLocaleString()}\n                                  </span>\n                                </div>\n                                <p className=\"text-sm text-gray-600 italic\">\n                                  Query: \"{analysis.query}\"\n                                </p>\n                              </div>\n                              \n                              <ResponseDisplay \n                                response={{\n                                  content: analysis.markdown,\n                                  description: analysis.description\n                                }}\n                              />\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n            \n            {/* Right Side - 1/3 of page - Chat */}\n            <div className=\"col-span-1 h-full overflow-hidden\">\n              <div className=\"bg-white rounded-xl shadow-lg h-full flex flex-col\">\n                <div className=\"border-b px-4 py-3 flex justify-between items-center flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold text-gray-800\">\n                    Analytics Chat\n                  </h2>\n                  <button\n                    onClick={handleClearChat}\n                    className=\"text-sm text-gray-500 hover:text-gray-700 transition-colors\"\n                  >\n                    Clear\n                  </button>\n                </div>\n                <ChatBox\n                  messages={messages}\n                  onSendMessage={handleSendMessage}\n                  isLoading={isLoading}\n                  onMessageClick={scrollToAnalysis}\n                />\n              </div>\n            </div>\n            \n          </div>\n        </div>\n      </MainLayout>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}