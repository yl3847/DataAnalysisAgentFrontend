{"ast":null,"code":"import React,{useCallback}from'react';import ReactMarkdown from'react-markdown';import remarkGfm from'remark-gfm';import ChartRenderer from'./ChartRenderer';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MarkdownRenderer=_ref=>{let{content=''}=_ref;const copyToClipboard=useCallback(text=>{if(typeof navigator!=='undefined'&&navigator.clipboard){navigator.clipboard.writeText(text).catch(()=>{});}},[]);const components={h1:_ref2=>{let{children}=_ref2;return/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4 mt-6 text-gray-900\",children:children});},h2:_ref3=>{let{children}=_ref3;return/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-3 mt-5 text-gray-800\",children:children});},h3:_ref4=>{let{children}=_ref4;return/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2 mt-4 text-gray-800\",children:children});},p:_ref5=>{let{children}=_ref5;return/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 leading-relaxed text-gray-700\",children:children});},ul:_ref6=>{let{children}=_ref6;return/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside mb-4 ml-4 text-gray-700\",children:children});},ol:_ref7=>{let{children}=_ref7;return/*#__PURE__*/_jsx(\"ol\",{className:\"list-decimal list-inside mb-4 ml-4 text-gray-700\",children:children});},li:_ref8=>{let{children}=_ref8;return/*#__PURE__*/_jsx(\"li\",{className:\"mb-1\",children:children});},code:_ref9=>{let{inline,className,children=[]}=_ref9;const match=/language-(\\w+)/.exec(className||'');const language=match?match[1]:'';const codeString=Array.isArray(children)?children.join(''):String(children);// Render chart blocks fenced as ```chart\nif(language==='chart'&&!inline){try{const chartConfig=JSON.parse(codeString.trim());return/*#__PURE__*/_jsx(ChartRenderer,{config:chartConfig});}catch(e){console.error('Invalid chart config:',e);// Fall through to render as code if not valid JSON\n}}if(!inline){return/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"pre\",{className:\"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto mb-4\",children:/*#__PURE__*/_jsx(\"code\",{className:\"text-sm font-mono\",children:codeString})}),language&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-2 right-2 text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded\",children:language}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>copyToClipboard(codeString),className:\"absolute top-2 right-12 opacity-0 group-hover:opacity-100 transition-opacity text-xs text-gray-300 bg-gray-800 px-2 py-1 rounded hover:bg-gray-700\",children:\"Copy\"})]});}return/*#__PURE__*/_jsx(\"code\",{className:\"bg-gray-100 text-red-600 px-2 py-1 rounded text-sm font-mono\",children:codeString});},table:_ref0=>{let{children}=_ref0;return/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto mb-4\",children:/*#__PURE__*/_jsx(\"table\",{className:\"min-w-full border-collapse border border-gray-300\",children:children})});},thead:_ref1=>{let{children}=_ref1;return/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100\",children:children});},th:_ref10=>{let{children}=_ref10;return/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 px-4 py-2 text-left font-semibold text-gray-700\",children:children});},td:_ref11=>{let{children}=_ref11;return/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2 text-gray-700\",children:children});},blockquote:_ref12=>{let{children}=_ref12;return/*#__PURE__*/_jsx(\"blockquote\",{className:\"border-l-4 border-blue-500 pl-4 italic my-4 text-gray-600\",children:children});},// ✅ Fixed: proper opening <a> tag\na:_ref13=>{let{href,children}=_ref13;return/*#__PURE__*/_jsx(\"a\",{href:href,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600 hover:text-blue-800 underline\",children:children});},hr:()=>/*#__PURE__*/_jsx(\"hr\",{className:\"my-6 border-gray-300\"}),strong:_ref14=>{let{children}=_ref14;return/*#__PURE__*/_jsx(\"strong\",{className:\"font-semibold text-gray-900\",children:children});},em:_ref15=>{let{children}=_ref15;return/*#__PURE__*/_jsx(\"em\",{className:\"italic\",children:children});}};return/*#__PURE__*/_jsx(\"div\",{className:\"markdown-content\",children:/*#__PURE__*/_jsx(ReactMarkdown,{remarkPlugins:[remarkGfm],components:components,children:content})});};export default MarkdownRenderer;","map":{"version":3,"names":["React","useCallback","ReactMarkdown","remarkGfm","ChartRenderer","jsx","_jsx","jsxs","_jsxs","MarkdownRenderer","_ref","content","copyToClipboard","text","navigator","clipboard","writeText","catch","components","h1","_ref2","children","className","h2","_ref3","h3","_ref4","p","_ref5","ul","_ref6","ol","_ref7","li","_ref8","code","_ref9","inline","match","exec","language","codeString","Array","isArray","join","String","chartConfig","JSON","parse","trim","config","e","console","error","type","onClick","table","_ref0","thead","_ref1","th","_ref10","td","_ref11","blockquote","_ref12","a","_ref13","href","target","rel","hr","strong","_ref14","em","_ref15","remarkPlugins"],"sources":["/Users/yizelu/Desktop/mcp/frontend/src/components/ResponseDisplay/MarkdownRenderer.jsx"],"sourcesContent":["import React, { useCallback } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport ChartRenderer from './ChartRenderer';\n\nconst MarkdownRenderer = ({ content = '' }) => {\n  const copyToClipboard = useCallback((text) => {\n    if (typeof navigator !== 'undefined' && navigator.clipboard) {\n      navigator.clipboard.writeText(text).catch(() => {});\n    }\n  }, []);\n\n  const components = {\n    h1: ({ children }) => (\n      <h1 className=\"text-2xl font-bold mb-4 mt-6 text-gray-900\">{children}</h1>\n    ),\n    h2: ({ children }) => (\n      <h2 className=\"text-xl font-semibold mb-3 mt-5 text-gray-800\">{children}</h2>\n    ),\n    h3: ({ children }) => (\n      <h3 className=\"text-lg font-semibold mb-2 mt-4 text-gray-800\">{children}</h3>\n    ),\n    p: ({ children }) => (\n      <p className=\"mb-4 leading-relaxed text-gray-700\">{children}</p>\n    ),\n    ul: ({ children }) => (\n      <ul className=\"list-disc list-inside mb-4 ml-4 text-gray-700\">{children}</ul>\n    ),\n    ol: ({ children }) => (\n      <ol className=\"list-decimal list-inside mb-4 ml-4 text-gray-700\">{children}</ol>\n    ),\n    li: ({ children }) => <li className=\"mb-1\">{children}</li>,\n\n    code: ({ inline, className, children = [] }) => {\n      const match = /language-(\\w+)/.exec(className || '');\n      const language = match ? match[1] : '';\n      const codeString = Array.isArray(children) ? children.join('') : String(children);\n\n      // Render chart blocks fenced as ```chart\n      if (language === 'chart' && !inline) {\n        try {\n          const chartConfig = JSON.parse(codeString.trim());\n          return <ChartRenderer config={chartConfig} />;\n        } catch (e) {\n          console.error('Invalid chart config:', e);\n          // Fall through to render as code if not valid JSON\n        }\n      }\n\n      if (!inline) {\n        return (\n          <div className=\"relative group\">\n            <pre className=\"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto mb-4\">\n              <code className=\"text-sm font-mono\">{codeString}</code>\n            </pre>\n            {language && (\n              <span className=\"absolute top-2 right-2 text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded\">\n                {language}\n              </span>\n            )}\n            <button\n              type=\"button\"\n              onClick={() => copyToClipboard(codeString)}\n              className=\"absolute top-2 right-12 opacity-0 group-hover:opacity-100 transition-opacity text-xs text-gray-300 bg-gray-800 px-2 py-1 rounded hover:bg-gray-700\"\n            >\n              Copy\n            </button>\n          </div>\n        );\n      }\n\n      return (\n        <code className=\"bg-gray-100 text-red-600 px-2 py-1 rounded text-sm font-mono\">\n          {codeString}\n        </code>\n      );\n    },\n\n    table: ({ children }) => (\n      <div className=\"overflow-x-auto mb-4\">\n        <table className=\"min-w-full border-collapse border border-gray-300\">\n          {children}\n        </table>\n      </div>\n    ),\n    thead: ({ children }) => <thead className=\"bg-gray-100\">{children}</thead>,\n    th: ({ children }) => (\n      <th className=\"border border-gray-300 px-4 py-2 text-left font-semibold text-gray-700\">\n        {children}\n      </th>\n    ),\n    td: ({ children }) => (\n      <td className=\"border border-gray-300 px-4 py-2 text-gray-700\">{children}</td>\n    ),\n\n    blockquote: ({ children }) => (\n      <blockquote className=\"border-l-4 border-blue-500 pl-4 italic my-4 text-gray-600\">\n        {children}\n      </blockquote>\n    ),\n\n    // ✅ Fixed: proper opening <a> tag\n    a: ({ href, children }) => (\n      <a\n        href={href}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"text-blue-600 hover:text-blue-800 underline\"\n      >\n        {children}\n      </a>\n    ),\n\n    hr: () => <hr className=\"my-6 border-gray-300\" />,\n    strong: ({ children }) => (\n      <strong className=\"font-semibold text-gray-900\">{children}</strong>\n    ),\n    em: ({ children }) => <em className=\"italic\">{children}</em>,\n  };\n\n  return (\n    <div className=\"markdown-content\">\n      <ReactMarkdown remarkPlugins={[remarkGfm]} components={components}>\n        {content}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport default MarkdownRenderer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}