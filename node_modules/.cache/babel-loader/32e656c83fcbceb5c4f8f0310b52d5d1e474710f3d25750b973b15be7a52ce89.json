{"ast":null,"code":"import { contrast, mostContrast } from './utils';\n/**\n * Reverse the label color when the contrast is lower then `threshold`.\n * The default value of `threshold` is 4.5.\n * More about contract, see https://webaim.org/resources/contrastchecker/\n */\nexport const ContrastReverse = options => {\n  const {\n    threshold = 4.5,\n    palette = ['#000', '#fff']\n  } = options;\n  return labels => {\n    labels.forEach(l => {\n      const background = l.attr('dependentElement').parsedStyle.fill;\n      const foreground = l.parsedStyle.fill;\n      const c = contrast(foreground, background);\n      if (c < threshold) l.attr('fill', mostContrast(background, palette));\n    });\n    return labels;\n  };\n};","map":{"version":3,"names":["contrast","mostContrast","ContrastReverse","options","threshold","palette","labels","forEach","l","background","attr","parsedStyle","fill","foreground","c"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g2/src/label-transform/contrastReverse.ts"],"sourcesContent":["import { DisplayObject } from '@antv/g';\nimport { ContrastReverseLabelTransform } from '../spec';\nimport { LabelTransformComponent as LLC } from '../runtime';\nimport { contrast, mostContrast } from './utils';\n\nexport type ContrastReverseOptions = Omit<\n  ContrastReverseLabelTransform,\n  'type'\n>;\n\n/**\n * Reverse the label color when the contrast is lower then `threshold`.\n * The default value of `threshold` is 4.5.\n * More about contract, see https://webaim.org/resources/contrastchecker/\n */\nexport const ContrastReverse: LLC<ContrastReverseOptions> = (options) => {\n  const { threshold = 4.5, palette = ['#000', '#fff'] } = options;\n  return (labels: DisplayObject[]) => {\n    labels.forEach((l) => {\n      const background = l.attr('dependentElement').parsedStyle.fill;\n      const foreground = l.parsedStyle.fill;\n      const c = contrast(foreground, background);\n      if (c < threshold) l.attr('fill', mostContrast(background, palette));\n    });\n    return labels;\n  };\n};\n"],"mappings":"AAGA,SAASA,QAAQ,EAAEC,YAAY,QAAQ,SAAS;AAOhD;;;;;AAKA,OAAO,MAAMC,eAAe,GAAiCC,OAAO,IAAI;EACtE,MAAM;IAAEC,SAAS,GAAG,GAAG;IAAEC,OAAO,GAAG,CAAC,MAAM,EAAE,MAAM;EAAC,CAAE,GAAGF,OAAO;EAC/D,OAAQG,MAAuB,IAAI;IACjCA,MAAM,CAACC,OAAO,CAAEC,CAAC,IAAI;MACnB,MAAMC,UAAU,GAAGD,CAAC,CAACE,IAAI,CAAC,kBAAkB,CAAC,CAACC,WAAW,CAACC,IAAI;MAC9D,MAAMC,UAAU,GAAGL,CAAC,CAACG,WAAW,CAACC,IAAI;MACrC,MAAME,CAAC,GAAGd,QAAQ,CAACa,UAAU,EAAEJ,UAAU,CAAC;MAC1C,IAAIK,CAAC,GAAGV,SAAS,EAAEI,CAAC,CAACE,IAAI,CAAC,MAAM,EAAET,YAAY,CAACQ,UAAU,EAAEJ,OAAO,CAAC,CAAC;IACtE,CAAC,CAAC;IACF,OAAOC,MAAM;EACf,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}