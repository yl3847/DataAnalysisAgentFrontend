{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { mergeData } from './utils';\n/**\n * @todo Propagate more options to children.\n */\nexport const SpaceFlex = () => {\n  return options => {\n    const {\n      children\n    } = options;\n    if (!Array.isArray(children)) return [];\n    const {\n      direction = 'row',\n      ratio = children.map(() => 1),\n      padding = 0,\n      data: flexData\n    } = options;\n    const [mainStart, mainSize, crossSize, crossStart] = direction === 'col' ? ['y', 'height', 'width', 'x'] : ['x', 'width', 'height', 'y'];\n    const sum = ratio.reduce((total, value) => total + value);\n    const totalSize = options[mainSize] - padding * (children.length - 1);\n    const sizes = ratio.map(value => totalSize * (value / sum));\n    const newChildren = [];\n    let next = options[mainStart] || 0;\n    for (let i = 0; i < sizes.length; i += 1) {\n      const _a = children[i],\n        {\n          data\n        } = _a,\n        rest = __rest(_a, [\"data\"]);\n      const newData = mergeData(data, flexData);\n      newChildren.push(Object.assign({\n        [mainStart]: next,\n        [mainSize]: sizes[i],\n        [crossStart]: options[crossStart] || 0,\n        [crossSize]: options[crossSize],\n        data: newData\n      }, rest));\n      next += sizes[i] + padding;\n    }\n    return newChildren;\n  };\n};\nSpaceFlex.props = {};","map":{"version":3,"names":["mergeData","SpaceFlex","options","children","Array","isArray","direction","ratio","map","padding","data","flexData","mainStart","mainSize","crossSize","crossStart","sum","reduce","total","value","totalSize","length","sizes","newChildren","next","i","_a","rest","__rest","newData","push","Object","assign","props"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g2/src/composition/spaceFlex.ts"],"sourcesContent":["import { CompositionComponent as CC } from '../runtime';\nimport { SpaceFlexComposition } from '../spec';\nimport { mergeData } from './utils';\n\nexport type SpaceFlexOptions = Omit<SpaceFlexComposition, 'type'>;\n\n/**\n * @todo Propagate more options to children.\n */\nexport const SpaceFlex: CC<SpaceFlexOptions> = () => {\n  return (options) => {\n    const { children } = options;\n    if (!Array.isArray(children)) return [];\n\n    const {\n      direction = 'row',\n      ratio = children.map(() => 1),\n      padding = 0,\n      data: flexData,\n    } = options;\n    const [mainStart, mainSize, crossSize, crossStart] =\n      direction === 'col'\n        ? ['y', 'height', 'width', 'x']\n        : ['x', 'width', 'height', 'y'];\n\n    const sum = ratio.reduce((total, value) => total + value);\n    const totalSize = options[mainSize] - padding * (children.length - 1);\n    const sizes = ratio.map((value) => totalSize * (value / sum));\n\n    const newChildren = [];\n    let next = options[mainStart] || 0;\n    for (let i = 0; i < sizes.length; i += 1) {\n      const { data, ...rest } = children[i];\n      const newData = mergeData(data, flexData);\n      newChildren.push({\n        [mainStart]: next,\n        [mainSize]: sizes[i],\n        [crossStart]: options[crossStart] || 0,\n        [crossSize]: options[crossSize],\n        data: newData,\n        ...rest,\n      });\n      next += sizes[i] + padding;\n    }\n    return newChildren;\n  };\n};\n\nSpaceFlex.props = {};\n"],"mappings":";;;;;;;;AAEA,SAASA,SAAS,QAAQ,SAAS;AAInC;;;AAGA,OAAO,MAAMC,SAAS,GAAyBA,CAAA,KAAK;EAClD,OAAQC,OAAO,IAAI;IACjB,MAAM;MAAEC;IAAQ,CAAE,GAAGD,OAAO;IAC5B,IAAI,CAACE,KAAK,CAACC,OAAO,CAACF,QAAQ,CAAC,EAAE,OAAO,EAAE;IAEvC,MAAM;MACJG,SAAS,GAAG,KAAK;MACjBC,KAAK,GAAGJ,QAAQ,CAACK,GAAG,CAAC,MAAM,CAAC,CAAC;MAC7BC,OAAO,GAAG,CAAC;MACXC,IAAI,EAAEC;IAAQ,CACf,GAAGT,OAAO;IACX,MAAM,CAACU,SAAS,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,CAAC,GAChDT,SAAS,KAAK,KAAK,GACf,CAAC,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,CAAC,GAC7B,CAAC,GAAG,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,CAAC;IAEnC,MAAMU,GAAG,GAAGT,KAAK,CAACU,MAAM,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAKD,KAAK,GAAGC,KAAK,CAAC;IACzD,MAAMC,SAAS,GAAGlB,OAAO,CAACW,QAAQ,CAAC,GAAGJ,OAAO,IAAIN,QAAQ,CAACkB,MAAM,GAAG,CAAC,CAAC;IACrE,MAAMC,KAAK,GAAGf,KAAK,CAACC,GAAG,CAAEW,KAAK,IAAKC,SAAS,IAAID,KAAK,GAAGH,GAAG,CAAC,CAAC;IAE7D,MAAMO,WAAW,GAAG,EAAE;IACtB,IAAIC,IAAI,GAAGtB,OAAO,CAACU,SAAS,CAAC,IAAI,CAAC;IAClC,KAAK,IAAIa,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,KAAK,CAACD,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;MACxC,MAAMC,EAAA,GAAoBvB,QAAQ,CAACsB,CAAC,CAAC;QAA/B;UAAEf;QAAI,IAAAgB,EAAyB;QAApBC,IAAI,GAAAC,MAAA,CAAAF,EAAA,EAAf,QAAiB,CAAc;MACrC,MAAMG,OAAO,GAAG7B,SAAS,CAACU,IAAI,EAAEC,QAAQ,CAAC;MACzCY,WAAW,CAACO,IAAI,CAAAC,MAAA,CAAAC,MAAA;QACd,CAACpB,SAAS,GAAGY,IAAI;QACjB,CAACX,QAAQ,GAAGS,KAAK,CAACG,CAAC,CAAC;QACpB,CAACV,UAAU,GAAGb,OAAO,CAACa,UAAU,CAAC,IAAI,CAAC;QACtC,CAACD,SAAS,GAAGZ,OAAO,CAACY,SAAS,CAAC;QAC/BJ,IAAI,EAAEmB;MAAO,GACVF,IAAI,EACP;MACFH,IAAI,IAAIF,KAAK,CAACG,CAAC,CAAC,GAAGhB,OAAO;;IAE5B,OAAOc,WAAW;EACpB,CAAC;AACH,CAAC;AAEDtB,SAAS,CAACgC,KAAK,GAAG,EAAE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}