{"ast":null,"code":"function internGet({\n  map,\n  initKey\n}, value) {\n  const key = initKey(value);\n  return map.has(key) ? map.get(key) : value;\n}\nfunction internSet({\n  map,\n  initKey\n}, value) {\n  const key = initKey(value);\n  if (map.has(key)) return map.get(key);\n  map.set(key, value);\n  return value;\n}\nfunction internDelete({\n  map,\n  initKey\n}, value) {\n  const key = initKey(value);\n  if (map.has(key)) {\n    value = map.get(key);\n    map.delete(key);\n  }\n  return value;\n}\nfunction keyof(value) {\n  return typeof value === 'object' ? value.valueOf() : value;\n}\n/**\n * @see 参考 https://github.com/mbostock/internmap/blob/main/src/index.js\n */\nexport class InternMap extends Map {\n  constructor(entries) {\n    super();\n    this.map = new Map();\n    this.initKey = keyof;\n    if (entries !== null) {\n      for (const [key, value] of entries) {\n        this.set(key, value);\n      }\n    }\n  }\n  get(key) {\n    return super.get(internGet({\n      map: this.map,\n      initKey: this.initKey\n    }, key));\n  }\n  has(key) {\n    return super.has(internGet({\n      map: this.map,\n      initKey: this.initKey\n    }, key));\n  }\n  set(key, value) {\n    return super.set(internSet({\n      map: this.map,\n      initKey: this.initKey\n    }, key), value);\n  }\n  delete(key) {\n    return super.delete(internDelete({\n      map: this.map,\n      initKey: this.initKey\n    }, key));\n  }\n}","map":{"version":3,"names":["internGet","map","initKey","value","key","has","get","internSet","set","internDelete","delete","keyof","valueOf","InternMap","Map","constructor","entries"],"sources":["utils/internMap.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,SAASA,CAAC;EAAEC,GAAG;EAAEC;AAAO,CAAE,EAAEC,KAAK;EACxC,MAAMC,GAAG,GAAGF,OAAO,CAACC,KAAK,CAAC;EAC1B,OAAOF,GAAG,CAACI,GAAG,CAACD,GAAG,CAAC,GAAGH,GAAG,CAACK,GAAG,CAACF,GAAG,CAAC,GAAGD,KAAK;AAC5C;AAEA,SAASI,SAASA,CAAC;EAAEN,GAAG;EAAEC;AAAO,CAAE,EAAEC,KAAK;EACxC,MAAMC,GAAG,GAAGF,OAAO,CAACC,KAAK,CAAC;EAC1B,IAAIF,GAAG,CAACI,GAAG,CAACD,GAAG,CAAC,EAAE,OAAOH,GAAG,CAACK,GAAG,CAACF,GAAG,CAAC;EACrCH,GAAG,CAACO,GAAG,CAACJ,GAAG,EAAED,KAAK,CAAC;EACnB,OAAOA,KAAK;AACd;AAEA,SAASM,YAAYA,CAAC;EAAER,GAAG;EAAEC;AAAO,CAAE,EAAEC,KAAK;EAC3C,MAAMC,GAAG,GAAGF,OAAO,CAACC,KAAK,CAAC;EAC1B,IAAIF,GAAG,CAACI,GAAG,CAACD,GAAG,CAAC,EAAE;IAChBD,KAAK,GAAGF,GAAG,CAACK,GAAG,CAACF,GAAG,CAAC;IACpBH,GAAG,CAACS,MAAM,CAACN,GAAG,CAAC;;EAEjB,OAAOD,KAAK;AACd;AAEA,SAASQ,KAAKA,CAACR,KAAK;EAClB,OAAO,OAAOA,KAAK,KAAK,QAAQ,GAAGA,KAAK,CAACS,OAAO,EAAE,GAAGT,KAAK;AAC5D;AAEA;;;AAGA,OAAM,MAAOU,SAAgB,SAAQC,GAAG;EAKtCC,YAAYC,OAAO;IACjB,KAAK,EAAE;IALD,KAAAf,GAAG,GAAG,IAAIa,GAAG,EAAQ;IAErB,KAAAZ,OAAO,GAAGS,KAAK;IAIrB,IAAIK,OAAO,KAAK,IAAI,EAAE;MACpB,KAAK,MAAM,CAACZ,GAAG,EAAED,KAAK,CAAC,IAAIa,OAAO,EAAE;QAClC,IAAI,CAACR,GAAG,CAACJ,GAAG,EAAED,KAAK,CAAC;;;EAG1B;EAEAG,GAAGA,CAACF,GAAM;IACR,OAAO,KAAK,CAACE,GAAG,CAACN,SAAS,CAAC;MAAEC,GAAG,EAAE,IAAI,CAACA,GAAG;MAAEC,OAAO,EAAE,IAAI,CAACA;IAAO,CAAE,EAAEE,GAAG,CAAC,CAAC;EAC5E;EAEAC,GAAGA,CAACD,GAAM;IACR,OAAO,KAAK,CAACC,GAAG,CAACL,SAAS,CAAC;MAAEC,GAAG,EAAE,IAAI,CAACA,GAAG;MAAEC,OAAO,EAAE,IAAI,CAACA;IAAO,CAAE,EAAEE,GAAG,CAAC,CAAC;EAC5E;EAEAI,GAAGA,CAACJ,GAAM,EAAED,KAAQ;IAClB,OAAO,KAAK,CAACK,GAAG,CAACD,SAAS,CAAC;MAAEN,GAAG,EAAE,IAAI,CAACA,GAAG;MAAEC,OAAO,EAAE,IAAI,CAACA;IAAO,CAAE,EAAEE,GAAG,CAAC,EAAED,KAAK,CAAC;EACnF;EAEAO,MAAMA,CAACN,GAAM;IACX,OAAO,KAAK,CAACM,MAAM,CAACD,YAAY,CAAC;MAAER,GAAG,EAAE,IAAI,CAACA,GAAG;MAAEC,OAAO,EAAE,IAAI,CAACA;IAAO,CAAE,EAAEE,GAAG,CAAC,CAAC;EAClF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}