{"ast":null,"code":"import { __awaiter } from \"tslib\";\nconst DEFAULTS_LAYOUT_OPTIONS = {\n  center: [0, 0],\n  width: 300,\n  height: 300\n};\n/**\n * <zh/> 随机布局\n *\n * <en/> Random layout\n */\nexport class RandomLayout {\n  constructor(options = {}) {\n    this.options = options;\n    this.id = 'random';\n    this.options = Object.assign(Object.assign({}, DEFAULTS_LAYOUT_OPTIONS), options);\n  }\n  /**\n   * Return the positions of nodes and edges(if needed).\n   */\n  execute(graph, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return this.genericRandomLayout(false, graph, options);\n    });\n  }\n  /**\n   * To directly assign the positions to the nodes.\n   */\n  assign(graph, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.genericRandomLayout(true, graph, options);\n    });\n  }\n  genericRandomLayout(assign, graph, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const mergedOptions = Object.assign(Object.assign({}, this.options), options);\n      const {\n        center: propsCenter,\n        width: propsWidth,\n        height: propsHeight\n      } = mergedOptions;\n      const nodes = graph.getAllNodes();\n      const layoutScale = 0.9;\n      const width = !propsWidth && typeof window !== 'undefined' ? window.innerWidth : propsWidth;\n      const height = !propsHeight && typeof window !== 'undefined' ? window.innerHeight : propsHeight;\n      const center = !propsCenter ? [width / 2, height / 2] : propsCenter;\n      const layoutNodes = [];\n      if (nodes) {\n        nodes.forEach(node => {\n          layoutNodes.push({\n            id: node.id,\n            data: {\n              x: (Math.random() - 0.5) * layoutScale * width + center[0],\n              y: (Math.random() - 0.5) * layoutScale * height + center[1]\n            }\n          });\n        });\n      }\n      if (assign) {\n        layoutNodes.forEach(node => graph.mergeNodeData(node.id, {\n          x: node.data.x,\n          y: node.data.y\n        }));\n      }\n      const result = {\n        nodes: layoutNodes,\n        edges: graph.getAllEdges()\n      };\n      return result;\n    });\n  }\n}","map":{"version":3,"names":["DEFAULTS_LAYOUT_OPTIONS","center","width","height","RandomLayout","constructor","options","id","Object","assign","execute","graph","genericRandomLayout","mergedOptions","propsCenter","propsWidth","propsHeight","nodes","getAllNodes","layoutScale","window","innerWidth","innerHeight","layoutNodes","forEach","node","push","data","x","Math","random","y","mergeNodeData","result","edges","getAllEdges"],"sources":["../src/random.ts"],"sourcesContent":[null],"mappings":";AASA,MAAMA,uBAAuB,GAAiC;EAC5DC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EACdC,KAAK,EAAE,GAAG;EACVC,MAAM,EAAE;CACT;AAED;;;;;AAKA,OAAM,MAAOC,YAAY;EAGvBC,YAAmBC,OAAA,GAA+B,EAAyB;IAAxD,KAAAA,OAAO,GAAPA,OAAO;IAF1B,KAAAC,EAAE,GAAG,QAAQ;IAGX,IAAI,CAACD,OAAO,GAAAE,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACPT,uBAAuB,GACvBM,OAAO,CACX;EACH;EAEA;;;EAGMI,OAAOA,CAACC,KAAY,EAAEL,OAA6B;;MACvD,OAAO,IAAI,CAACM,mBAAmB,CAAC,KAAK,EAAED,KAAK,EAAEL,OAAO,CAAC;IACxD,CAAC;;EACD;;;EAGMG,MAAMA,CAACE,KAAY,EAAEL,OAA6B;;MACvD,MAAM,IAAI,CAACM,mBAAmB,CAAC,IAAI,EAAED,KAAK,EAAEL,OAAO,CAAC;IACrD,CAAC;;EAYaM,mBAAmBA,CAC/BH,MAAe,EACfE,KAAY,EACZL,OAA6B;;MAE7B,MAAMO,aAAa,GAAAL,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAQ,IAAI,CAACH,OAAO,GAAKA,OAAO,CAAE;MACrD,MAAM;QACJL,MAAM,EAAEa,WAAW;QACnBZ,KAAK,EAAEa,UAAU;QACjBZ,MAAM,EAAEa;MAAW,CACpB,GAAGH,aAAa;MAEjB,MAAMI,KAAK,GAAGN,KAAK,CAACO,WAAW,EAAE;MACjC,MAAMC,WAAW,GAAG,GAAG;MACvB,MAAMjB,KAAK,GACT,CAACa,UAAU,IAAI,OAAOK,MAAM,KAAK,WAAW,GACxCA,MAAM,CAACC,UAAU,GAChBN,UAAqB;MAC5B,MAAMZ,MAAM,GACV,CAACa,WAAW,IAAI,OAAOI,MAAM,KAAK,WAAW,GACzCA,MAAM,CAACE,WAAW,GACjBN,WAAsB;MAC7B,MAAMf,MAAM,GAAG,CAACa,WAAW,GACvB,CAACZ,KAAK,GAAG,CAAC,EAAEC,MAAM,GAAG,CAAC,CAAC,GACtBW,WAA0B;MAE/B,MAAMS,WAAW,GAAc,EAAE;MACjC,IAAIN,KAAK,EAAE;QACTA,KAAK,CAACO,OAAO,CAAEC,IAAI,IAAI;UACrBF,WAAW,CAACG,IAAI,CAAC;YACfnB,EAAE,EAAEkB,IAAI,CAAClB,EAAE;YACXoB,IAAI,EAAE;cACJC,CAAC,EAAE,CAACC,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAIX,WAAW,GAAGjB,KAAK,GAAGD,MAAM,CAAC,CAAC,CAAC;cAC1D8B,CAAC,EAAE,CAACF,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAIX,WAAW,GAAGhB,MAAM,GAAGF,MAAM,CAAC,CAAC;;WAE7D,CAAC;QACJ,CAAC,CAAC;;MAGJ,IAAIQ,MAAM,EAAE;QACVc,WAAW,CAACC,OAAO,CAAEC,IAAI,IACvBd,KAAK,CAACqB,aAAa,CAACP,IAAI,CAAClB,EAAE,EAAE;UAC3BqB,CAAC,EAAEH,IAAI,CAACE,IAAI,CAACC,CAAC;UACdG,CAAC,EAAEN,IAAI,CAACE,IAAI,CAACI;SACd,CAAC,CACH;;MAGH,MAAME,MAAM,GAAG;QACbhB,KAAK,EAAEM,WAAW;QAClBW,KAAK,EAAEvB,KAAK,CAACwB,WAAW;OACzB;MAED,OAAOF,MAAM;IACf,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}