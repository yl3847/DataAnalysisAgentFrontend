{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { path as d3path } from '@antv/vendor/d3-path';\nimport { appendArc, applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { isPolar } from '../../utils/coordinate';\nimport { dist } from '../../utils/vector';\nfunction getRibbonPath(points, coordinate) {\n  const [p0, p1, p2, p3] = points;\n  const path = d3path();\n  // In polar, draw shape only for Chord.\n  if (isPolar(coordinate)) {\n    const center = coordinate.getCenter();\n    const radius = dist(center, p0);\n    path.moveTo(p0[0], p0[1]);\n    // p0 -> p2\n    path.quadraticCurveTo(center[0], center[1], p2[0], p2[1]);\n    // p2 -> p3\n    appendArc(path, p2, p3, center, radius);\n    // p3 -> p1\n    path.quadraticCurveTo(center[0], center[1], p1[0], p1[1]);\n    // p1 -> p0\n    appendArc(path, p1, p0, center, radius);\n    path.closePath();\n    return path;\n  }\n  // In Rect, draw shape for Sankey.\n  path.moveTo(p0[0], p0[1]);\n  path.bezierCurveTo(p0[0] / 2 + p2[0] / 2, p0[1], p0[0] / 2 + p2[0] / 2, p2[1], p2[0], p2[1]);\n  path.lineTo(p3[0], p3[1]);\n  path.bezierCurveTo(p3[0] / 2 + p1[0] / 2, p3[1], p3[0] / 2 + p1[0] / 2, p1[1], p1[0], p1[1]);\n  path.lineTo(p0[0], p0[1]);\n  path.closePath();\n  return path;\n}\n/**\n * Connect points for 4 points:\n * - In rect, draw ribbon used in Sankey.\n * - In polar, draw arc used in Chord.\n */\nexport const Ribbon = (options, context) => {\n  const style = __rest(options, []);\n  const {\n    coordinate,\n    document\n  } = context;\n  return (points, value, defaults) => {\n    const {\n        color: defaultColor\n      } = defaults,\n      rest = __rest(defaults, [\"color\"]);\n    const {\n      color = defaultColor,\n      transform\n    } = value;\n    const path = getRibbonPath(points, coordinate);\n    return select(document.createElement('path', {})).call(applyStyle, rest).style('d', path.toString()).style('fill', color || defaultColor).style('stroke', color || defaultColor).style('transform', transform).call(applyStyle, style).node();\n  };\n};\nRibbon.props = {\n  defaultMarker: 'square',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut'\n};","map":{"version":3,"names":["path","d3path","appendArc","applyStyle","select","isPolar","dist","getRibbonPath","points","coordinate","p0","p1","p2","p3","center","getCenter","radius","moveTo","quadraticCurveTo","closePath","bezierCurveTo","lineTo","Ribbon","options","context","style","__rest","document","value","defaults","color","defaultColor","rest","transform","createElement","call","toString","node","props","defaultMarker","defaultEnterAnimation","defaultUpdateAnimation","defaultExitAnimation"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g2/src/shape/polygon/ribbon.ts"],"sourcesContent":["import { path as d3path } from '@antv/vendor/d3-path';\nimport { Coordinate } from '@antv/coord';\nimport { appendArc, applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { isPolar } from '../../utils/coordinate';\nimport { dist } from '../../utils/vector';\nimport { ShapeComponent as SC, Vector2 } from '../../runtime';\n\n/**\n * p0                          p2\n *    ┌──────────────────────┐\n *    │                      │\n *    │                      │\n * p1 └──────────────────────┘ p3\n */\nexport type RibbonOptions = Record<string, any>;\n\nfunction getRibbonPath(points: Vector2[], coordinate: Coordinate) {\n  const [p0, p1, p2, p3] = points;\n  const path = d3path();\n\n  // In polar, draw shape only for Chord.\n  if (isPolar(coordinate)) {\n    const center = coordinate.getCenter();\n    const radius = dist(center, p0);\n\n    path.moveTo(p0[0], p0[1]);\n    // p0 -> p2\n    path.quadraticCurveTo(center[0], center[1], p2[0], p2[1]);\n    // p2 -> p3\n    appendArc(path, p2, p3, center, radius);\n    // p3 -> p1\n    path.quadraticCurveTo(center[0], center[1], p1[0], p1[1]);\n    // p1 -> p0\n    appendArc(path, p1, p0, center, radius);\n    path.closePath();\n\n    return path;\n  }\n\n  // In Rect, draw shape for Sankey.\n  path.moveTo(p0[0], p0[1]);\n  path.bezierCurveTo(\n    p0[0] / 2 + p2[0] / 2,\n    p0[1],\n    p0[0] / 2 + p2[0] / 2,\n    p2[1],\n    p2[0],\n    p2[1],\n  );\n  path.lineTo(p3[0], p3[1]);\n  path.bezierCurveTo(\n    p3[0] / 2 + p1[0] / 2,\n    p3[1],\n    p3[0] / 2 + p1[0] / 2,\n    p1[1],\n    p1[0],\n    p1[1],\n  );\n  path.lineTo(p0[0], p0[1]);\n\n  path.closePath();\n\n  return path;\n}\n\n/**\n * Connect points for 4 points:\n * - In rect, draw ribbon used in Sankey.\n * - In polar, draw arc used in Chord.\n */\nexport const Ribbon: SC<RibbonOptions> = (options, context) => {\n  const { ...style } = options;\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { color: defaultColor, ...rest } = defaults;\n    const { color = defaultColor, transform } = value;\n    const path = getRibbonPath(points, coordinate);\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', path.toString())\n      .style('fill', color || defaultColor)\n      .style('stroke', color || defaultColor)\n      .style('transform', transform)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nRibbon.props = {\n  defaultMarker: 'square',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}