{"ast":null,"code":"import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { ElementEvent } from '@antv/g';\nimport { clamp, debounce } from '@antv/util';\nimport { animate, onAnimateFinished } from '../../animation';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport { BBox, classNames, hide, scaleToPixel, select, show, splitStyle, subStyleProps, transpose, visibility } from '../../util';\nimport { button } from '../marker/symbol';\nvar CLASS_NAMES = classNames({\n  prevBtnGroup: 'prev-btn-group',\n  prevBtn: 'prev-btn',\n  nextBtnGroup: 'next-btn-group',\n  nextBtn: 'next-btn',\n  pageInfoGroup: 'page-info-group',\n  pageInfo: 'page-info',\n  playWindow: 'play-window',\n  contentGroup: 'content-group',\n  controller: 'controller',\n  clipPath: 'clip-path'\n}, 'navigator');\nvar Navigator = /** @class */function (_super) {\n  __extends(Navigator, _super);\n  function Navigator(options) {\n    var _this = _super.call(this, options, {\n      x: 0,\n      y: 0,\n      animate: {\n        easing: 'linear',\n        duration: 200,\n        fill: 'both'\n      },\n      buttonCursor: 'pointer',\n      buttonFill: 'black',\n      buttonD: button(0, 0, 6),\n      buttonSize: 12,\n      controllerPadding: 5,\n      controllerSpacing: 5,\n      formatter: function (curr, total) {\n        return \"\".concat(curr, \"/\").concat(total);\n      },\n      defaultPage: 0,\n      loop: false,\n      orientation: 'horizontal',\n      pageNumFill: 'black',\n      pageNumFontSize: 12,\n      pageNumTextAlign: 'start',\n      pageNumTextBaseline: 'middle'\n    }) || this;\n    _this.playState = 'idle';\n    _this.contentGroup = _this.appendChild(new Group({\n      class: CLASS_NAMES.contentGroup.name\n    }));\n    _this.playWindow = _this.contentGroup.appendChild(new Group({\n      class: CLASS_NAMES.playWindow.name\n    }));\n    _this.innerCurrPage = _this.defaultPage;\n    return _this;\n  }\n  Object.defineProperty(Navigator.prototype, \"defaultPage\", {\n    get: function () {\n      var defaultPage = this.attributes.defaultPage;\n      return clamp(defaultPage, 0, Math.max(this.pageViews.length - 1, 0));\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"pageViews\", {\n    get: function () {\n      return this.playWindow.children;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"controllerShape\", {\n    // todo fixme\n    get: function () {\n      return this.totalPages > 1 ? {\n        width: 55,\n        height: 0\n      } : {\n        width: 0,\n        height: 0\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"pageShape\", {\n    get: function () {\n      var pageViews = this.pageViews;\n      var _a = __read(transpose(pageViews.map(function (pageView) {\n          var _a = pageView.getBBox(),\n            width = _a.width,\n            height = _a.height;\n          return [width, height];\n        })).map(function (arr) {\n          return Math.max.apply(Math, __spreadArray([], __read(arr), false));\n        }), 2),\n        maxWidth = _a[0],\n        maxHeight = _a[1];\n      var _b = this.attributes,\n        _c = _b.pageWidth,\n        pageWidth = _c === void 0 ? maxWidth : _c,\n        _d = _b.pageHeight,\n        pageHeight = _d === void 0 ? maxHeight : _d;\n      return {\n        pageWidth: pageWidth,\n        pageHeight: pageHeight\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Navigator.prototype.getContainer = function () {\n    return this.playWindow;\n  };\n  Object.defineProperty(Navigator.prototype, \"totalPages\", {\n    get: function () {\n      return this.pageViews.length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"currPage\", {\n    get: function () {\n      return this.innerCurrPage;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Navigator.prototype.getBBox = function () {\n    var _a = _super.prototype.getBBox.call(this),\n      x = _a.x,\n      y = _a.y;\n    var controllerShape = this.controllerShape;\n    var _b = this.pageShape,\n      pageWidth = _b.pageWidth,\n      pageHeight = _b.pageHeight;\n    return new BBox(x, y, pageWidth + controllerShape.width, pageHeight);\n  };\n  Navigator.prototype.goTo = function (pageNum) {\n    var _this = this;\n    var animateOptions = this.attributes.animate;\n    var _a = this,\n      currPage = _a.currPage,\n      playState = _a.playState,\n      playWindow = _a.playWindow,\n      pageViews = _a.pageViews;\n    if (playState !== 'idle' || pageNum < 0 || pageViews.length <= 0 || pageNum >= pageViews.length) return null;\n    pageViews[currPage].setLocalPosition(0, 0);\n    this.prepareFollowingPage(pageNum);\n    var _b = __read(this.getFollowingPageDiff(pageNum), 2),\n      dx = _b[0],\n      dy = _b[1];\n    this.playState = 'running';\n    var animation = animate(playWindow, [{\n      transform: \"translate(0, 0)\"\n    }, {\n      transform: \"translate(\".concat(-dx, \", \").concat(-dy, \")\")\n    }], animateOptions);\n    onAnimateFinished(animation, function () {\n      _this.innerCurrPage = pageNum;\n      _this.playState = 'idle';\n      _this.setVisiblePages([pageNum]);\n      _this.updatePageInfo();\n    });\n    return animation;\n  };\n  Navigator.prototype.prev = function () {\n    var loop = this.attributes.loop;\n    var pages = this.pageViews.length;\n    var page = this.currPage;\n    if (!loop && page <= 0) return null;\n    var following = loop ? (page - 1 + pages) % pages : clamp(page - 1, 0, pages);\n    return this.goTo(following);\n  };\n  Navigator.prototype.next = function () {\n    var loop = this.attributes.loop;\n    var pages = this.pageViews.length;\n    var page = this.currPage;\n    if (!loop && page >= pages - 1) return null;\n    var following = loop ? (page + 1) % pages : clamp(page + 1, 0, pages);\n    return this.goTo(following);\n  };\n  Navigator.prototype.renderClipPath = function (container) {\n    var _a = this.pageShape,\n      pageWidth = _a.pageWidth,\n      pageHeight = _a.pageHeight;\n    if (!pageWidth || !pageHeight) {\n      this.contentGroup.style.clipPath = undefined;\n      return;\n    }\n    this.clipPath = container.maybeAppendByClassName(CLASS_NAMES.clipPath, 'rect').styles({\n      width: pageWidth,\n      height: pageHeight\n    });\n    this.contentGroup.attr('clipPath', this.clipPath.node());\n  };\n  Navigator.prototype.setVisiblePages = function (pages) {\n    this.playWindow.children.forEach(function (page, index) {\n      if (pages.includes(index)) show(page);else hide(page);\n    });\n  };\n  Navigator.prototype.adjustControllerLayout = function () {\n    var _a = this,\n      prevBtn = _a.prevBtnGroup,\n      nextBtn = _a.nextBtnGroup,\n      pageNum = _a.pageInfoGroup;\n    var _b = this.attributes,\n      orientation = _b.orientation,\n      padding = _b.controllerPadding;\n    var _c = pageNum.getBBox(),\n      pW = _c.width,\n      pH = _c.height;\n    var _d = __read(orientation === 'horizontal' ? [-180, 0] : [-90, 90], 2),\n      r1 = _d[0],\n      r2 = _d[1];\n    prevBtn.setLocalEulerAngles(r1);\n    nextBtn.setLocalEulerAngles(r2);\n    var _e = prevBtn.getBBox(),\n      bpW = _e.width,\n      bpH = _e.height;\n    var _f = nextBtn.getBBox(),\n      bnW = _f.width,\n      bnH = _f.height;\n    var maxWidth = Math.max(bpW, pW, bnW);\n    var _g = orientation === 'horizontal' ? {\n        offset: [[0, 0], [bpW / 2 + padding, 0], [bpW + pW + padding * 2, 0]],\n        textAlign: 'start'\n      } : {\n        offset: [[maxWidth / 2, -bpH - padding], [maxWidth / 2, 0], [maxWidth / 2, bnH + padding]],\n        textAlign: 'center'\n      },\n      _h = __read(_g.offset, 3),\n      _j = __read(_h[0], 2),\n      o1x = _j[0],\n      o1y = _j[1],\n      _k = __read(_h[1], 2),\n      o2x = _k[0],\n      o2y = _k[1],\n      _l = __read(_h[2], 2),\n      o3x = _l[0],\n      o3y = _l[1],\n      textAlign = _g.textAlign;\n    var pageNumText = pageNum.querySelector('text');\n    pageNumText && (pageNumText.style.textAlign = textAlign);\n    prevBtn.setLocalPosition(o1x, o1y);\n    pageNum.setLocalPosition(o2x, o2y);\n    nextBtn.setLocalPosition(o3x, o3y);\n  };\n  Navigator.prototype.updatePageInfo = function () {\n    var _a;\n    var _b = this,\n      currPage = _b.currPage,\n      pageViews = _b.pageViews,\n      formatter = _b.attributes.formatter;\n    if (pageViews.length < 2) return;\n    (_a = this.pageInfoGroup.querySelector(CLASS_NAMES.pageInfo.class)) === null || _a === void 0 ? void 0 : _a.attr('text', formatter(currPage + 1, pageViews.length));\n    this.adjustControllerLayout();\n  };\n  Navigator.prototype.getFollowingPageDiff = function (pageNum) {\n    var currPage = this.currPage;\n    if (currPage === pageNum) return [0, 0];\n    var orientation = this.attributes.orientation;\n    var _a = this.pageShape,\n      pageWidth = _a.pageWidth,\n      pageHeight = _a.pageHeight;\n    var sign = pageNum < currPage ? -1 : 1;\n    return orientation === 'horizontal' ? [sign * pageWidth, 0] : [0, sign * pageHeight];\n  };\n  Navigator.prototype.prepareFollowingPage = function (pageNum) {\n    var _a = this,\n      currPage = _a.currPage,\n      pageViews = _a.pageViews;\n    this.setVisiblePages([pageNum, currPage]);\n    if (pageNum !== currPage) {\n      var _b = __read(this.getFollowingPageDiff(pageNum), 2),\n        dx = _b[0],\n        dy = _b[1];\n      pageViews[pageNum].setLocalPosition(dx, dy);\n    }\n  };\n  Navigator.prototype.renderController = function (container) {\n    var _this = this;\n    var spacing = this.attributes.controllerSpacing;\n    var _a = this.pageShape,\n      pageWidth = _a.pageWidth,\n      pageHeight = _a.pageHeight;\n    var visible = this.pageViews.length >= 2;\n    var group = container.maybeAppendByClassName(CLASS_NAMES.controller, 'g');\n    visibility(group.node(), visible);\n    if (!visible) return;\n    var style = subStyleProps(this.attributes, 'button');\n    var textStyle = subStyleProps(this.attributes, 'pageNum');\n    var _b = __read(splitStyle(style), 2),\n      _c = _b[0],\n      groupStyle = _b[1],\n      size = _c.size,\n      pathStyle = __rest(_c, [\"size\"]);\n    var whetherToAddEventListener = !group.select(CLASS_NAMES.prevBtnGroup.class).node();\n    var prevBtnGroup = group.maybeAppendByClassName(CLASS_NAMES.prevBtnGroup, 'g').styles(groupStyle);\n    this.prevBtnGroup = prevBtnGroup.node();\n    var prevBtn = prevBtnGroup.maybeAppendByClassName(CLASS_NAMES.prevBtn, 'path');\n    var nextBtnGroup = group.maybeAppendByClassName(CLASS_NAMES.nextBtnGroup, 'g').styles(groupStyle);\n    this.nextBtnGroup = nextBtnGroup.node();\n    var nextBtn = nextBtnGroup.maybeAppendByClassName(CLASS_NAMES.nextBtn, 'path');\n    [prevBtn, nextBtn].forEach(function (btn) {\n      btn.styles(__assign(__assign({}, pathStyle), {\n        transformOrigin: 'center'\n      }));\n      scaleToPixel(btn.node(), size, true);\n    });\n    var pageInfoGroup = group.maybeAppendByClassName(CLASS_NAMES.pageInfoGroup, 'g');\n    this.pageInfoGroup = pageInfoGroup.node();\n    pageInfoGroup.maybeAppendByClassName(CLASS_NAMES.pageInfo, 'text').styles(textStyle);\n    this.updatePageInfo();\n    // group.node().style.transform = `translate(${pageWidth + spacing}, ${pageHeight / 2})`;\n    // put it on the right side of the container\n    group.node().setLocalPosition(pageWidth + spacing, pageHeight / 2);\n    if (whetherToAddEventListener) {\n      this.prevBtnGroup.addEventListener('click', function () {\n        _this.prev();\n      });\n      this.nextBtnGroup.addEventListener('click', function () {\n        _this.next();\n      });\n    }\n  };\n  Navigator.prototype.render = function (attributes, container) {\n    var _a = attributes.x,\n      x = _a === void 0 ? 0 : _a,\n      _b = attributes.y,\n      y = _b === void 0 ? 0 : _b;\n    this.attr('transform', \"translate(\".concat(x, \", \").concat(y, \")\"));\n    /**\n     * container\n     *  |- contentGroup (with clip path)\n     *    |- playWindow (with animation)\n     *      |- pages\n     *  |- clipPath\n     */\n    var containerSelection = select(container);\n    this.renderClipPath(containerSelection);\n    this.renderController(containerSelection);\n    this.setVisiblePages([this.defaultPage]);\n    this.goTo(this.defaultPage);\n  };\n  Navigator.prototype.bindEvents = function () {\n    var _this = this;\n    var render = debounce(function () {\n      return _this.render(_this.attributes, _this);\n    }, 50);\n    this.playWindow.addEventListener(ElementEvent.INSERTED, render);\n    this.playWindow.addEventListener(ElementEvent.REMOVED, render);\n  };\n  return Navigator;\n}(Component);\nexport { Navigator };","map":{"version":3,"names":["ElementEvent","clamp","debounce","animate","onAnimateFinished","Component","Group","BBox","classNames","hide","scaleToPixel","select","show","splitStyle","subStyleProps","transpose","visibility","button","CLASS_NAMES","prevBtnGroup","prevBtn","nextBtnGroup","nextBtn","pageInfoGroup","pageInfo","playWindow","contentGroup","controller","clipPath","Navigator","_super","__extends","options","_this","call","x","y","easing","duration","fill","buttonCursor","buttonFill","buttonD","buttonSize","controllerPadding","controllerSpacing","formatter","curr","total","concat","defaultPage","loop","orientation","pageNumFill","pageNumFontSize","pageNumTextAlign","pageNumTextBaseline","playState","appendChild","class","name","innerCurrPage","Object","defineProperty","prototype","get","attributes","Math","max","pageViews","length","children","totalPages","width","height","_a","__read","map","pageView","getBBox","arr","apply","__spreadArray","maxWidth","maxHeight","_b","_c","pageWidth","_d","pageHeight","getContainer","controllerShape","pageShape","goTo","pageNum","animateOptions","currPage","setLocalPosition","prepareFollowingPage","getFollowingPageDiff","dx","dy","animation","transform","setVisiblePages","updatePageInfo","prev","pages","page","following","next","renderClipPath","container","style","undefined","maybeAppendByClassName","styles","attr","node","forEach","index","includes","adjustControllerLayout","padding","pW","pH","r1","r2","setLocalEulerAngles","_e","bpW","bpH","_f","bnW","bnH","_g","offset","textAlign","_h","_j","o1x","o1y","_k","o2x","o2y","_l","o3x","o3y","pageNumText","querySelector","sign","renderController","spacing","visible","group","textStyle","groupStyle","size","pathStyle","__rest","whetherToAddEventListener","btn","__assign","transformOrigin","addEventListener","render","containerSelection","bindEvents","INSERTED","REMOVED"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/component/src/ui/navigator/index.ts"],"sourcesContent":["import { ElementEvent } from '@antv/g';\nimport { clamp, debounce } from '@antv/util';\nimport { animate, onAnimateFinished } from '../../animation';\nimport { Component } from '../../core';\nimport { Group, Rect, Text } from '../../shapes';\nimport type { Vector2 } from '../../types';\nimport type { Selection } from '../../util';\nimport {\n  BBox,\n  classNames,\n  hide,\n  scaleToPixel,\n  select,\n  show,\n  splitStyle,\n  subStyleProps,\n  transpose,\n  visibility,\n} from '../../util';\nimport { button } from '../marker/symbol';\nimport type { NavigatorOptions, NavigatorStyleProps } from './types';\n\nexport type { NavigatorOptions, NavigatorStyleProps };\n\nconst CLASS_NAMES = classNames(\n  {\n    prevBtnGroup: 'prev-btn-group',\n    prevBtn: 'prev-btn',\n    nextBtnGroup: 'next-btn-group',\n    nextBtn: 'next-btn',\n    pageInfoGroup: 'page-info-group',\n    pageInfo: 'page-info',\n    playWindow: 'play-window',\n    contentGroup: 'content-group',\n    controller: 'controller',\n    clipPath: 'clip-path',\n  },\n  'navigator'\n);\n\nexport class Navigator extends Component<NavigatorStyleProps> {\n  constructor(options: NavigatorOptions) {\n    super(options, {\n      x: 0,\n      y: 0,\n      animate: {\n        easing: 'linear',\n        duration: 200,\n        fill: 'both',\n      },\n      buttonCursor: 'pointer',\n      buttonFill: 'black',\n      buttonD: button(0, 0, 6),\n      buttonSize: 12,\n      controllerPadding: 5,\n      controllerSpacing: 5,\n      formatter: (curr, total) => `${curr}/${total}`,\n      defaultPage: 0,\n      loop: false,\n      orientation: 'horizontal',\n      pageNumFill: 'black',\n      pageNumFontSize: 12,\n      pageNumTextAlign: 'start',\n      pageNumTextBaseline: 'middle',\n    });\n  }\n\n  private playState: 'idle' | 'running' = 'idle';\n\n  private contentGroup = this.appendChild(new Group({ class: CLASS_NAMES.contentGroup.name }));\n\n  private playWindow = this.contentGroup.appendChild(new Group({ class: CLASS_NAMES.playWindow.name }));\n\n  private get defaultPage() {\n    const { defaultPage } = this.attributes;\n    return clamp(defaultPage, 0, Math.max(this.pageViews.length - 1, 0));\n  }\n\n  private innerCurrPage: number = this.defaultPage;\n\n  private clipPath!: Selection<Rect>;\n\n  private prevBtnGroup!: Group;\n\n  private nextBtnGroup!: Group;\n\n  private pageInfoGroup!: Group;\n\n  private get pageViews() {\n    return this.playWindow.children as Group[];\n  }\n\n  // todo fixme\n  private get controllerShape() {\n    return this.totalPages > 1 ? { width: 55, height: 0 } : { width: 0, height: 0 };\n  }\n\n  private get pageShape() {\n    const { pageViews } = this;\n    const [maxWidth, maxHeight] = transpose(\n      pageViews.map((pageView) => {\n        const { width, height } = pageView.getBBox();\n        return [width, height];\n      })\n    ).map((arr) => Math.max(...arr));\n\n    const { pageWidth = maxWidth, pageHeight = maxHeight } = this.attributes;\n\n    return { pageWidth, pageHeight };\n  }\n\n  public getContainer() {\n    return this.playWindow;\n  }\n\n  public get totalPages() {\n    return this.pageViews.length;\n  }\n\n  public get currPage() {\n    return this.innerCurrPage;\n  }\n\n  public getBBox(): DOMRect {\n    const { x, y } = super.getBBox();\n    const controllerShape = this.controllerShape;\n    const { pageWidth, pageHeight } = this.pageShape;\n    return new BBox(x, y, pageWidth + controllerShape.width, pageHeight);\n  }\n\n  public goTo(pageNum: number) {\n    const { animate: animateOptions } = this.attributes;\n    const { currPage, playState, playWindow, pageViews } = this;\n    if (playState !== 'idle' || pageNum < 0 || pageViews.length <= 0 || pageNum >= pageViews.length) return null;\n    pageViews[currPage].setLocalPosition(0, 0);\n    this.prepareFollowingPage(pageNum);\n    const [dx, dy] = this.getFollowingPageDiff(pageNum);\n    this.playState = 'running';\n\n    const animation = animate(\n      playWindow,\n      [{ transform: `translate(0, 0)` }, { transform: `translate(${-dx}, ${-dy})` }],\n      animateOptions\n    );\n\n    onAnimateFinished(animation, () => {\n      this.innerCurrPage = pageNum;\n      this.playState = 'idle';\n      this.setVisiblePages([pageNum]);\n      this.updatePageInfo();\n    });\n\n    return animation;\n  }\n\n  public prev() {\n    const { loop } = this.attributes;\n    const pages = this.pageViews.length;\n    const page = this.currPage;\n    if (!loop && page <= 0) return null;\n    const following = loop ? (page - 1 + pages) % pages : clamp(page - 1, 0, pages);\n    return this.goTo(following);\n  }\n\n  public next() {\n    const { loop } = this.attributes;\n    const pages = this.pageViews.length;\n    const page = this.currPage;\n    if (!loop && page >= pages - 1) return null;\n    const following = loop ? (page + 1) % pages : clamp(page + 1, 0, pages);\n    return this.goTo(following);\n  }\n\n  private renderClipPath(container: Selection) {\n    const { pageWidth, pageHeight } = this.pageShape;\n    if (!pageWidth || !pageHeight) {\n      this.contentGroup.style.clipPath = undefined;\n      return;\n    }\n    this.clipPath = container.maybeAppendByClassName(CLASS_NAMES.clipPath, 'rect').styles({\n      width: pageWidth,\n      height: pageHeight,\n    });\n\n    this.contentGroup.attr('clipPath', this.clipPath.node());\n  }\n\n  private setVisiblePages(pages: number[]) {\n    (this.playWindow.children as Group[]).forEach((page, index) => {\n      if (pages.includes(index)) show(page);\n      else hide(page);\n    });\n  }\n\n  private adjustControllerLayout() {\n    const { prevBtnGroup: prevBtn, nextBtnGroup: nextBtn, pageInfoGroup: pageNum } = this;\n    const { orientation, controllerPadding: padding } = this.attributes;\n    const { width: pW, height: pH } = pageNum.getBBox();\n\n    const [r1, r2] = orientation === 'horizontal' ? [-180, 0] : [-90, 90];\n    prevBtn.setLocalEulerAngles(r1);\n    nextBtn.setLocalEulerAngles(r2);\n\n    const { width: bpW, height: bpH } = prevBtn.getBBox();\n    const { width: bnW, height: bnH } = nextBtn.getBBox();\n\n    const maxWidth = Math.max(bpW, pW, bnW);\n\n    const {\n      offset: [[o1x, o1y], [o2x, o2y], [o3x, o3y]],\n      textAlign,\n    }: {\n      offset: [Vector2, Vector2, Vector2];\n      textAlign: string;\n    } =\n      orientation === 'horizontal'\n        ? {\n            offset: [\n              [0, 0],\n              [bpW / 2 + padding, 0],\n              [bpW + pW + padding * 2, 0],\n            ],\n            textAlign: 'start',\n          }\n        : {\n            offset: [\n              [maxWidth / 2, -bpH - padding],\n              [maxWidth / 2, 0],\n              [maxWidth / 2, bnH + padding],\n            ],\n            textAlign: 'center',\n          };\n\n    const pageNumText = pageNum.querySelector('text');\n    pageNumText && (pageNumText.style.textAlign = textAlign);\n\n    prevBtn.setLocalPosition(o1x, o1y);\n    pageNum.setLocalPosition(o2x, o2y);\n    nextBtn.setLocalPosition(o3x, o3y);\n  }\n\n  private updatePageInfo() {\n    const {\n      currPage,\n      pageViews,\n      attributes: { formatter },\n    } = this;\n    if (pageViews.length < 2) return;\n    (this.pageInfoGroup.querySelector(CLASS_NAMES.pageInfo.class) as Text)?.attr(\n      'text',\n      formatter!(currPage + 1, pageViews.length)\n    );\n    this.adjustControllerLayout();\n  }\n\n  private getFollowingPageDiff(pageNum: number) {\n    const { currPage } = this;\n    if (currPage === pageNum) return [0, 0];\n    const { orientation } = this.attributes;\n    const { pageWidth, pageHeight } = this.pageShape;\n    const sign = pageNum < currPage ? -1 : 1;\n    return orientation === 'horizontal' ? [sign * pageWidth, 0] : [0, sign * pageHeight];\n  }\n\n  private prepareFollowingPage(pageNum: number) {\n    const { currPage, pageViews } = this;\n    this.setVisiblePages([pageNum, currPage]);\n    if (pageNum !== currPage) {\n      const [dx, dy] = this.getFollowingPageDiff(pageNum);\n      pageViews[pageNum].setLocalPosition(dx, dy);\n    }\n  }\n\n  private renderController(container: Selection) {\n    const { controllerSpacing: spacing } = this.attributes;\n    const { pageWidth, pageHeight } = this.pageShape;\n    const visible = this.pageViews.length >= 2;\n\n    const group = container.maybeAppendByClassName(CLASS_NAMES.controller, 'g');\n    visibility(group.node(), visible);\n\n    if (!visible) return;\n\n    const style = subStyleProps(this.attributes, 'button');\n    const textStyle = subStyleProps(this.attributes, 'pageNum');\n    const [{ size, ...pathStyle }, groupStyle] = splitStyle(style);\n\n    const whetherToAddEventListener = !group.select(CLASS_NAMES.prevBtnGroup.class).node();\n\n    const prevBtnGroup = group.maybeAppendByClassName(CLASS_NAMES.prevBtnGroup, 'g').styles(groupStyle);\n    this.prevBtnGroup = prevBtnGroup.node();\n    const prevBtn = prevBtnGroup.maybeAppendByClassName(CLASS_NAMES.prevBtn, 'path');\n\n    const nextBtnGroup = group.maybeAppendByClassName(CLASS_NAMES.nextBtnGroup, 'g').styles(groupStyle);\n    this.nextBtnGroup = nextBtnGroup.node();\n    const nextBtn = nextBtnGroup.maybeAppendByClassName(CLASS_NAMES.nextBtn, 'path');\n\n    [prevBtn, nextBtn].forEach((btn) => {\n      btn.styles({ ...pathStyle, transformOrigin: 'center' });\n      scaleToPixel(btn.node(), size, true);\n    });\n\n    const pageInfoGroup = group.maybeAppendByClassName(CLASS_NAMES.pageInfoGroup, 'g');\n    this.pageInfoGroup = pageInfoGroup.node();\n\n    pageInfoGroup.maybeAppendByClassName(CLASS_NAMES.pageInfo, 'text').styles(textStyle);\n\n    this.updatePageInfo();\n\n    // group.node().style.transform = `translate(${pageWidth + spacing}, ${pageHeight / 2})`;\n\n    // put it on the right side of the container\n    group.node().setLocalPosition(pageWidth + spacing, pageHeight / 2);\n    if (whetherToAddEventListener) {\n      this.prevBtnGroup.addEventListener('click', () => {\n        this.prev();\n      });\n      this.nextBtnGroup.addEventListener('click', () => {\n        this.next();\n      });\n    }\n  }\n\n  render(attributes: NavigatorStyleProps, container: Group) {\n    const { x = 0, y = 0 } = attributes;\n    this.attr('transform', `translate(${x}, ${y})`);\n\n    /**\n     * container\n     *  |- contentGroup (with clip path)\n     *    |- playWindow (with animation)\n     *      |- pages\n     *  |- clipPath\n     */\n    const containerSelection = select(container);\n    this.renderClipPath(containerSelection);\n    this.renderController(containerSelection);\n    this.setVisiblePages([this.defaultPage]);\n    this.goTo(this.defaultPage);\n  }\n\n  public bindEvents() {\n    const render = debounce(() => this.render(this.attributes, this), 50);\n    this.playWindow.addEventListener(ElementEvent.INSERTED, render);\n    this.playWindow.addEventListener(ElementEvent.REMOVED, render);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}