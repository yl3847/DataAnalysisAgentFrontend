{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { path as d3path } from '@antv/vendor/d3-path';\nimport { select } from '../../utils/selection';\nimport { applyStyle } from '../utils';\nimport { angle, sub, add } from '../../utils/vector';\nimport { defined } from '../../utils/helper';\nimport { Curve } from './curve';\n/**\n *\n * x9-x0---------x1-x2\n * /   |r1        |r2 \\\n *x8---p0---------p1---x3\n * \\ r4|          | r3 /\n *  x7-x6--------x5-x4\n */\nfunction stroke(path, p0, p1, s0, s1) {\n  const v = sub(p1, p0);\n  const a = angle(v);\n  const a1 = a + Math.PI / 2;\n  const r1 = [s0 / 2 * Math.cos(a1), s0 / 2 * Math.sin(a1)];\n  const r2 = [s1 / 2 * Math.cos(a1), s1 / 2 * Math.sin(a1)];\n  const r3 = [s1 / 2 * Math.cos(a), s1 / 2 * Math.sin(a)];\n  const r4 = [s0 / 2 * Math.cos(a), s0 / 2 * Math.sin(a)];\n  const x0 = add(p0, r1);\n  const x1 = add(p1, r2);\n  const x2 = add(x1, r3);\n  const x3 = add(p1, r3);\n  const x4 = sub(x3, r2);\n  const x5 = sub(p1, r2);\n  const x6 = sub(p0, r1);\n  const x7 = sub(x6, r4);\n  const x8 = sub(p0, r4);\n  const x9 = sub(x0, r4);\n  path.moveTo(...x0);\n  path.lineTo(...x1);\n  path.arcTo(...x2, ...x3, s1 / 2);\n  path.arcTo(...x4, ...x5, s1 / 2);\n  path.lineTo(...x6);\n  path.arcTo(...x7, ...x8, s0 / 2);\n  path.arcTo(...x9, ...x0, s0 / 2);\n  path.closePath();\n}\n// @todo Support connect and connectStyle.\nexport const Trail = (options, context) => {\n  const {\n    document\n  } = context;\n  return (P, value, defaults) => {\n    const {\n      seriesSize,\n      color\n    } = value;\n    const {\n        color: defaultColor\n      } = defaults,\n      rest = __rest(defaults, [\"color\"]);\n    const path = d3path();\n    for (let i = 0; i < P.length - 1; i++) {\n      const p0 = P[i];\n      const p1 = P[i + 1];\n      const s0 = seriesSize[i];\n      const s1 = seriesSize[i + 1];\n      if ([...p0, ...p1].every(defined)) stroke(path, p0, p1, s0, s1);\n    }\n    return select(document.createElement('path', {})).call(applyStyle, rest).style('fill', color || defaultColor).style('d', path.toString()).call(applyStyle, options).node();\n  };\n};\nTrail.props = Object.assign(Object.assign({}, Curve.props), {\n  defaultMarker: 'line'\n});","map":{"version":3,"names":["path","d3path","select","applyStyle","angle","sub","add","defined","Curve","stroke","p0","p1","s0","s1","v","a","a1","Math","PI","r1","cos","sin","r2","r3","r4","x0","x1","x2","x3","x4","x5","x6","x7","x8","x9","moveTo","lineTo","arcTo","closePath","Trail","options","context","document","P","value","defaults","seriesSize","color","defaultColor","rest","__rest","i","length","every","createElement","call","style","toString","node","props","Object","assign","defaultMarker"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g2/src/shape/line/trail.ts"],"sourcesContent":["import { path as d3path } from '@antv/vendor/d3-path';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { select } from '../../utils/selection';\nimport { applyStyle } from '../utils';\nimport { angle, sub, add, Vector2 } from '../../utils/vector';\nimport { defined } from '../../utils/helper';\nimport { Curve } from './curve';\n\n/**\n *\n * x9-x0---------x1-x2\n * /   |r1        |r2 \\\n *x8---p0---------p1---x3\n * \\ r4|          | r3 /\n *  x7-x6--------x5-x4\n */\nfunction stroke(path, p0, p1, s0, s1) {\n  const v = sub(p1, p0);\n  const a = angle(v);\n  const a1 = a + Math.PI / 2;\n  const r1: Vector2 = [(s0 / 2) * Math.cos(a1), (s0 / 2) * Math.sin(a1)];\n  const r2: Vector2 = [(s1 / 2) * Math.cos(a1), (s1 / 2) * Math.sin(a1)];\n  const r3: Vector2 = [(s1 / 2) * Math.cos(a), (s1 / 2) * Math.sin(a)];\n  const r4: Vector2 = [(s0 / 2) * Math.cos(a), (s0 / 2) * Math.sin(a)];\n  const x0 = add(p0, r1);\n  const x1 = add(p1, r2);\n  const x2 = add(x1, r3);\n  const x3 = add(p1, r3);\n  const x4 = sub(x3, r2);\n  const x5 = sub(p1, r2);\n  const x6 = sub(p0, r1);\n  const x7 = sub(x6, r4);\n  const x8 = sub(p0, r4);\n  const x9 = sub(x0, r4);\n\n  path.moveTo(...x0);\n  path.lineTo(...x1);\n  path.arcTo(...x2, ...x3, s1 / 2);\n  path.arcTo(...x4, ...x5, s1 / 2);\n  path.lineTo(...x6);\n  path.arcTo(...x7, ...x8, s0 / 2);\n  path.arcTo(...x9, ...x0, s0 / 2);\n  path.closePath();\n}\n\nexport type TrailOptions = Record<string, any>;\n\n// @todo Support connect and connectStyle.\nexport const Trail: SC<TrailOptions> = (options, context) => {\n  const { document } = context;\n  return (P, value, defaults) => {\n    const { seriesSize, color } = value;\n    const { color: defaultColor, ...rest } = defaults;\n    const path = d3path();\n    for (let i = 0; i < P.length - 1; i++) {\n      const p0 = P[i];\n      const p1 = P[i + 1];\n      const s0 = seriesSize[i];\n      const s1 = seriesSize[i + 1];\n      if ([...p0, ...p1].every(defined)) stroke(path, p0, p1, s0, s1);\n    }\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('fill', color || defaultColor)\n      .style('d', path.toString())\n      .call(applyStyle, options)\n      .node();\n  };\n};\n\nTrail.props = {\n  ...Curve.props,\n  defaultMarker: 'line',\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}