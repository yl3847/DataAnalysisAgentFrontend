{"ast":null,"code":"import React,{useRef,useEffect}from'react';import ChatInput from'./ChatInput';import ChatMessage from'./ChatMessage';import'./ChatBox.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChatBox=_ref=>{let{messages,onSendMessage,isLoading,onMessageClick}=_ref;const messagesContainerRef=useRef(null);const messagesEndRef=useRef(null);// Auto-scroll to bottom when new messages arrive\nuseEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-box flex flex-col h-full\",children:[/*#__PURE__*/_jsx(\"div\",{ref:messagesContainerRef,className:\"flex-1 chat-messages-area p-4 space-y-3\",style:{overflowY:'auto',height:'calc(100% - 80px)'},children:messages.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-full text-gray-400\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-12 h-12 mb-3\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-4l-4 4z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"Start a conversation\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 text-center px-4\",children:\"Ask about the data or request analysis\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-1 w-full\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 uppercase tracking-wide text-center mb-2\",children:\"Try asking:\"}),[\"Show qualification rates\",\"Analyze performance\",\"Compare age groups\",\"What's the pass rate?\"].map((query,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onSendMessage(query),className:\"w-full text-left px-3 py-2 text-xs bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-gray-700\",children:[\"\\\"\",query,\"\\\"\"]},index))]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[messages.map(message=>/*#__PURE__*/_jsx(ChatMessage,{message:message,onClick:()=>{if(message.type==='user'&&onMessageClick){onMessageClick(message.id);}}},message.id)),isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"typing-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"Analyzing...\"})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t bg-gray-50 flex-shrink-0\",style:{height:'80px'},children:/*#__PURE__*/_jsx(ChatInput,{onSendMessage:onSendMessage,disabled:isLoading,compact:true})})]});};export default ChatBox;","map":{"version":3,"names":["React","useRef","useEffect","ChatInput","ChatMessage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatBox","_ref","messages","onSendMessage","isLoading","onMessageClick","messagesContainerRef","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","className","children","ref","style","overflowY","height","length","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","map","query","index","onClick","message","type","id","disabled","compact"],"sources":["/Users/yizelu/Desktop/mcp/frontend/src/components/ChatBox/ChatBox.jsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport ChatInput from './ChatInput';\nimport ChatMessage from './ChatMessage';\nimport './ChatBox.css';\n\nconst ChatBox = ({ messages, onSendMessage, isLoading, onMessageClick }) => {\n  const messagesContainerRef = useRef(null);\n  const messagesEndRef = useRef(null);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  return (\n    <div className=\"chat-box flex flex-col h-full\">\n      {/* Messages Area with proper scrolling */}\n      <div \n        ref={messagesContainerRef}\n        className=\"flex-1 chat-messages-area p-4 space-y-3\"\n        style={{ \n          overflowY: 'auto',\n          height: 'calc(100% - 80px)'\n        }}\n      >\n        {messages.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-full text-gray-400\">\n            <svg\n              className=\"w-12 h-12 mb-3\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={1.5}\n                d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-4l-4 4z\"\n              />\n            </svg>\n            <p className=\"text-sm font-medium\">Start a conversation</p>\n            <p className=\"text-xs mt-1 text-center px-4\">\n              Ask about the data or request analysis\n            </p>\n            \n            {/* Sample Queries */}\n            <div className=\"mt-4 space-y-1 w-full\">\n              <p className=\"text-xs text-gray-500 uppercase tracking-wide text-center mb-2\">\n                Try asking:\n              </p>\n              {[\n                \"Show qualification rates\",\n                \"Analyze performance\",\n                \"Compare age groups\",\n                \"What's the pass rate?\"\n              ].map((query, index) => (\n                <button\n                  key={index}\n                  onClick={() => onSendMessage(query)}\n                  className=\"w-full text-left px-3 py-2 text-xs bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-gray-700\"\n                >\n                  \"{query}\"\n                </button>\n              ))}\n            </div>\n          </div>\n        ) : (\n          <>\n            {messages.map((message) => (\n              <ChatMessage \n                key={message.id} \n                message={message}\n                onClick={() => {\n                  if (message.type === 'user' && onMessageClick) {\n                    onMessageClick(message.id);\n                  }\n                }}\n              />\n            ))}\n            \n            {/* Loading Indicator */}\n            {isLoading && (\n              <div className=\"flex items-center space-x-2 text-gray-500\">\n                <div className=\"typing-indicator\">\n                  <span></span>\n                  <span></span>\n                  <span></span>\n                </div>\n                <span className=\"text-xs\">Analyzing...</span>\n              </div>\n            )}\n            \n            <div ref={messagesEndRef} />\n          </>\n        )}\n      </div>\n\n      {/* Input Area */}\n      <div className=\"border-t bg-gray-50 flex-shrink-0\" style={{ height: '80px' }}>\n        <ChatInput \n          onSendMessage={onSendMessage} \n          disabled={isLoading}\n          compact={true}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ChatBox;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}