{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { paramsParser } from '../parser/params-parser';\nimport { fixArc } from '../process/fix-arc';\nimport { normalizePath } from '../process/normalize-path';\nimport { isCurveArray } from '../util/is-curve-array';\nimport { segmentToCubic } from '../process/segment-2-cubic';\n// import { fixPath } from '../process/fix-path';\nexport function path2Curve(pathInput, needZCommandIndexes) {\n  if (needZCommandIndexes === void 0) {\n    needZCommandIndexes = false;\n  }\n  if (isCurveArray(pathInput)) {\n    var cloned = [].concat(pathInput);\n    if (needZCommandIndexes) {\n      return [cloned, []];\n    } else {\n      return cloned;\n    }\n  }\n  // fixPath will remove 'Z' command\n  // const path = fixPath(normalizePath(pathInput));\n  var path = normalizePath(pathInput);\n  var params = __assign({}, paramsParser);\n  var allPathCommands = [];\n  var pathCommand = '';\n  var ii = path.length;\n  var segment;\n  var seglen;\n  var zCommandIndexes = [];\n  for (var i = 0; i < ii; i += 1) {\n    if (path[i]) pathCommand = path[i][0];\n    allPathCommands[i] = pathCommand;\n    var curveSegment = segmentToCubic(path[i], params);\n    path[i] = curveSegment;\n    fixArc(path, allPathCommands, i);\n    ii = path.length; // solves curveArrays ending in Z\n    // keep Z command account for lineJoin\n    // @see https://github.com/antvis/util/issues/68\n    if (pathCommand === 'Z') {\n      zCommandIndexes.push(i);\n    }\n    segment = path[i];\n    seglen = segment.length;\n    params.x1 = +segment[seglen - 2];\n    params.y1 = +segment[seglen - 1];\n    params.x2 = +segment[seglen - 4] || params.x1;\n    params.y2 = +segment[seglen - 3] || params.y1;\n  }\n  // validate\n  if (needZCommandIndexes) {\n    return [path, zCommandIndexes];\n  } else {\n    return path;\n  }\n}","map":{"version":3,"names":["paramsParser","fixArc","normalizePath","isCurveArray","segmentToCubic","path2Curve","pathInput","needZCommandIndexes","cloned","concat","path","params","__assign","allPathCommands","pathCommand","ii","length","segment","seglen","zCommandIndexes","i","curveSegment","push","x1","y1","x2","y2"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/util/src/path/convert/path-2-curve.ts"],"sourcesContent":["import { paramsParser } from '../parser/params-parser';\nimport { fixArc } from '../process/fix-arc';\nimport { normalizePath } from '../process/normalize-path';\nimport { isCurveArray } from '../util/is-curve-array';\nimport { segmentToCubic } from '../process/segment-2-cubic';\nimport type { CurveArray, PathArray } from '../types';\n// import { fixPath } from '../process/fix-path';\n\nexport function path2Curve(\n  pathInput: string | PathArray,\n  needZCommandIndexes = false,\n): CurveArray | [CurveArray, number[]] {\n  if (isCurveArray(pathInput)) {\n    const cloned = [].concat(pathInput) as CurveArray;\n    if (needZCommandIndexes) {\n      return [cloned, []];\n    } else {\n      return cloned;\n    }\n  }\n\n  // fixPath will remove 'Z' command\n  // const path = fixPath(normalizePath(pathInput));\n  const path = normalizePath(pathInput) as CurveArray;\n\n  const params = { ...paramsParser };\n  const allPathCommands = [];\n  let pathCommand = '';\n  let ii = path.length;\n  let segment: any;\n  let seglen: number;\n  const zCommandIndexes: number[] = [];\n\n  for (let i = 0; i < ii; i += 1) {\n    if (path[i]) [pathCommand] = path[i];\n\n    allPathCommands[i] = pathCommand;\n    const curveSegment = segmentToCubic(path[i], params);\n\n    path[i] = curveSegment;\n\n    fixArc(path, allPathCommands, i);\n    ii = path.length; // solves curveArrays ending in Z\n\n    // keep Z command account for lineJoin\n    // @see https://github.com/antvis/util/issues/68\n    if (pathCommand === 'Z') {\n      zCommandIndexes.push(i);\n    }\n\n    segment = path[i];\n    seglen = segment.length;\n\n    params.x1 = +segment[seglen - 2];\n    params.y1 = +segment[seglen - 1];\n    params.x2 = +segment[seglen - 4] || params.x1;\n    params.y2 = +segment[seglen - 3] || params.y1;\n  }\n\n  // validate\n\n  if (needZCommandIndexes) {\n    return [path, zCommandIndexes];\n  } else {\n    return path;\n  }\n}\n"],"mappings":";AAAA,SAASA,YAAY,QAAQ,yBAAyB;AACtD,SAASC,MAAM,QAAQ,oBAAoB;AAC3C,SAASC,aAAa,QAAQ,2BAA2B;AACzD,SAASC,YAAY,QAAQ,wBAAwB;AACrD,SAASC,cAAc,QAAQ,4BAA4B;AAE3D;AAEA,OAAM,SAAUC,UAAUA,CACxBC,SAA6B,EAC7BC,mBAA2B;EAA3B,IAAAA,mBAAA;IAAAA,mBAAA,QAA2B;EAAA;EAE3B,IAAIJ,YAAY,CAACG,SAAS,CAAC,EAAE;IAC3B,IAAME,MAAM,GAAG,EAAE,CAACC,MAAM,CAACH,SAAS,CAAe;IACjD,IAAIC,mBAAmB,EAAE;MACvB,OAAO,CAACC,MAAM,EAAE,EAAE,CAAC;IACrB,CAAC,MAAM;MACL,OAAOA,MAAM;IACf;EACF;EAEA;EACA;EACA,IAAME,IAAI,GAAGR,aAAa,CAACI,SAAS,CAAe;EAEnD,IAAMK,MAAM,GAAAC,QAAA,KAAQZ,YAAY,CAAE;EAClC,IAAMa,eAAe,GAAG,EAAE;EAC1B,IAAIC,WAAW,GAAG,EAAE;EACpB,IAAIC,EAAE,GAAGL,IAAI,CAACM,MAAM;EACpB,IAAIC,OAAY;EAChB,IAAIC,MAAc;EAClB,IAAMC,eAAe,GAAa,EAAE;EAEpC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,EAAE,EAAEK,CAAC,IAAI,CAAC,EAAE;IAC9B,IAAIV,IAAI,CAACU,CAAC,CAAC,EAAGN,WAAW,GAAIJ,IAAI,CAACU,CAAC,CAAC,GAAX;IAEzBP,eAAe,CAACO,CAAC,CAAC,GAAGN,WAAW;IAChC,IAAMO,YAAY,GAAGjB,cAAc,CAACM,IAAI,CAACU,CAAC,CAAC,EAAET,MAAM,CAAC;IAEpDD,IAAI,CAACU,CAAC,CAAC,GAAGC,YAAY;IAEtBpB,MAAM,CAACS,IAAI,EAAEG,eAAe,EAAEO,CAAC,CAAC;IAChCL,EAAE,GAAGL,IAAI,CAACM,MAAM,CAAC,CAAC;IAElB;IACA;IACA,IAAIF,WAAW,KAAK,GAAG,EAAE;MACvBK,eAAe,CAACG,IAAI,CAACF,CAAC,CAAC;IACzB;IAEAH,OAAO,GAAGP,IAAI,CAACU,CAAC,CAAC;IACjBF,MAAM,GAAGD,OAAO,CAACD,MAAM;IAEvBL,MAAM,CAACY,EAAE,GAAG,CAACN,OAAO,CAACC,MAAM,GAAG,CAAC,CAAC;IAChCP,MAAM,CAACa,EAAE,GAAG,CAACP,OAAO,CAACC,MAAM,GAAG,CAAC,CAAC;IAChCP,MAAM,CAACc,EAAE,GAAG,CAACR,OAAO,CAACC,MAAM,GAAG,CAAC,CAAC,IAAIP,MAAM,CAACY,EAAE;IAC7CZ,MAAM,CAACe,EAAE,GAAG,CAACT,OAAO,CAACC,MAAM,GAAG,CAAC,CAAC,IAAIP,MAAM,CAACa,EAAE;EAC/C;EAEA;EAEA,IAAIjB,mBAAmB,EAAE;IACvB,OAAO,CAACG,IAAI,EAAES,eAAe,CAAC;EAChC,CAAC,MAAM;IACL,OAAOT,IAAI;EACb;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}