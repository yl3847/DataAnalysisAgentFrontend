{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { arc, line } from '@antv/vendor/d3-shape';\nimport { isPolar } from '../../utils/coordinate';\nimport { select } from '../../utils/selection';\nimport { dist } from '../../utils/vector';\nimport { subObject } from '../../utils/helper';\nimport { applyStyle } from '../utils';\nfunction getArrowMarker(document, arrowSize, arrowStyle) {\n  const arrowMarker = document.createElement('path', {\n    style: Object.assign({\n      d: `M ${arrowSize},${arrowSize} L -${arrowSize},0 L ${arrowSize},-${arrowSize} L 0,0 Z`,\n      transformOrigin: 'center'\n    }, arrowStyle)\n  });\n  return arrowMarker;\n}\nfunction getPath(points, coordinate) {\n  if (!isPolar(coordinate)) return line().x(d => d[0]).y(d => d[1])(points);\n  const center = coordinate.getCenter();\n  return arc()({\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    outerRadius: dist(points[0], center),\n    innerRadius: dist(points[1], center)\n  });\n}\nfunction getTransform(coordinate, transform) {\n  if (!isPolar(coordinate)) return transform;\n  const [cx, cy] = coordinate.getCenter();\n  return `translate(${cx}, ${cy}) ${transform || ''}`;\n}\nexport const Line = (options, context) => {\n  const {\n      arrow,\n      arrowSize = 4\n    } = options,\n    style = __rest(options, [\"arrow\", \"arrowSize\"]);\n  const {\n    coordinate,\n    document\n  } = context;\n  return (points, value, defaults) => {\n    const {\n        color: defaultColor,\n        lineWidth\n      } = defaults,\n      shapeTheme = __rest(defaults, [\"color\", \"lineWidth\"]);\n    const {\n      color = defaultColor,\n      size = lineWidth\n    } = value;\n    const arrowMarker = arrow ? getArrowMarker(document, arrowSize, Object.assign({\n      fill: style.stroke || color,\n      stroke: style.stroke || color\n    }, subObject(style, 'arrow'))) : null;\n    const path = getPath(points, coordinate);\n    const transform = getTransform(coordinate, value.transform);\n    return select(document.createElement('path', {})).call(applyStyle, shapeTheme).style('d', path).style('stroke', color).style('lineWidth', size).style('transform', transform).style('markerEnd', arrowMarker).call(applyStyle, style).node();\n  };\n};\nLine.props = {\n  defaultMarker: 'line',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut'\n};","map":{"version":3,"names":["arc","line","isPolar","select","dist","subObject","applyStyle","getArrowMarker","document","arrowSize","arrowStyle","arrowMarker","createElement","style","Object","assign","d","transformOrigin","getPath","points","coordinate","x","y","center","getCenter","startAngle","endAngle","Math","PI","outerRadius","innerRadius","getTransform","transform","cx","cy","Line","options","context","arrow","__rest","value","defaults","color","defaultColor","lineWidth","shapeTheme","size","fill","stroke","path","call","node","props","defaultMarker","defaultEnterAnimation","defaultUpdateAnimation","defaultExitAnimation"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g2/src/shape/lineXY/line.ts"],"sourcesContent":["import { IDocument } from '@antv/g';\nimport { Coordinate } from '@antv/coord';\nimport { arc, line } from '@antv/vendor/d3-shape';\nimport { isPolar } from '../../utils/coordinate';\nimport { select } from '../../utils/selection';\nimport { dist } from '../../utils/vector';\nimport { subObject } from '../../utils/helper';\nimport { Primitive, ShapeComponent as SC, Vector2 } from '../../runtime';\nimport { applyStyle } from '../utils';\n\nexport type LineOptions = {\n  /**\n   * Whether show arrow.\n   */\n  arrow?: boolean;\n  /**\n   * Arrow size(px), default is 4px.\n   */\n  arrowSize?: number;\n  /**\n   * Fill color of arrow.\n   */\n  arrowFill?: string;\n  /**\n   * Stroke color of arrow.\n   */\n  arrowStroke?: string;\n  /**\n   * Others.\n   */\n  [key: string]: any;\n};\n\nfunction getArrowMarker(\n  document: IDocument,\n  arrowSize: number,\n  arrowStyle: any,\n) {\n  const arrowMarker = document.createElement('path', {\n    style: {\n      d: `M ${arrowSize},${arrowSize} L -${arrowSize},0 L ${arrowSize},-${arrowSize} L 0,0 Z`,\n      transformOrigin: 'center',\n      ...arrowStyle,\n    },\n  });\n  return arrowMarker;\n}\n\nfunction getPath(points: Vector2[], coordinate: Coordinate) {\n  if (!isPolar(coordinate))\n    return line()\n      .x((d) => d[0])\n      .y((d) => d[1])(points);\n\n  const center = coordinate.getCenter();\n  return arc()({\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    outerRadius: dist(points[0], center),\n    innerRadius: dist(points[1], center),\n  });\n}\n\nfunction getTransform(coordinate: Coordinate, transform?: Primitive) {\n  if (!isPolar(coordinate)) return transform;\n\n  const [cx, cy] = coordinate.getCenter();\n  return `translate(${cx}, ${cy}) ${transform || ''}`;\n}\n\nexport const Line: SC<LineOptions> = (options, context) => {\n  const { arrow, arrowSize = 4, ...style } = options;\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { color: defaultColor, lineWidth, ...shapeTheme } = defaults;\n    const { color = defaultColor, size = lineWidth } = value;\n\n    const arrowMarker = arrow\n      ? getArrowMarker(document, arrowSize, {\n          fill: style.stroke || color,\n          stroke: style.stroke || color,\n          ...subObject(style, 'arrow'),\n        })\n      : null;\n\n    const path = getPath(points, coordinate);\n    const transform = getTransform(coordinate, value.transform);\n\n    return select(document.createElement('path', {}))\n      .call(applyStyle, shapeTheme)\n      .style('d', path)\n      .style('stroke', color)\n      .style('lineWidth', size)\n      .style('transform', transform)\n      .style('markerEnd', arrowMarker)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nLine.props = {\n  defaultMarker: 'line',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}