{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { useRef, useEffect } from 'react';\nimport { isFunction, isEqual, createNode, cloneDeep, isArray, isObject, isValidElement } from '../util';\nexport default function useChart(ChartClass, config) {\n  var chart = useRef(null);\n  var chartOptions = useRef(null);\n  var container = useRef(null);\n  var onReady = config.onReady,\n    onEvent = config.onEvent;\n  /**\n   * Get data base64\n   * @param {string} type A DOMString indicating the image format. The default format type is image/png.\n   * @param {number} encoderOptions A Number between 0 and 1 indicating the image quality\n   */\n  var toDataURL = function (type, encoderOptions) {\n    var _a;\n    if (type === void 0) {\n      type = 'image/png';\n    }\n    var canvas = (_a = container.current) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('canvas')[0];\n    return canvas === null || canvas === void 0 ? void 0 : canvas.toDataURL(type, encoderOptions);\n  };\n  /**\n   * Download Image\n   * @param {string} name A name of image\n   * @param {string} type A DOMString indicating the image format. The default format type is image/png.\n   * @param {number} encoderOptions A Number between 0 and 1 indicating the image quality\n   */\n  var downloadImage = function (name, type, encoderOptions) {\n    if (name === void 0) {\n      name = 'download';\n    }\n    if (type === void 0) {\n      type = 'image/png';\n    }\n    var imageName = name;\n    if (name.indexOf('.') === -1) {\n      imageName = \"\".concat(name, \".\").concat(type.split('/')[1]);\n    }\n    var base64 = toDataURL(type, encoderOptions);\n    var a = document.createElement('a');\n    a.href = base64;\n    a.download = imageName;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    a = null;\n    return imageName;\n  };\n  /**\n   * JSX TO HTMLElement\n   * @param {object} cfg\n   * @param {boolean} flag isTooltip\n   */\n  var processConfig = function (cfg, flag) {\n    if (flag === void 0) {\n      flag = false;\n    }\n    var keys = Object.keys(cfg);\n    var isTooltip = flag;\n    keys.forEach(function (key) {\n      var current = cfg[key];\n      if (key === 'tooltip') {\n        isTooltip = true;\n      }\n      if (isFunction(current) && isValidElement(\"\".concat(current))) {\n        cfg[key] = function () {\n          var arg = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            arg[_i] = arguments[_i];\n          }\n          return createNode(current.apply(void 0, arg), isTooltip);\n        };\n      } else {\n        if (isArray(current)) {\n          current.forEach(function (item) {\n            processConfig(item, isTooltip);\n          });\n        } else if (isObject(current)) {\n          processConfig(current, isTooltip);\n        } else {\n          isTooltip = flag;\n        }\n      }\n    });\n  };\n  useEffect(function () {\n    if (chart.current && !isEqual(chartOptions.current, config)) {\n      chartOptions.current = cloneDeep(config);\n      processConfig(config);\n      chart.current.update(config);\n      chart.current.render();\n    }\n  }, [config]);\n  useEffect(function () {\n    if (!container.current) {\n      return function () {\n        return null;\n      };\n    }\n    if (!chartOptions.current) {\n      chartOptions.current = cloneDeep(config);\n    }\n    processConfig(config);\n    var chartInstance = new ChartClass(container.current, __assign({}, config));\n    chartInstance.toDataURL = toDataURL;\n    chartInstance.downloadImage = downloadImage;\n    chartInstance.render();\n    chart.current = chartInstance;\n    if (onReady) {\n      onReady(chartInstance);\n    }\n    var handler = function (event) {\n      if (onEvent) {\n        onEvent(chartInstance, event);\n      }\n    };\n    chartInstance.on('*', handler);\n    // 组件销毁时销毁图表\n    return function () {\n      if (chart.current) {\n        chart.current.destroy();\n        chart.current.off('*', handler);\n        chart.current = undefined;\n      }\n    };\n  }, []);\n  return {\n    chart: chart,\n    container: container\n  };\n}","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","useRef","useEffect","isFunction","isEqual","createNode","cloneDeep","isArray","isObject","isValidElement","useChart","ChartClass","config","chart","chartOptions","container","onReady","onEvent","toDataURL","type","encoderOptions","_a","canvas","current","getElementsByTagName","downloadImage","name","imageName","indexOf","concat","split","base64","a","document","createElement","href","download","body","appendChild","click","removeChild","processConfig","cfg","flag","keys","isTooltip","forEach","key","arg","_i","item","update","render","chartInstance","handler","event","on","destroy","off","undefined"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@ant-design/plots/es/hooks/useChart.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useRef, useEffect } from 'react';\nimport { isFunction, isEqual, createNode, cloneDeep, isArray, isObject, isValidElement } from '../util';\nexport default function useChart(ChartClass, config) {\n    var chart = useRef(null);\n    var chartOptions = useRef(null);\n    var container = useRef(null);\n    var onReady = config.onReady, onEvent = config.onEvent;\n    /**\n     * Get data base64\n     * @param {string} type A DOMString indicating the image format. The default format type is image/png.\n     * @param {number} encoderOptions A Number between 0 and 1 indicating the image quality\n     */\n    var toDataURL = function (type, encoderOptions) {\n        var _a;\n        if (type === void 0) { type = 'image/png'; }\n        var canvas = (_a = container.current) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('canvas')[0];\n        return canvas === null || canvas === void 0 ? void 0 : canvas.toDataURL(type, encoderOptions);\n    };\n    /**\n     * Download Image\n     * @param {string} name A name of image\n     * @param {string} type A DOMString indicating the image format. The default format type is image/png.\n     * @param {number} encoderOptions A Number between 0 and 1 indicating the image quality\n     */\n    var downloadImage = function (name, type, encoderOptions) {\n        if (name === void 0) { name = 'download'; }\n        if (type === void 0) { type = 'image/png'; }\n        var imageName = name;\n        if (name.indexOf('.') === -1) {\n            imageName = \"\".concat(name, \".\").concat(type.split('/')[1]);\n        }\n        var base64 = toDataURL(type, encoderOptions);\n        var a = document.createElement('a');\n        a.href = base64;\n        a.download = imageName;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        a = null;\n        return imageName;\n    };\n    /**\n     * JSX TO HTMLElement\n     * @param {object} cfg\n     * @param {boolean} flag isTooltip\n     */\n    var processConfig = function (cfg, flag) {\n        if (flag === void 0) { flag = false; }\n        var keys = Object.keys(cfg);\n        var isTooltip = flag;\n        keys.forEach(function (key) {\n            var current = cfg[key];\n            if (key === 'tooltip') {\n                isTooltip = true;\n            }\n            if (isFunction(current) && isValidElement(\"\".concat(current))) {\n                cfg[key] = function () {\n                    var arg = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        arg[_i] = arguments[_i];\n                    }\n                    return createNode(current.apply(void 0, arg), isTooltip);\n                };\n            }\n            else {\n                if (isArray(current)) {\n                    current.forEach(function (item) {\n                        processConfig(item, isTooltip);\n                    });\n                }\n                else if (isObject(current)) {\n                    processConfig(current, isTooltip);\n                }\n                else {\n                    isTooltip = flag;\n                }\n            }\n        });\n    };\n    useEffect(function () {\n        if (chart.current && !isEqual(chartOptions.current, config)) {\n            chartOptions.current = cloneDeep(config);\n            processConfig(config);\n            chart.current.update(config);\n            chart.current.render();\n        }\n    }, [config]);\n    useEffect(function () {\n        if (!container.current) {\n            return function () { return null; };\n        }\n        if (!chartOptions.current) {\n            chartOptions.current = cloneDeep(config);\n        }\n        processConfig(config);\n        var chartInstance = new ChartClass(container.current, __assign({}, config));\n        chartInstance.toDataURL = toDataURL;\n        chartInstance.downloadImage = downloadImage;\n        chartInstance.render();\n        chart.current = chartInstance;\n        if (onReady) {\n            onReady(chartInstance);\n        }\n        var handler = function (event) {\n            if (onEvent) {\n                onEvent(chartInstance, event);\n            }\n        };\n        chartInstance.on('*', handler);\n        // 组件销毁时销毁图表\n        return function () {\n            if (chart.current) {\n                chart.current.destroy();\n                chart.current.off('*', handler);\n                chart.current = undefined;\n            }\n        };\n    }, []);\n    return {\n        chart: chart,\n        container: container,\n    };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}