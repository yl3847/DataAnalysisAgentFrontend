{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { hide, show } from '../utils/style';\nimport { Node } from './node';\nimport { defineProps } from './define';\nimport { compositionProps } from './props';\nlet CompositionNode = class CompositionNode extends Node {\n  /**\n   * Change current node data and its children data.\n   */\n  changeData(data) {\n    var _a;\n    const chart = this.getRoot();\n    if (!chart) return;\n    this.attr('data', data);\n    if ((_a = this.children) === null || _a === void 0 ? void 0 : _a.length) {\n      this.children.forEach(child => {\n        child.attr('data', data);\n      });\n    }\n    return chart === null || chart === void 0 ? void 0 : chart.render();\n  }\n  /**\n   * Get view instance by key.\n   */\n  getView() {\n    const chart = this.getRoot();\n    const {\n      views\n    } = chart.getContext();\n    if (!(views === null || views === void 0 ? void 0 : views.length)) return undefined;\n    return views.find(view => view.key === this._key);\n  }\n  getScale() {\n    var _a;\n    return (_a = this.getView()) === null || _a === void 0 ? void 0 : _a.scale;\n  }\n  getScaleByChannel(channel) {\n    const scale = this.getScale();\n    if (scale) return scale[channel];\n    return;\n  }\n  getCoordinate() {\n    var _a;\n    return (_a = this.getView()) === null || _a === void 0 ? void 0 : _a.coordinate;\n  }\n  getTheme() {\n    var _a;\n    return (_a = this.getView()) === null || _a === void 0 ? void 0 : _a.theme;\n  }\n  getGroup() {\n    const key = this._key;\n    if (!key) return undefined;\n    const chart = this.getRoot();\n    const chartGroup = chart.getContext().canvas.getRoot();\n    return chartGroup.getElementById(key);\n  }\n  /**\n   * Show the view.\n   */\n  show() {\n    const group = this.getGroup();\n    if (!group) return;\n    !group.isVisible() && show(group);\n  }\n  /**\n   * Hide the view.\n   */\n  hide() {\n    const group = this.getGroup();\n    if (!group) return;\n    group.isVisible() && hide(group);\n  }\n};\nCompositionNode = __decorate([defineProps(compositionProps)], CompositionNode);\nexport { CompositionNode };","map":{"version":3,"names":["hide","show","Node","defineProps","compositionProps","CompositionNode","changeData","data","chart","getRoot","attr","_a","children","length","forEach","child","render","getView","views","getContext","undefined","find","view","key","_key","getScale","scale","getScaleByChannel","channel","getCoordinate","coordinate","getTheme","theme","getGroup","chartGroup","canvas","getElementById","group","isVisible","__decorate"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g2/src/api/composition.ts"],"sourcesContent":["import { Coordinate } from '@antv/coord';\nimport { DisplayObject } from '@antv/g';\nimport { Scale, G2Theme, G2ViewDescriptor } from '../runtime';\nimport { hide, show } from '../utils/style';\nimport { Composition as Spec } from '../spec';\nimport { Node } from './node';\nimport { defineProps } from './define';\nimport { compositionProps } from './props';\nimport { PropsOf } from './types';\n\nexport interface CompositionNode<T = any>\n  extends PropsOf<\n    typeof compositionProps,\n    any, // todo Remove this when update types of Spec.\n    CompositionNode & T\n  > {}\n\n@defineProps(compositionProps)\nexport class CompositionNode extends Node<Spec & { [key: string]: any }> {\n  protected _key: string;\n\n  /**\n   * Change current node data and its children data.\n   */\n  changeData(data: any) {\n    const chart = this.getRoot();\n    if (!chart) return;\n    this.attr('data', data);\n    if (this.children?.length) {\n      this.children.forEach((child) => {\n        child.attr('data', data);\n      });\n    }\n    return chart?.render();\n  }\n\n  /**\n   * Get view instance by key.\n   */\n  getView(): G2ViewDescriptor {\n    const chart = this.getRoot();\n    const { views } = chart.getContext();\n    if (!views?.length) return undefined;\n    return views.find((view) => view.key === this._key);\n  }\n\n  getScale(): Record<string, Scale> {\n    return this.getView()?.scale;\n  }\n\n  getScaleByChannel(channel: string): Scale {\n    const scale = this.getScale();\n    if (scale) return scale[channel];\n    return;\n  }\n\n  getCoordinate(): Coordinate {\n    return this.getView()?.coordinate;\n  }\n\n  getTheme(): G2Theme {\n    return this.getView()?.theme;\n  }\n\n  getGroup(): DisplayObject {\n    const key = this._key;\n    if (!key) return undefined;\n    const chart = this.getRoot();\n    const chartGroup = chart.getContext().canvas.getRoot();\n    return chartGroup.getElementById(key);\n  }\n\n  /**\n   * Show the view.\n   */\n  show() {\n    const group = this.getGroup();\n    if (!group) return;\n    !group.isVisible() && show(group);\n  }\n\n  /**\n   * Hide the view.\n   */\n  hide() {\n    const group = this.getGroup();\n    if (!group) return;\n    group.isVisible() && hide(group);\n  }\n}\n"],"mappings":";;;;;;;AAGA,SAASA,IAAI,EAAEC,IAAI,QAAQ,gBAAgB;AAE3C,SAASC,IAAI,QAAQ,QAAQ;AAC7B,SAASC,WAAW,QAAQ,UAAU;AACtC,SAASC,gBAAgB,QAAQ,SAAS;AAWnC,IAAMC,eAAe,GAArB,MAAMA,eAAgB,SAAQH,IAAmC;EAGtE;;;EAGAI,UAAUA,CAACC,IAAS;;IAClB,MAAMC,KAAK,GAAG,IAAI,CAACC,OAAO,EAAE;IAC5B,IAAI,CAACD,KAAK,EAAE;IACZ,IAAI,CAACE,IAAI,CAAC,MAAM,EAAEH,IAAI,CAAC;IACvB,IAAI,CAAAI,EAAA,OAAI,CAACC,QAAQ,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,MAAM,EAAE;MACzB,IAAI,CAACD,QAAQ,CAACE,OAAO,CAAEC,KAAK,IAAI;QAC9BA,KAAK,CAACL,IAAI,CAAC,MAAM,EAAEH,IAAI,CAAC;MAC1B,CAAC,CAAC;;IAEJ,OAAOC,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEQ,MAAM,EAAE;EACxB;EAEA;;;EAGAC,OAAOA,CAAA;IACL,MAAMT,KAAK,GAAG,IAAI,CAACC,OAAO,EAAE;IAC5B,MAAM;MAAES;IAAK,CAAE,GAAGV,KAAK,CAACW,UAAU,EAAE;IACpC,IAAI,EAACD,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEL,MAAM,GAAE,OAAOO,SAAS;IACpC,OAAOF,KAAK,CAACG,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,GAAG,KAAK,IAAI,CAACC,IAAI,CAAC;EACrD;EAEAC,QAAQA,CAAA;;IACN,OAAO,CAAAd,EAAA,OAAI,CAACM,OAAO,EAAE,cAAAN,EAAA,uBAAAA,EAAA,CAAEe,KAAK;EAC9B;EAEAC,iBAAiBA,CAACC,OAAe;IAC/B,MAAMF,KAAK,GAAG,IAAI,CAACD,QAAQ,EAAE;IAC7B,IAAIC,KAAK,EAAE,OAAOA,KAAK,CAACE,OAAO,CAAC;IAChC;EACF;EAEAC,aAAaA,CAAA;;IACX,OAAO,CAAAlB,EAAA,OAAI,CAACM,OAAO,EAAE,cAAAN,EAAA,uBAAAA,EAAA,CAAEmB,UAAU;EACnC;EAEAC,QAAQA,CAAA;;IACN,OAAO,CAAApB,EAAA,OAAI,CAACM,OAAO,EAAE,cAAAN,EAAA,uBAAAA,EAAA,CAAEqB,KAAK;EAC9B;EAEAC,QAAQA,CAAA;IACN,MAAMV,GAAG,GAAG,IAAI,CAACC,IAAI;IACrB,IAAI,CAACD,GAAG,EAAE,OAAOH,SAAS;IAC1B,MAAMZ,KAAK,GAAG,IAAI,CAACC,OAAO,EAAE;IAC5B,MAAMyB,UAAU,GAAG1B,KAAK,CAACW,UAAU,EAAE,CAACgB,MAAM,CAAC1B,OAAO,EAAE;IACtD,OAAOyB,UAAU,CAACE,cAAc,CAACb,GAAG,CAAC;EACvC;EAEA;;;EAGAtB,IAAIA,CAAA;IACF,MAAMoC,KAAK,GAAG,IAAI,CAACJ,QAAQ,EAAE;IAC7B,IAAI,CAACI,KAAK,EAAE;IACZ,CAACA,KAAK,CAACC,SAAS,EAAE,IAAIrC,IAAI,CAACoC,KAAK,CAAC;EACnC;EAEA;;;EAGArC,IAAIA,CAAA;IACF,MAAMqC,KAAK,GAAG,IAAI,CAACJ,QAAQ,EAAE;IAC7B,IAAI,CAACI,KAAK,EAAE;IACZA,KAAK,CAACC,SAAS,EAAE,IAAItC,IAAI,CAACqC,KAAK,CAAC;EAClC;CACD;AAvEYhC,eAAe,GAAAkC,UAAA,EAD3BpC,WAAW,CAACC,gBAAgB,CAAC,C,EACjBC,eAAe,CAuE3B;SAvEYA,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}