{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { deepMix } from '@antv/util';\nfunction initializeData(data, encode) {\n  const {\n    text = 'text',\n    value = 'value'\n  } = encode;\n  return data.map(d => Object.assign(Object.assign({}, d), {\n    text: d[text],\n    value: d[value]\n  }));\n}\nconst GET_DEFAULT_OPTIONS = () => ({\n  axis: false,\n  type: 'text',\n  encode: {\n    x: 'x',\n    y: 'y',\n    text: 'text',\n    rotate: 'rotate',\n    fontSize: 'size',\n    shape: 'tag'\n  },\n  scale: {\n    x: {\n      range: [0, 1]\n    },\n    y: {\n      range: [0, 1]\n    }\n  },\n  style: {\n    fontFamily: d => d.fontFamily\n  },\n  tooltip: {\n    items: [datum => ({\n      name: datum.text,\n      value: datum.value\n    })]\n  }\n});\nexport const WordCloud = (options, context) => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    width,\n    height\n  } = context;\n  const {\n      data,\n      encode = {},\n      scale,\n      style = {},\n      layout = {}\n    } = options,\n    resOptions = __rest(options, [\"data\", \"encode\", \"scale\", \"style\", \"layout\"]);\n  const initializedData = initializeData(data, encode);\n  return deepMix({}, GET_DEFAULT_OPTIONS(), Object.assign(Object.assign({\n    data: {\n      value: initializedData,\n      transform: [Object.assign({\n        type: 'wordCloud',\n        size: [width, height]\n      }, layout)]\n    },\n    encode,\n    scale,\n    style\n  }, resOptions), {\n    axis: false\n  }));\n});\nWordCloud.props = {};","map":{"version":3,"names":["deepMix","initializeData","data","encode","text","value","map","d","Object","assign","GET_DEFAULT_OPTIONS","axis","type","x","y","rotate","fontSize","shape","scale","range","style","fontFamily","tooltip","items","datum","name","WordCloud","options","context","__awaiter","width","height","layout","resOptions","__rest","initializedData","transform","size","props"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g2/src/mark/wordCloud.ts"],"sourcesContent":["import { deepMix } from '@antv/util';\nimport { itemsOf } from 'interaction/legendFilter';\nimport { CompositeMarkComponent as CC } from '../runtime';\nimport { WordCloudMark } from '../spec';\n\nexport type WordCloudOptions = Omit<WordCloudMark, 'type'>;\n\nfunction initializeData(data, encode) {\n  const { text = 'text', value = 'value' } = encode;\n  return data.map((d) => ({\n    ...d,\n    text: d[text],\n    value: d[value],\n  }));\n}\n\nconst GET_DEFAULT_OPTIONS = () => ({\n  axis: false,\n  type: 'text',\n  encode: {\n    x: 'x',\n    y: 'y',\n    text: 'text',\n    rotate: 'rotate',\n    fontSize: 'size',\n    shape: 'tag',\n  },\n  scale: {\n    x: { range: [0, 1] },\n    y: { range: [0, 1] },\n  },\n  style: {\n    fontFamily: (d) => d.fontFamily,\n  },\n  tooltip: {\n    items: [\n      (datum) => ({\n        name: datum.text,\n        value: datum.value,\n      }),\n    ],\n  },\n});\n\nexport const WordCloud: CC<WordCloudOptions> = async (options, context) => {\n  const { width, height } = context;\n\n  const {\n    data,\n    encode = {},\n    scale,\n    style = {},\n    layout = {},\n    ...resOptions\n  } = options;\n\n  const initializedData = initializeData(data, encode);\n\n  return deepMix({}, GET_DEFAULT_OPTIONS(), {\n    data: {\n      value: initializedData,\n      transform: [\n        {\n          type: 'wordCloud',\n          size: [width, height],\n          ...layout,\n        },\n      ],\n    },\n    encode,\n    scale,\n    style,\n    ...resOptions,\n    axis: false,\n  });\n};\n\nWordCloud.props = {};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,OAAO,QAAQ,YAAY;AAOpC,SAASC,cAAcA,CAACC,IAAI,EAAEC,MAAM;EAClC,MAAM;IAAEC,IAAI,GAAG,MAAM;IAAEC,KAAK,GAAG;EAAO,CAAE,GAAGF,MAAM;EACjD,OAAOD,IAAI,CAACI,GAAG,CAAEC,CAAC,IAAKC,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAClBF,CAAC;IACJH,IAAI,EAAEG,CAAC,CAACH,IAAI,CAAC;IACbC,KAAK,EAAEE,CAAC,CAACF,KAAK;EAAC,EACf,CAAC;AACL;AAEA,MAAMK,mBAAmB,GAAGA,CAAA,MAAO;EACjCC,IAAI,EAAE,KAAK;EACXC,IAAI,EAAE,MAAM;EACZT,MAAM,EAAE;IACNU,CAAC,EAAE,GAAG;IACNC,CAAC,EAAE,GAAG;IACNV,IAAI,EAAE,MAAM;IACZW,MAAM,EAAE,QAAQ;IAChBC,QAAQ,EAAE,MAAM;IAChBC,KAAK,EAAE;GACR;EACDC,KAAK,EAAE;IACLL,CAAC,EAAE;MAAEM,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;IAAC,CAAE;IACpBL,CAAC,EAAE;MAAEK,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;IAAC;GACnB;EACDC,KAAK,EAAE;IACLC,UAAU,EAAGd,CAAC,IAAKA,CAAC,CAACc;GACtB;EACDC,OAAO,EAAE;IACPC,KAAK,EAAE,CACJC,KAAK,KAAM;MACVC,IAAI,EAAED,KAAK,CAACpB,IAAI;MAChBC,KAAK,EAAEmB,KAAK,CAACnB;KACd,CAAC;;CAGP,CAAC;AAEF,OAAO,MAAMqB,SAAS,GAAyBA,CAAOC,OAAO,EAAEC,OAAO,KAAIC,SAAA;EACxE,MAAM;IAAEC,KAAK;IAAEC;EAAM,CAAE,GAAGH,OAAO;EAEjC,MAAM;MACJ1B,IAAI;MACJC,MAAM,GAAG,EAAE;MACXe,KAAK;MACLE,KAAK,GAAG,EAAE;MACVY,MAAM,GAAG;IAAE,IAETL,OAAO;IADNM,UAAU,GAAAC,MAAA,CACXP,OAAO,EAPL,8CAOL,CAAU;EAEX,MAAMQ,eAAe,GAAGlC,cAAc,CAACC,IAAI,EAAEC,MAAM,CAAC;EAEpD,OAAOH,OAAO,CAAC,EAAE,EAAEU,mBAAmB,EAAE,EAAAF,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA;IACtCP,IAAI,EAAE;MACJG,KAAK,EAAE8B,eAAe;MACtBC,SAAS,EAAE,C;QAEPxB,IAAI,EAAE,WAAW;QACjByB,IAAI,EAAE,CAACP,KAAK,EAAEC,MAAM;MAAC,GAClBC,MAAM;KAGd;IACD7B,MAAM;IACNe,KAAK;IACLE;EAAK,GACFa,UAAU;IACbtB,IAAI,EAAE;EAAK,GACX;AACJ,CAAC;AAEDe,SAAS,CAACY,KAAK,GAAG,EAAE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}