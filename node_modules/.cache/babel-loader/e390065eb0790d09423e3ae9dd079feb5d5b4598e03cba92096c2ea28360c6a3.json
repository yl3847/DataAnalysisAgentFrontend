{"ast":null,"code":"import { get } from 'lodash';\nimport { formatLabel } from '../../core/utils/label';\nimport { measureTextSize } from '../../core/utils/measure-text';\nexport const DEFAULT_OPTIONS = {\n  node: {\n    style: {\n      size: 10,\n      labelPlacement: 'center'\n    }\n  },\n  edge: {\n    type: 'polyline'\n  },\n  layout: {\n    type: 'fishbone',\n    hGap: 40,\n    vGap: 60\n  },\n  animation: false\n};\nconst FONT_FAMILY = 'system-ui, sans-serif';\nconst getNodeSize = (id, depth) => {\n  if (depth === 0) return measureTextSize(id, [80, 48], {\n    fontSize: 24,\n    fontWeight: 600,\n    fontFamily: FONT_FAMILY\n  });\n  if (depth === 1) return measureTextSize(id, [80, 30], {\n    fontSize: 18,\n    fontFamily: FONT_FAMILY\n  });\n  return [2, 30];\n};\nconst getNodeFill = node => {\n  const depth = node.depth;\n  if (depth === 0) return '#EFF0F0';\n  if (depth === 1) return node.style?.color || '#EFF0F0';\n  return 'transparent';\n};\nexport function getFishboneOptions({\n  type,\n  labelField\n}) {\n  const options = {\n    node: {\n      type: 'rect',\n      style: {\n        fill: d => getNodeFill(d),\n        labelFill: d => d.depth === 1 ? '#fff' : '#262626',\n        labelFillOpacity: 1,\n        labelFontSize: d => d.depth === 0 ? 24 : d.depth === 1 ? 18 : 16,\n        labelFontWeight: d => d.depth === 0 ? 600 : 400,\n        labelLineHeight: d => d.depth === 0 ? 26 : d.depth === 1 ? 20 : 18,\n        labelText: d => formatLabel(d, labelField),\n        radius: 8,\n        size: d => getNodeSize(d.id, d.depth)\n      }\n    },\n    edge: {\n      type: 'polyline',\n      style: {\n        lineWidth: 3,\n        stroke: function (data) {\n          const target = this.getNodeData(data.target);\n          return get(target, 'style.color', '#99ADD1');\n        }\n      }\n    },\n    transforms: prev => [...prev, {\n      type: 'assign-color-by-branch',\n      key: 'assign-color-by-branch'\n    }, {\n      type: 'arrange-edge-z-index',\n      key: 'arrange-edge-z-index'\n    }]\n  };\n  options.layout ||= {};\n  if (type === 'decision') {\n    // @ts-ignore\n    options.node.style.labelPlacement = d => d.depth === 0 || d.depth === 1 ? 'center' : 'right';\n    Object.assign(options.layout, {\n      direction: 'LR'\n    });\n  } else if (type === 'cause') {\n    // @ts-ignore\n    options.node.style.labelPlacement = d => d.depth === 0 || d.depth === 1 ? 'center' : 'left';\n    Object.assign(options.layout, {\n      direction: 'RL'\n    });\n  }\n  return options;\n}","map":{"version":3,"names":["get","formatLabel","measureTextSize","DEFAULT_OPTIONS","node","style","size","labelPlacement","edge","type","layout","hGap","vGap","animation","FONT_FAMILY","getNodeSize","id","depth","fontSize","fontWeight","fontFamily","getNodeFill","color","getFishboneOptions","labelField","options","fill","d","labelFill","labelFillOpacity","labelFontSize","labelFontWeight","labelLineHeight","labelText","radius","lineWidth","stroke","data","target","getNodeData","transforms","prev","key","Object","assign","direction"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@ant-design/graphs/es/components/fishbone/options.js"],"sourcesContent":["import { get } from 'lodash';\nimport { formatLabel } from '../../core/utils/label';\nimport { measureTextSize } from '../../core/utils/measure-text';\nexport const DEFAULT_OPTIONS = {\n    node: {\n        style: {\n            size: 10,\n            labelPlacement: 'center',\n        },\n    },\n    edge: {\n        type: 'polyline',\n    },\n    layout: {\n        type: 'fishbone',\n        hGap: 40,\n        vGap: 60,\n    },\n    animation: false,\n};\nconst FONT_FAMILY = 'system-ui, sans-serif';\nconst getNodeSize = (id, depth) => {\n    if (depth === 0)\n        return measureTextSize(id, [80, 48], { fontSize: 24, fontWeight: 600, fontFamily: FONT_FAMILY });\n    if (depth === 1)\n        return measureTextSize(id, [80, 30], { fontSize: 18, fontFamily: FONT_FAMILY });\n    return [2, 30];\n};\nconst getNodeFill = (node) => {\n    const depth = node.depth;\n    if (depth === 0)\n        return '#EFF0F0';\n    if (depth === 1)\n        return node.style?.color || '#EFF0F0';\n    return 'transparent';\n};\nexport function getFishboneOptions({ type, labelField }) {\n    const options = {\n        node: {\n            type: 'rect',\n            style: {\n                fill: (d) => getNodeFill(d),\n                labelFill: (d) => (d.depth === 1 ? '#fff' : '#262626'),\n                labelFillOpacity: 1,\n                labelFontSize: (d) => (d.depth === 0 ? 24 : d.depth === 1 ? 18 : 16),\n                labelFontWeight: (d) => (d.depth === 0 ? 600 : 400),\n                labelLineHeight: (d) => (d.depth === 0 ? 26 : d.depth === 1 ? 20 : 18),\n                labelText: (d) => formatLabel(d, labelField),\n                radius: 8,\n                size: (d) => getNodeSize(d.id, d.depth),\n            },\n        },\n        edge: {\n            type: 'polyline',\n            style: {\n                lineWidth: 3,\n                stroke: function (data) {\n                    const target = this.getNodeData(data.target);\n                    return get(target, 'style.color', '#99ADD1');\n                },\n            },\n        },\n        transforms: (prev) => [\n            ...prev,\n            {\n                type: 'assign-color-by-branch',\n                key: 'assign-color-by-branch',\n            },\n            {\n                type: 'arrange-edge-z-index',\n                key: 'arrange-edge-z-index',\n            },\n        ],\n    };\n    options.layout ||= {};\n    if (type === 'decision') {\n        // @ts-ignore\n        options.node.style.labelPlacement = (d) => (d.depth === 0 || d.depth === 1 ? 'center' : 'right');\n        Object.assign(options.layout, { direction: 'LR' });\n    }\n    else if (type === 'cause') {\n        // @ts-ignore\n        options.node.style.labelPlacement = (d) => (d.depth === 0 || d.depth === 1 ? 'center' : 'left');\n        Object.assign(options.layout, { direction: 'RL' });\n    }\n    return options;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}