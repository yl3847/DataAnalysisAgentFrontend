{"ast":null,"code":"import { Threshold } from './threshold';\nimport { wilkinsonExtended } from '../tick-methods/wilkinson-extended';\nimport { createQuartile } from '../utils/create-quartile';\n/**\n * 类似 Threshold 比例尺，区别在于分位数比例尺 (Quantile) 将一个离散的输入域映射到一个离散的输出域\n * 输入域被指定为一组离散的样本值，输出域中的值的数量决定了分位数的数量。\n */\nexport class Quantile extends Threshold {\n  getDefaultOptions() {\n    return {\n      domain: [],\n      range: [],\n      tickCount: 5,\n      unknown: undefined,\n      tickMethod: wilkinsonExtended\n    };\n  }\n  constructor(options) {\n    super(options);\n  }\n  rescale() {\n    const {\n      domain,\n      range\n    } = this.options;\n    this.n = range.length - 1;\n    this.thresholds = createQuartile(domain, this.n + 1, false);\n  }\n  /**\n   * 如果是在第一段后或者最后一段就把两端的值添加上\n   */\n  invert(y) {\n    const [a, b] = super.invert(y);\n    const {\n      domain\n    } = this.options;\n    const dMin = domain[0];\n    const dMax = domain[domain.length - 1];\n    return a === undefined && b === undefined ? [a, b] : [a || dMin, b || dMax];\n  }\n  getThresholds() {\n    return this.thresholds;\n  }\n  clone() {\n    return new Quantile(this.options);\n  }\n  getTicks() {\n    const {\n      tickCount,\n      domain,\n      tickMethod\n    } = this.options;\n    const lastIndex = domain.length - 1;\n    const min = domain[0];\n    const max = domain[lastIndex];\n    return tickMethod(min, max, tickCount);\n  }\n}","map":{"version":3,"names":["Threshold","wilkinsonExtended","createQuartile","Quantile","getDefaultOptions","domain","range","tickCount","unknown","undefined","tickMethod","constructor","options","rescale","n","length","thresholds","invert","y","a","b","dMin","dMax","getThresholds","clone","getTicks","lastIndex","min","max"],"sources":["scales/quantile.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,SAAS,QAAQ,aAAa;AAEvC,SAASC,iBAAiB,QAAQ,oCAAoC;AACtE,SAASC,cAAc,QAAQ,0BAA0B;AAEzD;;;;AAIA,OAAM,MAAOC,QAAS,SAAQH,SAA0B;EAC5CI,iBAAiBA,CAAA;IACzB,OAAO;MACLC,MAAM,EAAE,EAAE;MACVC,KAAK,EAAE,EAAE;MACTC,SAAS,EAAE,CAAC;MACZC,OAAO,EAAEC,SAAS;MAClBC,UAAU,EAAET;KACb;EACH;EAEAU,YAAYC,OAAyB;IACnC,KAAK,CAACA,OAAO,CAAC;EAChB;EAEUC,OAAOA,CAAA;IACf,MAAM;MAAER,MAAM;MAAEC;IAAK,CAAE,GAAG,IAAI,CAACM,OAAO;IAEtC,IAAI,CAACE,CAAC,GAAGR,KAAK,CAACS,MAAM,GAAG,CAAC;IACzB,IAAI,CAACC,UAAU,GAAGd,cAAc,CAACG,MAAM,EAAE,IAAI,CAACS,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC;EAC7D;EAEA;;;EAGOG,MAAMA,CAACC,CAAyB;IACrC,MAAM,CAACC,CAAC,EAAEC,CAAC,CAAC,GAAG,KAAK,CAACH,MAAM,CAACC,CAAC,CAAC;IAC9B,MAAM;MAAEb;IAAM,CAAE,GAAG,IAAI,CAACO,OAAO;IAC/B,MAAMS,IAAI,GAAGhB,MAAM,CAAC,CAAC,CAAC;IACtB,MAAMiB,IAAI,GAAGjB,MAAM,CAACA,MAAM,CAACU,MAAM,GAAG,CAAC,CAAC;IACtC,OAAOI,CAAC,KAAKV,SAAS,IAAIW,CAAC,KAAKX,SAAS,GAAG,CAACU,CAAC,EAAEC,CAAC,CAAC,GAAG,CAACD,CAAC,IAAIE,IAAI,EAAED,CAAC,IAAIE,IAAI,CAAC;EAC7E;EAEOC,aAAaA,CAAA;IAClB,OAAO,IAAI,CAACP,UAAU;EACxB;EAEOQ,KAAKA,CAAA;IACV,OAAO,IAAIrB,QAAQ,CAAC,IAAI,CAACS,OAAO,CAAC;EACnC;EAEOa,QAAQA,CAAA;IACb,MAAM;MAAElB,SAAS;MAAEF,MAAM;MAAEK;IAAU,CAAE,GAAG,IAAI,CAACE,OAAO;IAEtD,MAAMc,SAAS,GAAGrB,MAAM,CAACU,MAAM,GAAG,CAAC;IACnC,MAAMY,GAAG,GAAGtB,MAAM,CAAC,CAAC,CAAC;IACrB,MAAMuB,GAAG,GAAGvB,MAAM,CAACqB,SAAS,CAAC;IAC7B,OAAOhB,UAAU,CAACiB,GAAG,EAAEC,GAAG,EAAErB,SAAS,CAAC;EACxC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}