{"ast":null,"code":"/*!\n * @antv/g-plugin-canvas-path-generator\n * @description A G plugin of path generator with Canvas2D API\n * @version 2.1.22\n * @date 7/30/2025, 1:35:25 PM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { isDisplayObject, Shape, AbstractRendererPlugin } from '@antv/g-lite';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { clamp } from '@antv/util';\nfunction generatePath$6(context, parsedStyle) {\n  var _parsedStyle$cx = parsedStyle.cx,\n    cx = _parsedStyle$cx === void 0 ? 0 : _parsedStyle$cx,\n    _parsedStyle$cy = parsedStyle.cy,\n    cy = _parsedStyle$cy === void 0 ? 0 : _parsedStyle$cy,\n    r = parsedStyle.r;\n  context.arc(cx, cy, r, 0, Math.PI * 2, false);\n}\nfunction generatePath$5(context, parsedStyle) {\n  var _parsedStyle$cx = parsedStyle.cx,\n    cx = _parsedStyle$cx === void 0 ? 0 : _parsedStyle$cx,\n    _parsedStyle$cy = parsedStyle.cy,\n    cy = _parsedStyle$cy === void 0 ? 0 : _parsedStyle$cy,\n    rx = parsedStyle.rx,\n    ry = parsedStyle.ry;\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n  if (context.ellipse) {\n    context.ellipse(cx, cy, rx, ry, 0, 0, Math.PI * 2, false);\n  } else {\n    // 如果不支持，则使用圆来绘制，进行变形\n    var r = rx > ry ? rx : ry;\n    var scaleX = rx > ry ? 1 : rx / ry;\n    var scaleY = rx > ry ? ry / rx : 1;\n    context.save();\n    context.scale(scaleX, scaleY);\n    context.arc(cx, cy, r, 0, Math.PI * 2);\n  }\n}\nfunction generatePath$4(context, parsedStyle) {\n  var x1 = parsedStyle.x1,\n    y1 = parsedStyle.y1,\n    x2 = parsedStyle.x2,\n    y2 = parsedStyle.y2,\n    markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = x2 - x1;\n    y = y2 - y1;\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = x1 - x2;\n    y = y1 - y2;\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\nfunction generatePath$3(context, parsedStyle) {\n  var markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var _parsedStyle$d = parsedStyle.d,\n    absolutePath = _parsedStyle$d.absolutePath,\n    segments = _parsedStyle$d.segments;\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    var _getStartTangent = markerStart.parentNode.getStartTangent(),\n      _getStartTangent2 = _slicedToArray(_getStartTangent, 2),\n      p1 = _getStartTangent2[0],\n      p2 = _getStartTangent2[1];\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    var _getEndTangent = markerEnd.parentNode.getEndTangent(),\n      _getEndTangent2 = _slicedToArray(_getEndTangent, 2),\n      _p = _getEndTangent2[0],\n      _p2 = _getEndTangent2[1];\n    x = _p[0] - _p2[0];\n    y = _p[1] - _p2[1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  for (var i = 0; i < absolutePath.length; i++) {\n    var params = absolutePath[i];\n    var command = params[0];\n    var nextSegment = absolutePath[i + 1];\n    var useStartOffset = i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n    var useEndOffset = (i === absolutePath.length - 1 || nextSegment && (nextSegment[0] === 'M' || nextSegment[0] === 'Z')) && endOffsetX !== 0 && endOffsetY !== 0;\n    var _ref = useStartOffset ? [startOffsetX, startOffsetY] : [0, 0],\n      _ref2 = _slicedToArray(_ref, 2),\n      startOffsetXTemp = _ref2[0],\n      startOffsetYTemp = _ref2[1];\n    var _ref3 = useEndOffset ? [endOffsetX, endOffsetY] : [0, 0],\n      _ref4 = _slicedToArray(_ref3, 2),\n      endOffsetXTemp = _ref4[0],\n      endOffsetYTemp = _ref4[1];\n    switch (command) {\n      case 'M':\n        // Use start marker offset\n        context.moveTo(params[1] + startOffsetXTemp, params[2] + startOffsetYTemp);\n        break;\n      case 'L':\n        context.lineTo(params[1] + endOffsetXTemp, params[2] + endOffsetYTemp);\n        break;\n      case 'Q':\n        context.quadraticCurveTo(params[1], params[2], params[3] + endOffsetXTemp, params[4] + endOffsetYTemp);\n        break;\n      case 'C':\n        context.bezierCurveTo(params[1], params[2], params[3], params[4], params[5] + endOffsetXTemp, params[6] + endOffsetYTemp);\n        break;\n      case 'A':\n        {\n          // FIXME startOffset / endOffset\n          var arcParams = segments[i].arcParams;\n          var cx = arcParams.cx,\n            cy = arcParams.cy,\n            rx = arcParams.rx,\n            ry = arcParams.ry,\n            startAngle = arcParams.startAngle,\n            endAngle = arcParams.endAngle,\n            xRotation = arcParams.xRotation,\n            sweepFlag = arcParams.sweepFlag;\n          // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n          if (context.ellipse) {\n            context.ellipse(cx, cy, rx, ry, xRotation, startAngle, endAngle, !!(1 - sweepFlag));\n          } else {\n            // @see https://stackoverflow.com/a/47494351\n            var r = rx > ry ? rx : ry;\n            var scaleX = rx > ry ? 1 : rx / ry;\n            var scaleY = rx > ry ? ry / rx : 1;\n            context.translate(cx, cy);\n            context.rotate(xRotation);\n            context.scale(scaleX, scaleY);\n            context.arc(0, 0, r, startAngle, endAngle, !!(1 - sweepFlag));\n            context.scale(1 / scaleX, 1 / scaleY);\n            context.rotate(-xRotation);\n            context.translate(-cx, -cy);\n          }\n          if (useEndOffset) {\n            context.lineTo(params[6] + endOffsetX, params[7] + endOffsetY);\n          }\n          break;\n        }\n      case 'Z':\n        context.closePath();\n        break;\n    }\n  }\n}\nfunction generatePath$2(context, parsedStyle) {\n  var markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var points = parsedStyle.points.points;\n  var length = points.length;\n  var x1 = points[0][0];\n  var y1 = points[0][1];\n  var x2 = points[length - 1][0];\n  var y2 = points[length - 1][1];\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 1][0] - points[0][0];\n    y = points[length - 1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  context.moveTo(x1 + (startOffsetX || endOffsetX), y1 + (startOffsetY || endOffsetY));\n  for (var i = 1; i < length - 1; i++) {\n    var point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2, y2);\n}\nfunction generatePath$1(context, parsedStyle) {\n  var markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var points = parsedStyle.points.points;\n  var length = points.length;\n  var x1 = points[0][0];\n  var y1 = points[0][1];\n  var x2 = points[length - 1][0];\n  var y2 = points[length - 1][1];\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 2][0] - points[length - 1][0];\n    y = points[length - 2][1] - points[length - 1][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  for (var i = 1; i < length - 1; i++) {\n    var point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\nfunction generatePath(context, parsedStyle) {\n  var _parsedStyle$x = parsedStyle.x,\n    x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n    _parsedStyle$y = parsedStyle.y,\n    y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n    radius = parsedStyle.radius,\n    width = parsedStyle.width,\n    height = parsedStyle.height;\n  var w = width;\n  var h = height;\n  var hasRadius = radius && radius.some(function (r) {\n    return r !== 0;\n  });\n  if (!hasRadius) {\n    // Canvas support negative width/height of rect\n    context.rect(x, y, w, h);\n  } else {\n    var signX = width > 0 ? 1 : -1;\n    var signY = height > 0 ? 1 : -1;\n    var sweepFlag = signX + signY === 0;\n    var _radius$map = radius.map(function (r) {\n        return clamp(r, 0, Math.min(Math.abs(w) / 2, Math.abs(h) / 2));\n      }),\n      _radius$map2 = _slicedToArray(_radius$map, 4),\n      tlr = _radius$map2[0],\n      trr = _radius$map2[1],\n      brr = _radius$map2[2],\n      blr = _radius$map2[3];\n    context.moveTo(signX * tlr + x, y);\n    context.lineTo(w - signX * trr + x, y);\n    if (trr !== 0) {\n      context.arc(w - signX * trr + x, signY * trr + y, trr, -signY * Math.PI / 2, signX > 0 ? 0 : Math.PI, sweepFlag);\n    }\n    context.lineTo(w + x, h - signY * brr + y);\n    if (brr !== 0) {\n      context.arc(w - signX * brr + x, h - signY * brr + y, brr, signX > 0 ? 0 : Math.PI, signY > 0 ? Math.PI / 2 : 1.5 * Math.PI, sweepFlag);\n    }\n    context.lineTo(signX * blr + x, h + y);\n    if (blr !== 0) {\n      context.arc(signX * blr + x, h - signY * blr + y, blr, signY > 0 ? Math.PI / 2 : -Math.PI / 2, signX > 0 ? Math.PI : 0, sweepFlag);\n    }\n    context.lineTo(x, signY * tlr + y);\n    if (tlr !== 0) {\n      context.arc(signX * tlr + x, signY * tlr + y, tlr, signX > 0 ? Math.PI : 0, signY > 0 ? Math.PI * 1.5 : Math.PI / 2, sweepFlag);\n    }\n  }\n}\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'canvas-path-generator';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      var _pathGeneratorFactory;\n      var pathGeneratorFactory = (_pathGeneratorFactory = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_pathGeneratorFactory, Shape.CIRCLE, generatePath$6), Shape.ELLIPSE, generatePath$5), Shape.RECT, generatePath), Shape.LINE, generatePath$4), Shape.POLYLINE, generatePath$1), Shape.POLYGON, generatePath$2), Shape.PATH, generatePath$3), Shape.TEXT, undefined), Shape.GROUP, undefined), Shape.IMAGE, undefined), _defineProperty(_defineProperty(_defineProperty(_pathGeneratorFactory, Shape.HTML, undefined), Shape.MESH, undefined), Shape.FRAGMENT, undefined));\n\n      // @ts-ignore\n      this.context.pathGeneratorFactory = pathGeneratorFactory;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // @ts-ignore\n      delete this.context.pathGeneratorFactory;\n    }\n  }]);\n}(AbstractRendererPlugin);\nexport { Plugin };","map":{"version":3,"names":["generatePath$6","context","parsedStyle","_parsedStyle$cx","cx","_parsedStyle$cy","cy","r","arc","Math","PI","generatePath$5","rx","ry","ellipse","scaleX","scaleY","save","scale","generatePath$4","x1","y1","x2","y2","markerStart","markerEnd","markerStartOffset","markerEndOffset","startOffsetX","startOffsetY","endOffsetX","endOffsetY","rad","x","y","isDisplayObject","atan2","cos","sin","moveTo","lineTo","generatePath$3","_parsedStyle$d","d","absolutePath","segments","_getStartTangent","parentNode","getStartTangent","_getStartTangent2","_slicedToArray","p1","p2","_getEndTangent","getEndTangent","_getEndTangent2","_p","_p2","i","length","params","command","nextSegment","useStartOffset","useEndOffset","_ref","_ref2","startOffsetXTemp","startOffsetYTemp","_ref3","_ref4","endOffsetXTemp","endOffsetYTemp","quadraticCurveTo","bezierCurveTo","arcParams","startAngle","endAngle","xRotation","sweepFlag","translate","rotate","closePath","generatePath$2","points","point","generatePath$1","generatePath","_parsedStyle$x","_parsedStyle$y","radius","width","height","w","h","hasRadius","some","rect","signX","signY","_radius$map","map","clamp","min","abs","_radius$map2","tlr","trr","brr","blr","Plugin","_AbstractRendererPlug","_this","_classCallCheck","_len","arguments","args","Array","_key","_callSuper","concat","name","_inherits","_createClass","key","value","init","_pathGeneratorFactory","pathGeneratorFactory","_defineProperty","Shape","CIRCLE","ELLIPSE","RECT","LINE","POLYLINE","POLYGON","PATH","TEXT","undefined","GROUP","IMAGE","HTML","MESH","FRAGMENT","destroy","AbstractRendererPlugin"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-plugin-canvas-path-generator/src/paths/Circle.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-plugin-canvas-path-generator/src/paths/Ellipse.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-plugin-canvas-path-generator/src/paths/Line.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-plugin-canvas-path-generator/src/paths/Path.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-plugin-canvas-path-generator/src/paths/Polygon.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-plugin-canvas-path-generator/src/paths/Polyline.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-plugin-canvas-path-generator/src/paths/Rect.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-plugin-canvas-path-generator/src/index.ts"],"sourcesContent":["import type { ParsedCircleStyleProps } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedCircleStyleProps,\n) {\n  const { cx = 0, cy = 0, r } = parsedStyle;\n  context.arc(cx, cy, r, 0, Math.PI * 2, false);\n}\n","import type { ParsedEllipseStyleProps } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedEllipseStyleProps,\n) {\n  const { cx = 0, cy = 0, rx, ry } = parsedStyle;\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n  if (context.ellipse) {\n    context.ellipse(cx, cy, rx, ry, 0, 0, Math.PI * 2, false);\n  } else {\n    // 如果不支持，则使用圆来绘制，进行变形\n    const r = rx > ry ? rx : ry;\n    const scaleX = rx > ry ? 1 : rx / ry;\n    const scaleY = rx > ry ? ry / rx : 1;\n    context.save();\n    context.scale(scaleX, scaleY);\n    context.arc(cx, cy, r, 0, Math.PI * 2);\n  }\n}\n","import type { ParsedLineStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedLineStyleProps,\n) {\n  const {\n    x1,\n    y1,\n    x2,\n    y2,\n    markerStart,\n    markerEnd,\n    markerStartOffset,\n    markerEndOffset,\n  } = parsedStyle;\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = x2 - x1;\n    y = y2 - y1;\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = x1 - x2;\n    y = y1 - y2;\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\n","import type { ParsedPathStyleProps, Path } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedPathStyleProps,\n) {\n  const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n    parsedStyle;\n  const { absolutePath, segments } = parsedStyle.d;\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    const [p1, p2] = (markerStart.parentNode as Path).getStartTangent();\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    const [p1, p2] = (markerEnd.parentNode as Path).getEndTangent();\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  for (let i = 0; i < absolutePath.length; i++) {\n    const params = absolutePath[i];\n    const command = params[0];\n    const nextSegment = absolutePath[i + 1];\n    const useStartOffset =\n      i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n    const useEndOffset =\n      (i === absolutePath.length - 1 ||\n        (nextSegment && (nextSegment[0] === 'M' || nextSegment[0] === 'Z'))) &&\n      endOffsetX !== 0 &&\n      endOffsetY !== 0;\n    const [startOffsetXTemp, startOffsetYTemp] = useStartOffset\n      ? [startOffsetX, startOffsetY]\n      : [0, 0];\n    const [endOffsetXTemp, endOffsetYTemp] = useEndOffset\n      ? [endOffsetX, endOffsetY]\n      : [0, 0];\n\n    switch (command) {\n      case 'M':\n        // Use start marker offset\n        context.moveTo(\n          params[1] + startOffsetXTemp,\n          params[2] + startOffsetYTemp,\n        );\n        break;\n      case 'L':\n        context.lineTo(params[1] + endOffsetXTemp, params[2] + endOffsetYTemp);\n        break;\n      case 'Q':\n        context.quadraticCurveTo(\n          params[1],\n          params[2],\n          params[3] + endOffsetXTemp,\n          params[4] + endOffsetYTemp,\n        );\n        break;\n      case 'C':\n        context.bezierCurveTo(\n          params[1],\n          params[2],\n          params[3],\n          params[4],\n          params[5] + endOffsetXTemp,\n          params[6] + endOffsetYTemp,\n        );\n        break;\n      case 'A': {\n        // FIXME startOffset / endOffset\n        const { arcParams } = segments[i];\n        const { cx, cy, rx, ry, startAngle, endAngle, xRotation, sweepFlag } =\n          arcParams;\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n        if (context.ellipse) {\n          context.ellipse(\n            cx,\n            cy,\n            rx,\n            ry,\n            xRotation,\n            startAngle,\n            endAngle,\n            !!(1 - sweepFlag),\n          );\n        } else {\n          // @see https://stackoverflow.com/a/47494351\n          const r = rx > ry ? rx : ry;\n          const scaleX = rx > ry ? 1 : rx / ry;\n          const scaleY = rx > ry ? ry / rx : 1;\n          context.translate(cx, cy);\n          context.rotate(xRotation);\n          context.scale(scaleX, scaleY);\n          context.arc(0, 0, r, startAngle, endAngle, !!(1 - sweepFlag));\n          context.scale(1 / scaleX, 1 / scaleY);\n          context.rotate(-xRotation);\n          context.translate(-cx, -cy);\n        }\n\n        if (useEndOffset) {\n          context.lineTo(params[6] + endOffsetX, params[7] + endOffsetY);\n        }\n        break;\n      }\n      case 'Z':\n        context.closePath();\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import type { ParsedPolygonStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedPolygonStyleProps,\n) {\n  const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n    parsedStyle;\n  const { points } = parsedStyle.points;\n  const { length } = points;\n\n  const x1 = points[0][0];\n  const y1 = points[0][1];\n  const x2 = points[length - 1][0];\n  const y2 = points[length - 1][1];\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 1][0] - points[0][0];\n    y = points[length - 1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  context.moveTo(\n    x1 + (startOffsetX || endOffsetX),\n    y1 + (startOffsetY || endOffsetY),\n  );\n  for (let i = 1; i < length - 1; i++) {\n    const point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2, y2);\n}\n","import type { ParsedPolylineStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedPolylineStyleProps,\n) {\n  const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n    parsedStyle;\n  const { points } = parsedStyle.points;\n  const { length } = points;\n\n  const x1 = points[0][0];\n  const y1 = points[0][1];\n  const x2 = points[length - 1][0];\n  const y2 = points[length - 1][1];\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 2][0] - points[length - 1][0];\n    y = points[length - 2][1] - points[length - 1][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  for (let i = 1; i < length - 1; i++) {\n    const point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\n","import type { ParsedRectStyleProps } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedRectStyleProps,\n) {\n  const { x = 0, y = 0, radius, width, height } = parsedStyle;\n\n  const w = width;\n  const h = height;\n  const hasRadius = radius && radius.some((r) => r !== 0);\n\n  if (!hasRadius) {\n    // Canvas support negative width/height of rect\n    context.rect(x, y, w, h);\n  } else {\n    const signX = width > 0 ? 1 : -1;\n    const signY = height > 0 ? 1 : -1;\n    const sweepFlag = signX + signY === 0;\n    const [tlr, trr, brr, blr] = radius.map((r) =>\n      clamp(r, 0, Math.min(Math.abs(w) / 2, Math.abs(h) / 2)),\n    );\n\n    context.moveTo(signX * tlr + x, y);\n    context.lineTo(w - signX * trr + x, y);\n    if (trr !== 0) {\n      context.arc(\n        w - signX * trr + x,\n        signY * trr + y,\n        trr,\n        (-signY * Math.PI) / 2,\n        signX > 0 ? 0 : Math.PI,\n        sweepFlag,\n      );\n    }\n    context.lineTo(w + x, h - signY * brr + y);\n    if (brr !== 0) {\n      context.arc(\n        w - signX * brr + x,\n        h - signY * brr + y,\n        brr,\n        signX > 0 ? 0 : Math.PI,\n        signY > 0 ? Math.PI / 2 : 1.5 * Math.PI,\n        sweepFlag,\n      );\n    }\n    context.lineTo(signX * blr + x, h + y);\n    if (blr !== 0) {\n      context.arc(\n        signX * blr + x,\n        h - signY * blr + y,\n        blr,\n        signY > 0 ? Math.PI / 2 : -Math.PI / 2,\n        signX > 0 ? Math.PI : 0,\n        sweepFlag,\n      );\n    }\n    context.lineTo(x, signY * tlr + y);\n    if (tlr !== 0) {\n      context.arc(\n        signX * tlr + x,\n        signY * tlr + y,\n        tlr,\n        signX > 0 ? Math.PI : 0,\n        signY > 0 ? Math.PI * 1.5 : Math.PI / 2,\n        sweepFlag,\n      );\n    }\n  }\n}\n","import { AbstractRendererPlugin, Shape } from '@antv/g-lite';\nimport type { PathGenerator } from './interfaces';\nimport {\n  CirclePath,\n  EllipsePath,\n  LinePath,\n  PathPath,\n  PolygonPath,\n  PolylinePath,\n  RectPath,\n} from './paths';\n\nexport class Plugin extends AbstractRendererPlugin<{\n  pathGeneratorFactory: Record<Shape, PathGenerator<any>>;\n}> {\n  name = 'canvas-path-generator';\n  init(): void {\n    const pathGeneratorFactory: Record<Shape, PathGenerator<any>> = {\n      [Shape.CIRCLE]: CirclePath,\n      [Shape.ELLIPSE]: EllipsePath,\n      [Shape.RECT]: RectPath,\n      [Shape.LINE]: LinePath,\n      [Shape.POLYLINE]: PolylinePath,\n      [Shape.POLYGON]: PolygonPath,\n      [Shape.PATH]: PathPath,\n      [Shape.TEXT]: undefined,\n      [Shape.GROUP]: undefined,\n      [Shape.IMAGE]: undefined,\n      [Shape.HTML]: undefined,\n      [Shape.MESH]: undefined,\n      [Shape.FRAGMENT]: undefined,\n    };\n\n    // @ts-ignore\n    this.context.pathGeneratorFactory = pathGeneratorFactory;\n  }\n  destroy(): void {\n    // @ts-ignore\n    delete this.context.pathGeneratorFactory;\n  }\n}\n\nexport * from './interfaces';\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}