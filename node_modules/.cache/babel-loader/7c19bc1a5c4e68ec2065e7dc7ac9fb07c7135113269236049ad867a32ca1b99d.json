{"ast":null,"code":"import { __read, __spreadArray } from \"tslib\";\nimport { addPrefix, removePrefix, toUppercaseFirstLetter } from './string';\n/**\n * 对给定HTML对象应用给定样式\n * @param style {[key: string]: Object}\n * 样式表参考结构\n * {\n *  '.selector': {\n *   'attrName': 'attr',\n *   'padding': '0 0 0 0',\n *   'background-color': 'red'\n *  }\n * }\n */\nexport function applyStyleSheet(element, style) {\n  Object.entries(style).forEach(function (_a) {\n    var _b = __read(_a, 2),\n      selector = _b[0],\n      styleString = _b[1];\n    // apply styles to element and children\n    __spreadArray([element], __read(element.querySelectorAll(selector)), false).filter(function (el) {\n      return el.matches(selector);\n    }).forEach(function (target) {\n      if (!target) return;\n      var temp = target;\n      temp.style.cssText += Object.entries(styleString).reduce(function (total, currVal) {\n        return \"\".concat(total).concat(currVal.join(':'), \";\");\n      }, '');\n    });\n  });\n}\nvar startsWith = function (text, prefix) {\n  if (!(text === null || text === void 0 ? void 0 : text.startsWith(prefix))) return false;\n  var nextChart = text[prefix.length];\n  return nextChart >= 'A' && nextChart <= 'Z';\n};\nexport function subStyleProps(style, prefix, invert) {\n  if (invert === void 0) {\n    invert = false;\n  }\n  var result = {};\n  Object.entries(style).forEach(function (_a) {\n    var _b = __read(_a, 2),\n      key = _b[0],\n      value = _b[1];\n    // never transfer class property\n    if (key === 'className' || key === 'class') {\n      // do nothing\n    }\n    // @example showHandle -> showHandle, showHandleLabel -> showLabel\n    else if (startsWith(key, 'show') && startsWith(removePrefix(key, 'show'), prefix) !== invert) {\n      if (key === addPrefix(prefix, 'show')) result[key] = value;else result[key.replace(new RegExp(toUppercaseFirstLetter(prefix)), '')] = value;\n    }\n    // @example navFormatter -> formatter\n    else if (!startsWith(key, 'show') && startsWith(key, prefix) !== invert) {\n      var name_1 = removePrefix(key, prefix);\n      // don't transfer filter if it represents “过滤器”\n      if (name_1 === 'filter' && typeof value === 'function') {\n        // do nothing\n      } else result[name_1] = value;\n    }\n  });\n  return result;\n}\nexport function superStyleProps(style, prefix) {\n  return Object.entries(style).reduce(function (acc, _a) {\n    var _b = __read(_a, 2),\n      key = _b[0],\n      value = _b[1];\n    if (key.startsWith('show')) acc[\"show\".concat(prefix).concat(key.slice(4))] = value;else acc[\"\".concat(prefix).concat(toUppercaseFirstLetter(key))] = value;\n    return acc;\n  }, {});\n}\n/**\n * extract group style from mixin style\n * @param style\n * @param ignoreStyleDict style will be ignore from style\n * @returns shape style and rest style\n */\nexport function splitStyle(style, ignoreStyleDict) {\n  if (ignoreStyleDict === void 0) {\n    ignoreStyleDict = ['x', 'y', 'class', 'className'];\n  }\n  var groupStyleDict = ['transform', 'transformOrigin', 'anchor', 'visibility', 'pointerEvents', 'zIndex', 'cursor', 'clipPath', 'clipPathTargets', 'offsetPath', 'offsetPathTargets', 'offsetDistance', 'draggable', 'droppable'];\n  var output = {};\n  var groupStyle = {};\n  Object.entries(style).forEach(function (_a) {\n    var _b = __read(_a, 2),\n      key = _b[0],\n      val = _b[1];\n    if (ignoreStyleDict.includes(key)) {\n      // do nothing\n    } else if (groupStyleDict.indexOf(key) !== -1) groupStyle[key] = val;else output[key] = val;\n  });\n  return [output, groupStyle];\n}","map":{"version":3,"names":["addPrefix","removePrefix","toUppercaseFirstLetter","applyStyleSheet","element","style","Object","entries","forEach","_a","_b","__read","selector","styleString","__spreadArray","querySelectorAll","filter","el","matches","target","temp","cssText","reduce","total","currVal","concat","join","startsWith","text","prefix","nextChart","length","subStyleProps","invert","result","key","value","replace","RegExp","name_1","superStyleProps","acc","slice","splitStyle","ignoreStyleDict","groupStyleDict","output","groupStyle","val","includes","indexOf"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/component/src/util/style.ts"],"sourcesContent":["import type { PrefixStyleProps } from '../core';\nimport { addPrefix, removePrefix, toUppercaseFirstLetter } from './string';\n\n/**\n * 对给定HTML对象应用给定样式\n * @param style {[key: string]: Object}\n * 样式表参考结构\n * {\n *  '.selector': {\n *   'attrName': 'attr',\n *   'padding': '0 0 0 0',\n *   'background-color': 'red'\n *  }\n * }\n */\nexport function applyStyleSheet(element: HTMLElement, style: { [key: string]: Object }): void {\n  Object.entries(style).forEach(([selector, styleString]) => {\n    // apply styles to element and children\n    [element, ...element.querySelectorAll(selector)]\n      .filter((el) => el.matches(selector))\n      .forEach((target) => {\n        if (!target) return;\n        const temp = target as HTMLElement;\n        temp.style.cssText += Object.entries(styleString).reduce((total, currVal) => {\n          return `${total}${currVal.join(':')};`;\n        }, '');\n      });\n  });\n}\n\nconst startsWith = (text: string, prefix: string) => {\n  if (!text?.startsWith(prefix)) return false;\n  const nextChart = text[prefix.length];\n  return nextChart >= 'A' && nextChart <= 'Z';\n};\n\nexport function subStyleProps<T = Record<string, any>>(\n  style: Record<string, any>,\n  prefix: string,\n  invert: boolean = false\n) {\n  const result: Record<string, any> = {};\n  Object.entries(style).forEach(([key, value]) => {\n    // never transfer class property\n    if (key === 'className' || key === 'class') {\n      // do nothing\n    }\n    // @example showHandle -> showHandle, showHandleLabel -> showLabel\n    else if (startsWith(key, 'show') && startsWith(removePrefix(key, 'show'), prefix) !== invert) {\n      if (key === addPrefix(prefix, 'show')) result[key] = value;\n      else result[key.replace(new RegExp(toUppercaseFirstLetter(prefix)), '')] = value;\n    }\n    // @example navFormatter -> formatter\n    else if (!startsWith(key, 'show') && startsWith(key, prefix) !== invert) {\n      const name = removePrefix(key, prefix);\n      // don't transfer filter if it represents “过滤器”\n      if (name === 'filter' && typeof value === 'function') {\n        // do nothing\n      } else result[name] = value;\n    }\n  });\n  return result as T;\n}\n\nexport function superStyleProps<T extends Record<string, any>, P extends string>(\n  style: T,\n  prefix: P\n): PrefixStyleProps<T, P> {\n  return Object.entries(style).reduce((acc, [key, value]) => {\n    if (key.startsWith('show')) acc[`show${prefix}${key.slice(4)}`] = value;\n    else acc[`${prefix}${toUppercaseFirstLetter(key)}`] = value;\n    return acc;\n  }, {} as any);\n}\n\n/**\n * extract group style from mixin style\n * @param style\n * @param ignoreStyleDict style will be ignore from style\n * @returns shape style and rest style\n */\nexport function splitStyle(\n  style: { [keys: string]: any },\n  ignoreStyleDict: string[] = ['x', 'y', 'class', 'className']\n) {\n  const groupStyleDict: string[] = [\n    'transform',\n    'transformOrigin',\n    'anchor',\n    'visibility',\n    'pointerEvents',\n    'zIndex',\n    'cursor',\n    'clipPath',\n    'clipPathTargets',\n    'offsetPath',\n    'offsetPathTargets',\n    'offsetDistance',\n    'draggable',\n    'droppable',\n  ];\n  const output: typeof style = {};\n  const groupStyle: typeof style = {};\n  Object.entries(style).forEach(([key, val]) => {\n    if (ignoreStyleDict.includes(key)) {\n      // do nothing\n    } else if (groupStyleDict.indexOf(key) !== -1) groupStyle[key] = val;\n    else output[key] = val;\n  });\n  return [output, groupStyle];\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}