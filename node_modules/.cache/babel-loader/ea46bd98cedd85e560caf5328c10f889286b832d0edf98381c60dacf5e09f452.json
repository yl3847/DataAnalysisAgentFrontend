{"ast":null,"code":"import { identity } from '@antv/util';\nimport { Continuous } from './continuous';\nimport { createInterpolateValue } from '../utils';\nimport { d3Ticks } from '../tick-methods/d3-ticks';\nconst transformPow = exponent => {\n  return x => {\n    return x < 0 ? -((-x) ** exponent) : x ** exponent;\n  };\n};\nconst transformPowInvert = exponent => {\n  return x => {\n    return x < 0 ? -((-x) ** (1 / exponent)) : x ** (1 / exponent);\n  };\n};\nconst transformSqrt = x => {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n};\n/**\n * Pow 比例尺\n *\n * 类似于 linear scale, 不同之处在于在计算输出范围值之前对输入域值应用了指数变换,.\n * 即 y = x ^ k 其中 k（指数）可以是任何实数。\n */\nexport class Pow extends Continuous {\n  getDefaultOptions() {\n    return {\n      domain: [0, 1],\n      range: [0, 1],\n      nice: false,\n      clamp: false,\n      round: false,\n      exponent: 2,\n      interpolate: createInterpolateValue,\n      tickMethod: d3Ticks,\n      tickCount: 5\n    };\n  }\n  // 显示指定 options 的类型为 PowOptions O 的类型\n  constructor(options) {\n    super(options);\n  }\n  chooseTransforms() {\n    const {\n      exponent\n    } = this.options;\n    if (exponent === 1) return [identity, identity];\n    const transform = exponent === 0.5 ? transformSqrt : transformPow(exponent);\n    const untransform = transformPowInvert(exponent);\n    return [transform, untransform];\n  }\n  clone() {\n    return new Pow(this.options);\n  }\n}","map":{"version":3,"names":["identity","Continuous","createInterpolateValue","d3Ticks","transformPow","exponent","x","transformPowInvert","transformSqrt","Math","sqrt","Pow","getDefaultOptions","domain","range","nice","clamp","round","interpolate","tickMethod","tickCount","constructor","options","chooseTransforms","transform","untransform","clone"],"sources":["scales/pow.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,QAAQ,QAAQ,YAAY;AACrC,SAASC,UAAU,QAAQ,cAAc;AAGzC,SAASC,sBAAsB,QAAQ,UAAU;AACjD,SAASC,OAAO,QAAQ,0BAA0B;AAElD,MAAMC,YAAY,GAAIC,QAAgB,IAAI;EACxC,OAAQC,CAAS,IAAI;IACnB,OAAOA,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAACA,CAAC,KAAKD,QAAQ,CAAC,GAAGC,CAAC,IAAID,QAAQ;EACpD,CAAC;AACH,CAAC;AAED,MAAME,kBAAkB,GAAIF,QAAgB,IAAI;EAC9C,OAAQC,CAAS,IAAI;IACnB,OAAOA,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAACA,CAAC,MAAM,CAAC,GAAGD,QAAQ,CAAC,CAAC,GAAGC,CAAC,KAAK,CAAC,GAAGD,QAAQ,CAAC;EAChE,CAAC;AACH,CAAC;AAED,MAAMG,aAAa,GAAIF,CAAS,IAAI;EAClC,OAAOA,CAAC,GAAG,CAAC,GAAG,CAACG,IAAI,CAACC,IAAI,CAAC,CAACJ,CAAC,CAAC,GAAGG,IAAI,CAACC,IAAI,CAACJ,CAAC,CAAC;AAC9C,CAAC;AAED;;;;;;AAMA,OAAM,MAAOK,GAAuC,SAAQV,UAAa;EAC7DW,iBAAiBA,CAAA;IACzB,OAAO;MACLC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;MACdC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;MACbC,IAAI,EAAE,KAAK;MACXC,KAAK,EAAE,KAAK;MACZC,KAAK,EAAE,KAAK;MACZZ,QAAQ,EAAE,CAAC;MACXa,WAAW,EAAEhB,sBAAsB;MACnCiB,UAAU,EAAEhB,OAAO;MACnBiB,SAAS,EAAE;KACP;EACR;EAEA;EACAC,YAAYC,OAAoB;IAC9B,KAAK,CAACA,OAAY,CAAC;EACrB;EAEUC,gBAAgBA,CAAA;IACxB,MAAM;MAAElB;IAAQ,CAAE,GAAG,IAAI,CAACiB,OAAO;IACjC,IAAIjB,QAAQ,KAAK,CAAC,EAAE,OAAO,CAACL,QAAQ,EAAEA,QAAQ,CAAC;IAC/C,MAAMwB,SAAS,GAAGnB,QAAQ,KAAK,GAAG,GAAGG,aAAa,GAAGJ,YAAY,CAACC,QAAQ,CAAC;IAC3E,MAAMoB,WAAW,GAAGlB,kBAAkB,CAACF,QAAQ,CAAC;IAChD,OAAO,CAACmB,SAAS,EAAEC,WAAW,CAAC;EACjC;EAEOC,KAAKA,CAAA;IACV,OAAO,IAAIf,GAAG,CAAI,IAAI,CAACW,OAAO,CAAC;EACjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}