{"ast":null,"code":"import { Canvas as GCanvas } from '@antv/g';\nimport { Renderer } from '@antv/g-canvas';\nimport { parsePlacement } from '../../utils/placement';\nimport { createPluginContainer } from './dom';\n/**\n * <zh/> 创建插件画布\n *\n * <en/> Create a plugin canvas\n * @param options - <zh/> 配置项 | <en/> options\n * @returns <zh/> [容器, 画布] | <en/> [container, canvas]\n */\nexport function createPluginCanvas(options) {\n  const {\n    width,\n    height,\n    renderer\n  } = options;\n  const $container = getContainer(options);\n  const canvas = new GCanvas({\n    width,\n    height,\n    container: $container,\n    renderer: renderer || new Renderer()\n  });\n  return [$container, canvas];\n}\n/**\n * <zh/> 获取容器\n *\n * <en/> Get container\n * @param options - <zh/> 配置项 | <en/> options\n * @returns <zh/> 容器 | <en/> container\n */\nfunction getContainer(options) {\n  var _a;\n  const {\n    container,\n    className,\n    graphCanvas\n  } = options;\n  if (container) {\n    return typeof container === 'string' ? document.getElementById(container) : container;\n  }\n  const $container = createPluginContainer(className, false);\n  const {\n    width,\n    height,\n    containerStyle\n  } = options;\n  const [x, y] = computePosition(options);\n  Object.assign($container.style, Object.assign({\n    position: 'absolute',\n    left: x + 'px',\n    top: y + 'px',\n    width: width + 'px',\n    height: height + 'px'\n  }, containerStyle));\n  (_a = graphCanvas.getContainer()) === null || _a === void 0 ? void 0 : _a.appendChild($container);\n  return $container;\n}\n/**\n * <zh/> 计算容器位置\n *\n * <en/> Compute the position of the container\n * @param options - <zh/> 配置项 | <en/> options\n * @returns <zh/> 位置 | <en/> position\n */\nfunction computePosition(options) {\n  const {\n    width,\n    height,\n    placement,\n    graphCanvas\n  } = options;\n  const [W, H] = graphCanvas.getSize();\n  const [xRatio, yRatio] = parsePlacement(placement);\n  return [xRatio * (W - width), yRatio * (H - height)];\n}","map":{"version":3,"names":["Canvas","GCanvas","Renderer","parsePlacement","createPluginContainer","createPluginCanvas","options","width","height","renderer","$container","getContainer","canvas","container","className","graphCanvas","document","getElementById","containerStyle","x","y","computePosition","Object","assign","style","position","left","top","_a","appendChild","placement","W","H","getSize","xRatio","yRatio"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g6/src/plugins/utils/canvas.ts"],"sourcesContent":["import type { IRenderer } from '@antv/g';\nimport { Canvas as GCanvas } from '@antv/g';\nimport { Renderer } from '@antv/g-canvas';\nimport { Canvas } from '../../runtime/canvas';\nimport type { Placement } from '../../types';\nimport { parsePlacement } from '../../utils/placement';\nimport { createPluginContainer } from './dom';\n\ninterface Options {\n  /** <zh/> 插件宽度 | <en/> Plugin width */\n  width: number;\n  /** <zh/> 插件高度 | <en/> Plugin height */\n  height: number;\n  /** <zh/> 渲染器 | <en/> Render */\n  renderer?: IRenderer;\n  /** <zh/> 插件放置位置 | <en/> Plugin placement */\n  placement: Placement;\n  /** <zh/> 插件类名 | <en/> Plugin class name */\n  className: string;\n  /** <zh/> 指定插件放置容器 | <en/> Specify the plugin placement container */\n  container?: string | HTMLElement;\n  /** <zh/> 容器样式 | <en/> Container style */\n  containerStyle?: Partial<CSSStyleDeclaration>;\n  /** <zh/> G6 画布 | <en/> G6 canvas */\n  graphCanvas: Canvas;\n}\n\n/**\n * <zh/> 创建插件画布\n *\n * <en/> Create a plugin canvas\n * @param options - <zh/> 配置项 | <en/> options\n * @returns <zh/> [容器, 画布] | <en/> [container, canvas]\n */\nexport function createPluginCanvas(options: Options): [HTMLElement, GCanvas] {\n  const { width, height, renderer } = options;\n  const $container = getContainer(options);\n\n  const canvas = new GCanvas({\n    width,\n    height,\n    container: $container,\n    renderer: renderer || new Renderer(),\n  });\n\n  return [$container, canvas];\n}\n\n/**\n * <zh/> 获取容器\n *\n * <en/> Get container\n * @param options - <zh/> 配置项 | <en/> options\n * @returns <zh/> 容器 | <en/> container\n */\nfunction getContainer(options: Options) {\n  const { container, className, graphCanvas } = options;\n  if (container) {\n    return typeof container === 'string' ? document.getElementById(container)! : container;\n  }\n\n  const $container = createPluginContainer(className, false);\n\n  const { width, height, containerStyle } = options;\n  const [x, y] = computePosition(options);\n\n  Object.assign($container.style, {\n    position: 'absolute',\n    left: x + 'px',\n    top: y + 'px',\n    width: width + 'px',\n    height: height + 'px',\n    ...containerStyle,\n  });\n\n  graphCanvas.getContainer()?.appendChild($container);\n  return $container;\n}\n\n/**\n * <zh/> 计算容器位置\n *\n * <en/> Compute the position of the container\n * @param options - <zh/> 配置项 | <en/> options\n * @returns <zh/> 位置 | <en/> position\n */\nfunction computePosition(options: Options) {\n  const { width, height, placement, graphCanvas } = options;\n  const [W, H] = graphCanvas.getSize();\n  const [xRatio, yRatio] = parsePlacement(placement);\n  return [xRatio * (W - width), yRatio * (H - height)];\n}\n"],"mappings":"AACA,SAASA,MAAM,IAAIC,OAAO,QAAQ,SAAS;AAC3C,SAASC,QAAQ,QAAQ,gBAAgB;AAGzC,SAASC,cAAc,QAAQ,uBAAuB;AACtD,SAASC,qBAAqB,QAAQ,OAAO;AAqB7C;;;;;;;AAOA,OAAM,SAAUC,kBAAkBA,CAACC,OAAgB;EACjD,MAAM;IAAEC,KAAK;IAAEC,MAAM;IAAEC;EAAQ,CAAE,GAAGH,OAAO;EAC3C,MAAMI,UAAU,GAAGC,YAAY,CAACL,OAAO,CAAC;EAExC,MAAMM,MAAM,GAAG,IAAIX,OAAO,CAAC;IACzBM,KAAK;IACLC,MAAM;IACNK,SAAS,EAAEH,UAAU;IACrBD,QAAQ,EAAEA,QAAQ,IAAI,IAAIP,QAAQ;GACnC,CAAC;EAEF,OAAO,CAACQ,UAAU,EAAEE,MAAM,CAAC;AAC7B;AAEA;;;;;;;AAOA,SAASD,YAAYA,CAACL,OAAgB;;EACpC,MAAM;IAAEO,SAAS;IAAEC,SAAS;IAAEC;EAAW,CAAE,GAAGT,OAAO;EACrD,IAAIO,SAAS,EAAE;IACb,OAAO,OAAOA,SAAS,KAAK,QAAQ,GAAGG,QAAQ,CAACC,cAAc,CAACJ,SAAS,CAAE,GAAGA,SAAS;EACxF;EAEA,MAAMH,UAAU,GAAGN,qBAAqB,CAACU,SAAS,EAAE,KAAK,CAAC;EAE1D,MAAM;IAAEP,KAAK;IAAEC,MAAM;IAAEU;EAAc,CAAE,GAAGZ,OAAO;EACjD,MAAM,CAACa,CAAC,EAAEC,CAAC,CAAC,GAAGC,eAAe,CAACf,OAAO,CAAC;EAEvCgB,MAAM,CAACC,MAAM,CAACb,UAAU,CAACc,KAAK,EAAAF,MAAA,CAAAC,MAAA;IAC5BE,QAAQ,EAAE,UAAU;IACpBC,IAAI,EAAEP,CAAC,GAAG,IAAI;IACdQ,GAAG,EAAEP,CAAC,GAAG,IAAI;IACbb,KAAK,EAAEA,KAAK,GAAG,IAAI;IACnBC,MAAM,EAAEA,MAAM,GAAG;EAAI,GAClBU,cAAc,EACjB;EAEF,CAAAU,EAAA,GAAAb,WAAW,CAACJ,YAAY,EAAE,cAAAiB,EAAA,uBAAAA,EAAA,CAAEC,WAAW,CAACnB,UAAU,CAAC;EACnD,OAAOA,UAAU;AACnB;AAEA;;;;;;;AAOA,SAASW,eAAeA,CAACf,OAAgB;EACvC,MAAM;IAAEC,KAAK;IAAEC,MAAM;IAAEsB,SAAS;IAAEf;EAAW,CAAE,GAAGT,OAAO;EACzD,MAAM,CAACyB,CAAC,EAAEC,CAAC,CAAC,GAAGjB,WAAW,CAACkB,OAAO,EAAE;EACpC,MAAM,CAACC,MAAM,EAAEC,MAAM,CAAC,GAAGhC,cAAc,CAAC2B,SAAS,CAAC;EAClD,OAAO,CAACI,MAAM,IAAIH,CAAC,GAAGxB,KAAK,CAAC,EAAE4B,MAAM,IAAIH,CAAC,GAAGxB,MAAM,CAAC,CAAC;AACtD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}