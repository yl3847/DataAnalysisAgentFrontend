{"ast":null,"code":"import { Base } from './base';\nimport { bisect, isValid } from '../utils';\n/**\n * 将连续的定义域分段，每一段所有的值对应离散的值域中一个值\n */\nexport class Threshold extends Base {\n  getDefaultOptions() {\n    return {\n      domain: [0.5],\n      range: [0, 1]\n    };\n  }\n  constructor(options) {\n    super(options);\n  }\n  /**\n   * 二分查找到输入值在哪一段，返回对应的值域中的值\n   */\n  map(x) {\n    if (!isValid(x)) return this.options.unknown;\n    const index = bisect(this.thresholds, x, 0, this.n);\n    return this.options.range[index];\n  }\n  /**\n   * 在值域中找到对应的值，并返回在定义域中属于哪一段\n   */\n  invert(y) {\n    const {\n      range\n    } = this.options;\n    const index = range.indexOf(y);\n    const domain = this.thresholds;\n    return [domain[index - 1], domain[index]];\n  }\n  clone() {\n    return new Threshold(this.options);\n  }\n  rescale() {\n    const {\n      domain,\n      range\n    } = this.options;\n    this.n = Math.min(domain.length, range.length - 1);\n    this.thresholds = domain;\n  }\n}","map":{"version":3,"names":["Base","bisect","isValid","Threshold","getDefaultOptions","domain","range","constructor","options","map","x","unknown","index","thresholds","n","invert","y","indexOf","clone","rescale","Math","min","length"],"sources":["scales/threshold.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,IAAI,QAAQ,QAAQ;AAE7B,SAASC,MAAM,EAAEC,OAAO,QAAQ,UAAU;AAE1C;;;AAGA,OAAM,MAAOC,SAAyD,SAAQH,IAAO;EAMzEI,iBAAiBA,CAAA;IACzB,OAAO;MACLC,MAAM,EAAE,CAAC,GAAG,CAAC;MACbC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;KACR;EACR;EAEAC,YAAYC,OAA0B;IACpC,KAAK,CAACA,OAAY,CAAC;EACrB;EAEA;;;EAGOC,GAAGA,CAACC,CAA2B;IACpC,IAAI,CAACR,OAAO,CAACQ,CAAC,CAAC,EAAE,OAAO,IAAI,CAACF,OAAO,CAACG,OAAO;IAC5C,MAAMC,KAAK,GAAGX,MAAM,CAAC,IAAI,CAACY,UAAU,EAAEH,CAAC,EAAE,CAAC,EAAE,IAAI,CAACI,CAAC,CAAC;IACnD,OAAO,IAAI,CAACN,OAAO,CAACF,KAAK,CAACM,KAAK,CAAC;EAClC;EAEA;;;EAGOG,MAAMA,CAACC,CAA0B;IACtC,MAAM;MAAEV;IAAK,CAAE,GAAG,IAAI,CAACE,OAAO;IAC9B,MAAMI,KAAK,GAAGN,KAAK,CAACW,OAAO,CAACD,CAAC,CAAC;IAC9B,MAAMX,MAAM,GAAG,IAAI,CAACQ,UAAU;IAC9B,OAAO,CAACR,MAAM,CAACO,KAAK,GAAG,CAAC,CAAC,EAAEP,MAAM,CAACO,KAAK,CAAC,CAAC;EAC3C;EAEOM,KAAKA,CAAA;IACV,OAAO,IAAIf,SAAS,CAAI,IAAI,CAACK,OAAO,CAAC;EACvC;EAEUW,OAAOA,CAAA;IACf,MAAM;MAAEd,MAAM;MAAEC;IAAK,CAAE,GAAG,IAAI,CAACE,OAAO;IACtC,IAAI,CAACM,CAAC,GAAGM,IAAI,CAACC,GAAG,CAAChB,MAAM,CAACiB,MAAM,EAAEhB,KAAK,CAACgB,MAAM,GAAG,CAAC,CAAC;IAClD,IAAI,CAACT,UAAU,GAAGR,MAAM;EAC1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}