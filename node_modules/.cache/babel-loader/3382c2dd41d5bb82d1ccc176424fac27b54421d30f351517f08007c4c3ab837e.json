{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { flow, transformOptions, fieldAdapter, isObject, set } from '../../utils';\nimport { mark } from '../../adaptor';\nimport { START_KEY, END_KEY, WATERFALL_VALUE } from './constants';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n  /**\n   * @description 数据转换\n   */\n  var transformData = function (params) {\n    var options = params.options;\n    var _a = options.data,\n      data = _a === void 0 ? [] : _a,\n      yField = options.yField;\n    if (!data.length) return params;\n    data.reduce(function (prev, cur, index) {\n      var _a;\n      var getFieldData = fieldAdapter(yField);\n      var newCur = getFieldData(cur, index, data);\n      if (index === 0 || cur.isTotal) {\n        cur[START_KEY] = 0;\n        cur[END_KEY] = newCur;\n        cur[WATERFALL_VALUE] = newCur;\n      } else {\n        var start = (_a = prev[END_KEY]) !== null && _a !== void 0 ? _a : getFieldData(prev, index, data);\n        cur[START_KEY] = start;\n        cur[END_KEY] = start + newCur;\n        cur[WATERFALL_VALUE] = prev[END_KEY];\n      }\n      return cur;\n    }, []);\n    Object.assign(options, {\n      yField: [START_KEY, END_KEY]\n    });\n    return params;\n  };\n  /**\n   * @description 添加连线信息\n   */\n  var link = function (params) {\n    var options = params.options;\n    var _a = options.data,\n      data = _a === void 0 ? [] : _a,\n      xField = options.xField,\n      children = options.children,\n      linkStyle = options.linkStyle;\n    var linkData = __spreadArray([], data, true);\n    linkData.reduce(function (prev, cur, index) {\n      if (index > 0) {\n        cur.x1 = prev[xField];\n        cur.x2 = cur[xField];\n        cur.y1 = prev[END_KEY];\n      }\n      return cur;\n    }, []);\n    linkData.shift();\n    children.push({\n      type: 'link',\n      xField: ['x1', 'x2'],\n      yField: 'y1',\n      // 防止动画或 scrollbar 重绘时 link 层级高于 interval\n      zIndex: -1,\n      data: linkData,\n      style: __assign({\n        stroke: '#697474'\n      }, linkStyle),\n      label: false,\n      tooltip: false\n    });\n    return params;\n  };\n  /**\n  * @description 连接线\n  */\n  var connectorTransform = function (params) {\n    var options = params.options;\n    var _a = options.data,\n      data = _a === void 0 ? [] : _a,\n      connector = options.connector;\n    if (!connector) return params;\n    set(options, 'connector', __assign({\n      xField: connector.reverse ? ['x2', 'x1'] : ['x1', 'x2'],\n      yField: connector.reverse ? ['y2', 'y1'] : ['y1', 'y2'],\n      data: [{\n        x1: data[0].x,\n        y1: data[0][END_KEY],\n        x2: data[data.length - 1].x,\n        y2: data[data.length - 1][END_KEY]\n      }]\n    }, isObject(connector) ? connector : {}));\n    return params;\n  };\n  return flow(transformData, link, mark, connectorTransform, transformOptions)(params);\n}","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArray","to","from","pack","l","ar","Array","slice","concat","flow","transformOptions","fieldAdapter","isObject","set","mark","START_KEY","END_KEY","WATERFALL_VALUE","adaptor","params","transformData","options","_a","data","yField","reduce","prev","cur","index","getFieldData","newCur","isTotal","start","link","xField","children","linkStyle","linkData","x1","x2","y1","shift","push","type","zIndex","style","stroke","label","tooltip","connectorTransform","connector","reverse","x","y2"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@ant-design/plots/es/core/plots/waterfall/adaptor.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { flow, transformOptions, fieldAdapter, isObject, set } from '../../utils';\nimport { mark } from '../../adaptor';\nimport { START_KEY, END_KEY, WATERFALL_VALUE } from './constants';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * @description 数据转换\n     */\n    var transformData = function (params) {\n        var options = params.options;\n        var _a = options.data, data = _a === void 0 ? [] : _a, yField = options.yField;\n        if (!data.length)\n            return params;\n        data.reduce(function (prev, cur, index) {\n            var _a;\n            var getFieldData = fieldAdapter(yField);\n            var newCur = getFieldData(cur, index, data);\n            if (index === 0 || cur.isTotal) {\n                cur[START_KEY] = 0;\n                cur[END_KEY] = newCur;\n                cur[WATERFALL_VALUE] = newCur;\n            }\n            else {\n                var start = (_a = prev[END_KEY]) !== null && _a !== void 0 ? _a : getFieldData(prev, index, data);\n                cur[START_KEY] = start;\n                cur[END_KEY] = start + newCur;\n                cur[WATERFALL_VALUE] = prev[END_KEY];\n            }\n            return cur;\n        }, []);\n        Object.assign(options, { yField: [START_KEY, END_KEY] });\n        return params;\n    };\n    /**\n     * @description 添加连线信息\n     */\n    var link = function (params) {\n        var options = params.options;\n        var _a = options.data, data = _a === void 0 ? [] : _a, xField = options.xField, children = options.children, linkStyle = options.linkStyle;\n        var linkData = __spreadArray([], data, true);\n        linkData.reduce(function (prev, cur, index) {\n            if (index > 0) {\n                cur.x1 = prev[xField];\n                cur.x2 = cur[xField];\n                cur.y1 = prev[END_KEY];\n            }\n            return cur;\n        }, []);\n        linkData.shift();\n        children.push({\n            type: 'link',\n            xField: ['x1', 'x2'],\n            yField: 'y1',\n            // 防止动画或 scrollbar 重绘时 link 层级高于 interval\n            zIndex: -1,\n            data: linkData,\n            style: __assign({ stroke: '#697474' }, linkStyle),\n            label: false,\n            tooltip: false,\n        });\n        return params;\n    };\n    /**\n    * @description 连接线\n    */\n    var connectorTransform = function (params) {\n        var options = params.options;\n        var _a = options.data, data = _a === void 0 ? [] : _a, connector = options.connector;\n        if (!connector)\n            return params;\n        set(options, 'connector', __assign({ xField: connector.reverse ? ['x2', 'x1'] : ['x1', 'x2'], yField: connector.reverse ? ['y2', 'y1'] : ['y1', 'y2'], data: [\n                {\n                    x1: data[0].x,\n                    y1: data[0][END_KEY],\n                    x2: data[data.length - 1].x,\n                    y2: data[data.length - 1][END_KEY],\n                },\n            ] }, (isObject(connector) ? connector : {})));\n        return params;\n    };\n    return flow(transformData, link, mark, connectorTransform, transformOptions)(params);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}