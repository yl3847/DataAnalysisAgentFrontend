{"ast":null,"code":"// 参考 d3-ticks nice 的实现\n// https://github.com/d3/d3-scale\nimport { tickIncrement } from './ticks';\nexport const d3LinearNice = (min, max, count = 5) => {\n  const d = [min, max];\n  let i0 = 0;\n  let i1 = d.length - 1;\n  let start = d[i0];\n  let stop = d[i1];\n  let step;\n  if (stop < start) {\n    [start, stop] = [stop, start];\n    [i0, i1] = [i1, i0];\n  }\n  step = tickIncrement(start, stop, count);\n  if (step > 0) {\n    start = Math.floor(start / step) * step;\n    stop = Math.ceil(stop / step) * step;\n    step = tickIncrement(start, stop, count);\n  } else if (step < 0) {\n    start = Math.ceil(start * step) / step;\n    stop = Math.floor(stop * step) / step;\n    step = tickIncrement(start, stop, count);\n  }\n  if (step > 0) {\n    d[i0] = Math.floor(start / step) * step;\n    d[i1] = Math.ceil(stop / step) * step;\n  } else if (step < 0) {\n    d[i0] = Math.ceil(start * step) / step;\n    d[i1] = Math.floor(stop * step) / step;\n  }\n  return d;\n};","map":{"version":3,"names":["tickIncrement","d3LinearNice","min","max","count","d","i0","i1","length","start","stop","step","Math","floor","ceil"],"sources":["utils/d3-linear-nice.ts"],"sourcesContent":[null],"mappings":"AAAA;AACA;AAEA,SAASA,aAAa,QAAQ,SAAS;AAGvC,OAAO,MAAMC,YAAY,GAAeA,CAACC,GAAW,EAAEC,GAAW,EAAEC,KAAA,GAAgB,CAAC,KAAI;EACtF,MAAMC,CAAC,GAAG,CAACH,GAAG,EAAEC,GAAG,CAAC;EACpB,IAAIG,EAAE,GAAG,CAAC;EACV,IAAIC,EAAE,GAAGF,CAAC,CAACG,MAAM,GAAG,CAAC;EACrB,IAAIC,KAAK,GAAGJ,CAAC,CAACC,EAAE,CAAC;EACjB,IAAII,IAAI,GAAGL,CAAC,CAACE,EAAE,CAAC;EAChB,IAAII,IAAI;EAER,IAAID,IAAI,GAAGD,KAAK,EAAE;IAChB,CAACA,KAAK,EAAEC,IAAI,CAAC,GAAG,CAACA,IAAI,EAAED,KAAK,CAAC;IAC7B,CAACH,EAAE,EAAEC,EAAE,CAAC,GAAG,CAACA,EAAE,EAAED,EAAE,CAAC;;EAErBK,IAAI,GAAGX,aAAa,CAACS,KAAK,EAAEC,IAAI,EAAEN,KAAK,CAAC;EAExC,IAAIO,IAAI,GAAG,CAAC,EAAE;IACZF,KAAK,GAAGG,IAAI,CAACC,KAAK,CAACJ,KAAK,GAAGE,IAAI,CAAC,GAAGA,IAAI;IACvCD,IAAI,GAAGE,IAAI,CAACE,IAAI,CAACJ,IAAI,GAAGC,IAAI,CAAC,GAAGA,IAAI;IACpCA,IAAI,GAAGX,aAAa,CAACS,KAAK,EAAEC,IAAI,EAAEN,KAAK,CAAC;GACzC,MAAM,IAAIO,IAAI,GAAG,CAAC,EAAE;IACnBF,KAAK,GAAGG,IAAI,CAACE,IAAI,CAACL,KAAK,GAAGE,IAAI,CAAC,GAAGA,IAAI;IACtCD,IAAI,GAAGE,IAAI,CAACC,KAAK,CAACH,IAAI,GAAGC,IAAI,CAAC,GAAGA,IAAI;IACrCA,IAAI,GAAGX,aAAa,CAACS,KAAK,EAAEC,IAAI,EAAEN,KAAK,CAAC;;EAG1C,IAAIO,IAAI,GAAG,CAAC,EAAE;IACZN,CAAC,CAACC,EAAE,CAAC,GAAGM,IAAI,CAACC,KAAK,CAACJ,KAAK,GAAGE,IAAI,CAAC,GAAGA,IAAI;IACvCN,CAAC,CAACE,EAAE,CAAC,GAAGK,IAAI,CAACE,IAAI,CAACJ,IAAI,GAAGC,IAAI,CAAC,GAAGA,IAAI;GACtC,MAAM,IAAIA,IAAI,GAAG,CAAC,EAAE;IACnBN,CAAC,CAACC,EAAE,CAAC,GAAGM,IAAI,CAACE,IAAI,CAACL,KAAK,GAAGE,IAAI,CAAC,GAAGA,IAAI;IACtCN,CAAC,CAACE,EAAE,CAAC,GAAGK,IAAI,CAACC,KAAK,CAACH,IAAI,GAAGC,IAAI,CAAC,GAAGA,IAAI;;EAExC,OAAON,CAAC;AACV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}