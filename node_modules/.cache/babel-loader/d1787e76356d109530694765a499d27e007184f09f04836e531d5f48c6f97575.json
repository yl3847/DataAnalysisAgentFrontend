{"ast":null,"code":"import { isNumber } from '@antv/util';\nimport { compose } from './compose';\nconst createInterpolatorRound = interpolator => {\n  return t => {\n    // If result is not number, it can't be rounded.\n    const res = interpolator(t);\n    return isNumber(res) ? Math.round(res) : res;\n  };\n};\nexport function interpolatize(rangeOf, normalizeDomain) {\n  return Scale => {\n    Scale.prototype.rescale = function () {\n      this.initRange();\n      this.nice();\n      const [transform] = this.chooseTransforms();\n      this.composeOutput(transform, this.chooseClamp(transform));\n    };\n    Scale.prototype.initRange = function () {\n      const {\n        interpolator\n      } = this.options;\n      this.options.range = rangeOf(interpolator);\n    };\n    Scale.prototype.composeOutput = function (transform, clamp) {\n      const {\n        domain,\n        interpolator,\n        round\n      } = this.getOptions();\n      const normalize = normalizeDomain(domain.map(transform));\n      const interpolate = round ? createInterpolatorRound(interpolator) : interpolator;\n      this.output = compose(interpolate, normalize, clamp, transform);\n    };\n    Scale.prototype.invert = undefined;\n  };\n}","map":{"version":3,"names":["isNumber","compose","createInterpolatorRound","interpolator","t","res","Math","round","interpolatize","rangeOf","normalizeDomain","Scale","prototype","rescale","initRange","nice","transform","chooseTransforms","composeOutput","chooseClamp","options","range","clamp","domain","getOptions","normalize","map","interpolate","output","invert","undefined"],"sources":["utils/interpolatize.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,QAAQ,QAAQ,YAAY;AAErC,SAASC,OAAO,QAAQ,WAAW;AAEnC,MAAMC,uBAAuB,GAAIC,YAA0B,IAAI;EAC7D,OAAQC,CAAS,IAAI;IACnB;IACA,MAAMC,GAAG,GAAGF,YAAY,CAACC,CAAC,CAAC;IAC3B,OAAOJ,QAAQ,CAACK,GAAG,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACF,GAAG,CAAC,GAAGA,GAAG;EAC9C,CAAC;AACH,CAAC;AAED,OAAM,SAAUG,aAAaA,CAACC,OAAiD,EAAEC,eAAgC;EAC/G,OAAQC,KAAK,IAAI;IACfA,KAAK,CAACC,SAAS,CAACC,OAAO,GAAG;MACxB,IAAI,CAACC,SAAS,EAAE;MAChB,IAAI,CAACC,IAAI,EAAE;MACX,MAAM,CAACC,SAAS,CAAC,GAAG,IAAI,CAACC,gBAAgB,EAAE;MAC3C,IAAI,CAACC,aAAa,CAACF,SAAS,EAAE,IAAI,CAACG,WAAW,CAACH,SAAS,CAAC,CAAC;IAC5D,CAAC;IAEDL,KAAK,CAACC,SAAS,CAACE,SAAS,GAAG;MAC1B,MAAM;QAAEX;MAAY,CAAE,GAAG,IAAI,CAACiB,OAAO;MACrC,IAAI,CAACA,OAAO,CAACC,KAAK,GAAGZ,OAAO,CAACN,YAAY,CAAC;IAC5C,CAAC;IAEDQ,KAAK,CAACC,SAAS,CAACM,aAAa,GAAG,UAAUF,SAAoB,EAAEM,KAAgB;MAC9E,MAAM;QAAEC,MAAM;QAAEpB,YAAY;QAAEI;MAAK,CAAE,GAAG,IAAI,CAACiB,UAAU,EAAE;MACzD,MAAMC,SAAS,GAAGf,eAAe,CAACa,MAAM,CAACG,GAAG,CAACV,SAAS,CAAC,CAAC;MACxD,MAAMW,WAAW,GAAGpB,KAAK,GAAGL,uBAAuB,CAACC,YAAY,CAAC,GAAGA,YAAY;MAChF,IAAI,CAACyB,MAAM,GAAG3B,OAAO,CAAC0B,WAAW,EAAEF,SAAS,EAAEH,KAAK,EAAEN,SAAS,CAAC;IACjE,CAAC;IAEDL,KAAK,CAACC,SAAS,CAACiB,MAAM,GAAGC,SAAS;EACpC,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}