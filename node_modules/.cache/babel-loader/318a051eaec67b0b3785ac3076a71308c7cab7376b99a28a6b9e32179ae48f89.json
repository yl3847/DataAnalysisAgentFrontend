{"ast":null,"code":"/*!\n * @antv/g-web-animations-api\n * @description A simple implementation of Web Animations API.\n * @version 2.1.28\n * @date 7/30/2025, 1:36:24 PM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport { FederatedEvent, ERROR_MSG_METHOD_NOT_IMPLEMENTED, propertyMetadataCache, runtime } from '@antv/g-lite';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { clamp, isNumber, isNil } from '@antv/util';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nvar AnimationEvent = /*#__PURE__*/function (_FederatedEvent) {\n  function AnimationEvent(manager, target, currentTime, timelineTime) {\n    var _this;\n    _classCallCheck(this, AnimationEvent);\n    _this = _callSuper(this, AnimationEvent, [manager]);\n\n    // @ts-ignore\n    _this.currentTime = currentTime;\n    _this.timelineTime = timelineTime;\n    _this.target = target;\n    _this.type = 'finish';\n    _this.bubbles = false;\n    // @ts-ignore\n    _this.currentTarget = target;\n    _this.defaultPrevented = false;\n    _this.eventPhase = _this.AT_TARGET;\n    _this.timeStamp = Date.now();\n    _this.currentTime = currentTime;\n    _this.timelineTime = timelineTime;\n    return _this;\n  }\n  _inherits(AnimationEvent, _FederatedEvent);\n  return _createClass(AnimationEvent);\n}(FederatedEvent);\nvar sequenceNumber = 0;\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nvar Animation = /*#__PURE__*/function () {\n  function Animation(effect, timeline) {\n    var _this$effect;\n    _classCallCheck(this, Animation);\n    this.currentTimePending = false;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n     */\n    // playState: AnimationPlayState;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n     */\n    this._currentTime = 0;\n    this._playbackRate = 1;\n    this._inTimeline = true;\n    this.effect = effect;\n    effect.animation = this;\n    this.timeline = timeline;\n    this.id = \"\".concat(sequenceNumber++);\n    this._inEffect = !!this.effect.update(0);\n    this._totalDuration = Number((_this$effect = this.effect) === null || _this$effect === void 0 ? void 0 : _this$effect.getComputedTiming().endTime);\n    this._holdTime = 0;\n    this._paused = false;\n    this.oldPlayState = 'idle';\n    this.updatePromises();\n  }\n\n  /**\n   * state machine,\n   * resolve/reject ready/finished Promise according to current state\n   */\n  return _createClass(Animation, [{\n    key: \"pending\",\n    get:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/effect\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/timeline\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/id\n     */\n\n    // animation: InternalAnimation | null;\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n     */\n    function get() {\n      return this._startTime === null && !this._paused && this.playbackRate !== 0 || this.currentTimePending;\n    }\n  }, {\n    key: \"playState\",\n    get: function get() {\n      if (this._idle) return 'idle';\n      if (this._isFinished) return 'finished';\n      if (this._paused) return 'paused';\n      return 'running';\n    }\n\n    /**\n     * record previos state\n     */\n  }, {\n    key: \"ready\",\n    get:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n     * @example\n      animation.pause();\n      animation.ready.then(function() {\n        // Displays 'running'\n        alert(animation.playState);\n      });\n      animation.play();\n     */\n    function get() {\n      var _this = this;\n      if (!this.readyPromise) {\n        if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n          this.timeline.animationsWithPromises.push(this);\n        }\n        this.readyPromise = new Promise(function (resolve, reject) {\n          _this.resolveReadyPromise = function () {\n            resolve(_this);\n          };\n          _this.rejectReadyPromise = function () {\n            reject(new Error());\n          };\n        });\n        if (!this.pending) {\n          this.resolveReadyPromise();\n        }\n      }\n      return this.readyPromise;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n     * @example\n      Promise.all(\n        elem.getAnimations().map(\n          function(animation) {\n            return animation.finished\n          }\n        )\n      ).then(\n        function() {\n          return elem.remove();\n        }\n      );\n     */\n  }, {\n    key: \"finished\",\n    get: function get() {\n      var _this2 = this;\n      if (!this.finishedPromise) {\n        if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n          this.timeline.animationsWithPromises.push(this);\n        }\n        this.finishedPromise = new Promise(function (resolve, reject) {\n          _this2.resolveFinishedPromise = function () {\n            resolve(_this2);\n          };\n          _this2.rejectFinishedPromise = function () {\n            reject(new Error());\n          };\n        });\n        if (this.playState === 'finished') {\n          this.resolveFinishedPromise();\n        }\n      }\n      return this.finishedPromise;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/onfinish\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/oncancel\n     */\n\n    /**\n     * get called after each frame when running\n     */\n  }, {\n    key: \"currentTime\",\n    get: function get() {\n      this.updatePromises();\n      return this._idle || this.currentTimePending ? null : this._currentTime;\n    },\n    set: function set(newTime) {\n      newTime = Number(newTime);\n      if (isNaN(newTime)) return;\n      this.timeline.restart();\n      if (!this._paused && this._startTime !== null) {\n        var _this$timeline;\n        this._startTime = Number((_this$timeline = this.timeline) === null || _this$timeline === void 0 ? void 0 : _this$timeline.currentTime) - newTime / this.playbackRate;\n      }\n      this.currentTimePending = false;\n      if (this._currentTime === newTime) {\n        return;\n      }\n      if (this._idle) {\n        this._idle = false;\n        this._paused = true;\n      }\n      this.tickCurrentTime(newTime, true);\n      this.timeline.applyDirtiedAnimation(this);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/startTime\n     */\n  }, {\n    key: \"startTime\",\n    get: function get() {\n      return this._startTime;\n    },\n    set: function set(newTime) {\n      if (newTime !== null) {\n        this.updatePromises();\n        newTime = Number(newTime);\n        if (isNaN(newTime)) return;\n        if (this._paused || this._idle) return;\n        this._startTime = newTime;\n        this.tickCurrentTime((Number(this.timeline.currentTime) - this._startTime) * this.playbackRate);\n        this.timeline.applyDirtiedAnimation(this);\n        this.updatePromises();\n      }\n    }\n  }, {\n    key: \"playbackRate\",\n    get: function get() {\n      return this._playbackRate;\n    },\n    set: function set(value) {\n      if (value === this._playbackRate) {\n        return;\n      }\n      this.updatePromises();\n      var oldCurrentTime = this.currentTime;\n      this._playbackRate = value;\n      this.startTime = null;\n      if (this.playState !== 'paused' && this.playState !== 'idle') {\n        this._finishedFlag = false;\n        this._idle = false;\n        this.ensureAlive();\n        this.timeline.applyDirtiedAnimation(this);\n      }\n      if (oldCurrentTime !== null) {\n        this.currentTime = oldCurrentTime;\n      }\n      this.updatePromises();\n    }\n  }, {\n    key: \"_isFinished\",\n    get: function get() {\n      return !this._idle && (this._playbackRate > 0 && Number(this._currentTime) >= this._totalDuration || this._playbackRate < 0 && Number(this._currentTime) <= 0);\n    }\n  }, {\n    key: \"totalDuration\",\n    get: function get() {\n      return this._totalDuration;\n    }\n  }, {\n    key: \"_needsTick\",\n    get: function get() {\n      return this.pending || this.playState === 'running' || !this._finishedFlag;\n    }\n  }, {\n    key: \"updatePromises\",\n    value: function updatePromises() {\n      var _this$effect$target;\n      if ((_this$effect$target = this.effect.target) !== null && _this$effect$target !== void 0 && _this$effect$target.destroyed) {\n        this.readyPromise = undefined;\n        this.finishedPromise = undefined;\n        return false;\n      }\n      var oldPlayState = this.oldPlayState;\n      var newPlayState = this.pending ? 'pending' : this.playState;\n      if (this.readyPromise && newPlayState !== oldPlayState) {\n        if (newPlayState === 'idle') {\n          this.rejectReadyPromise();\n          this.readyPromise = undefined;\n        } else if (oldPlayState === 'pending') {\n          this.resolveReadyPromise();\n        } else if (newPlayState === 'pending') {\n          this.readyPromise = undefined;\n        }\n      }\n      if (this.finishedPromise && newPlayState !== oldPlayState) {\n        if (newPlayState === 'idle') {\n          this.rejectFinishedPromise();\n          this.finishedPromise = undefined;\n        } else if (newPlayState === 'finished') {\n          this.resolveFinishedPromise();\n        } else if (oldPlayState === 'finished') {\n          this.finishedPromise = undefined;\n        }\n      }\n      this.oldPlayState = newPlayState;\n      return this.readyPromise || this.finishedPromise;\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.updatePromises();\n      this._paused = false;\n      if (this._isFinished || this._idle) {\n        this.rewind();\n        this._startTime = null;\n      }\n      this._finishedFlag = false;\n      this._idle = false;\n      this.ensureAlive();\n      this.timeline.applyDirtiedAnimation(this);\n      if (this.timeline.animations.indexOf(this) === -1) {\n        this.timeline.animations.push(this);\n      }\n      this.updatePromises();\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.updatePromises();\n      if (this.currentTime) {\n        this._holdTime = this.currentTime;\n      }\n      if (!this._isFinished && !this._paused && !this._idle) {\n        this.currentTimePending = true;\n      } else if (this._idle) {\n        this.rewind();\n        this._idle = false;\n      }\n      this._startTime = null;\n      this._paused = true;\n      this.updatePromises();\n    }\n  }, {\n    key: \"finish\",\n    value: function finish() {\n      this.updatePromises();\n      if (this._idle) return;\n      this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n      this._startTime = this._totalDuration - this.currentTime;\n      this.currentTimePending = false;\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      var _this3 = this;\n      this.updatePromises();\n      if (!this._inEffect) return;\n      this._inEffect = false;\n      this._idle = true;\n      this._paused = false;\n      this._finishedFlag = true;\n      this._currentTime = 0;\n      this._startTime = null;\n      this.effect.update(null);\n      // effects are invalid after cancellation as the animation state\n      // needs to un-apply.\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n\n      /**\n       * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n       * 2. Let current finished promise be a new promise\n       * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n       */\n      // if (this.finishedPromise) {\n      //   this.rejectFinishedPromise();\n      //   this.finishedPromise = undefined;\n      // }\n\n      if (this.oncancel) {\n        var event = new AnimationEvent(null, this, this.currentTime, null);\n        setTimeout(function () {\n          _this3.oncancel(event);\n        });\n      }\n    }\n  }, {\n    key: \"reverse\",\n    value: function reverse() {\n      this.updatePromises();\n      var oldCurrentTime = this.currentTime;\n      this.playbackRate *= -1;\n      this.play();\n      if (oldCurrentTime !== null) {\n        this.currentTime = oldCurrentTime;\n      }\n      this.updatePromises();\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n     */\n  }, {\n    key: \"updatePlaybackRate\",\n    value: function updatePlaybackRate(playbackRate) {\n      this.playbackRate = playbackRate;\n    }\n  }, {\n    key: \"targetAnimations\",\n    value: function targetAnimations() {\n      var _this$effect2;\n      var target = (_this$effect2 = this.effect) === null || _this$effect2 === void 0 ? void 0 : _this$effect2.target;\n      return target.getAnimations();\n    }\n  }, {\n    key: \"markTarget\",\n    value: function markTarget() {\n      var animations = this.targetAnimations();\n      if (animations.indexOf(this) === -1) {\n        animations.push(this);\n      }\n    }\n  }, {\n    key: \"unmarkTarget\",\n    value: function unmarkTarget() {\n      var animations = this.targetAnimations();\n      var index = animations.indexOf(this);\n      if (index !== -1) {\n        animations.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"tick\",\n    value: function tick(timelineTime, isAnimationFrame) {\n      if (!this._idle && !this._paused) {\n        if (this._startTime === null) {\n          if (isAnimationFrame) {\n            this.startTime = timelineTime - this._currentTime / this.playbackRate;\n          }\n        } else if (!this._isFinished) {\n          this.tickCurrentTime((timelineTime - this._startTime) * this.playbackRate);\n        }\n      }\n      if (isAnimationFrame) {\n        this.currentTimePending = false;\n        this.fireEvents(timelineTime);\n      }\n    }\n  }, {\n    key: \"rewind\",\n    value: function rewind() {\n      if (this.playbackRate >= 0) {\n        this.currentTime = 0;\n      } else if (this._totalDuration < Infinity) {\n        this.currentTime = this._totalDuration;\n      } else {\n        throw new Error('Unable to rewind negative playback rate animation with infinite duration');\n      }\n    }\n  }, {\n    key: \"persist\",\n    value: function persist() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(type, listener, options) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type, listener, options) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"commitStyles\",\n    value:\n    // replaceState: AnimationReplaceState;\n    function commitStyles() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"ensureAlive\",\n    value: function ensureAlive() {\n      // If an animation is playing backwards and is not fill backwards/both\n      // then it should go out of effect when it reaches the start of its\n      // active interval (currentTime === 0).\n      if (this.playbackRate < 0 && this.currentTime === 0) {\n        var _this$effect3;\n        this._inEffect = !!((_this$effect3 = this.effect) !== null && _this$effect3 !== void 0 && _this$effect3.update(-1));\n      } else {\n        var _this$effect4;\n        this._inEffect = !!((_this$effect4 = this.effect) !== null && _this$effect4 !== void 0 && _this$effect4.update(this.currentTime));\n      }\n      if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n        this._inTimeline = true;\n        this.timeline.animations.push(this);\n      }\n    }\n  }, {\n    key: \"tickCurrentTime\",\n    value: function tickCurrentTime(newTime, ignoreLimit) {\n      if (newTime !== this._currentTime) {\n        this._currentTime = newTime;\n        if (this._isFinished && !ignoreLimit) {\n          this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n        }\n        this.ensureAlive();\n      }\n    }\n  }, {\n    key: \"fireEvents\",\n    value: function fireEvents(baseTime) {\n      var _this4 = this;\n      if (this._isFinished) {\n        if (!this._finishedFlag) {\n          if (this.onfinish) {\n            var event = new AnimationEvent(null, this, this.currentTime, baseTime);\n            setTimeout(function () {\n              if (_this4.onfinish) {\n                _this4.onfinish(event);\n              }\n            });\n          }\n          this._finishedFlag = true;\n        }\n      } else {\n        if (this.onframe && this.playState === 'running') {\n          var _event = new AnimationEvent(null, this, this.currentTime, baseTime);\n          this.onframe(_event);\n        }\n        this._finishedFlag = false;\n      }\n    }\n  }]);\n}();\n\n/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\nvar float32ArraySupported = typeof Float32Array === 'function';\nvar A = function A(aA1, aA2) {\n  return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n};\nvar B = function B(aA1, aA2) {\n  return 3.0 * aA2 - 6.0 * aA1;\n};\nvar C = function C(aA1) {\n  return 3.0 * aA1;\n};\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nvar calcBezier = function calcBezier(aT, aA1, aA2) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n};\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nvar getSlope = function getSlope(aT, aA1, aA2) {\n  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n};\nvar binarySubdivide = function binarySubdivide(aX, aA, aB, mX1, mX2) {\n  var currentX;\n  var currentT;\n  var i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) aB = currentT;else aA = currentT;\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n};\nvar newtonRaphsonIterate = function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n    var currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) return aGuessT;\n    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n};\nvar bezier = function bezier(mX1, mY1, mX2, mY2) {\n  if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1)) throw new Error('bezier x values must be in [0, 1] range');\n  if (mX1 === mY1 && mX2 === mY2) return function (t) {\n    return t;\n  };\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n  var getTForX = function getTForX(aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) intervalStart += kSampleStepSize;\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    if (initialSlope === 0.0) return guessForT;\n    return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n  };\n  return function (t) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (t === 0 || t === 1) return t;\n    return calcBezier(getTForX(t), mY1, mY2);\n  };\n};\nvar convertToDash = function convertToDash(str) {\n  str = str.replace(/([A-Z])/g, function (letter) {\n    return \"-\".concat(letter.toLowerCase());\n  });\n\n  // Remove first dash\n  return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nvar Quad = function Quad(t) {\n  return Math.pow(t, 2);\n};\nvar Cubic = function Cubic(t) {\n  return Math.pow(t, 3);\n};\nvar Quart = function Quart(t) {\n  return Math.pow(t, 4);\n};\nvar Quint = function Quint(t) {\n  return Math.pow(t, 5);\n};\nvar Expo = function Expo(t) {\n  return Math.pow(t, 6);\n};\nvar Sine = function Sine(t) {\n  return 1 - Math.cos(t * Math.PI / 2);\n};\nvar Circ = function Circ(t) {\n  return 1 - Math.sqrt(1 - t * t);\n};\nvar Back = function Back(t) {\n  return t * t * (3 * t - 2);\n};\nvar Bounce = function Bounce(t) {\n  var pow2;\n  var b = 4;\n  while (t < ((pow2 = Math.pow(2, --b)) - 1) / 11) {}\n  return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow((pow2 * 3 - 2) / 22 - t, 2);\n};\nvar Elastic = function Elastic(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var _params = _slicedToArray(params, 2),\n    _params$ = _params[0],\n    amplitude = _params$ === void 0 ? 1 : _params$,\n    _params$2 = _params[1],\n    period = _params$2 === void 0 ? 0.5 : _params$2;\n  var a = clamp(Number(amplitude), 1, 10);\n  var p = clamp(Number(period), 0.1, 2);\n  if (t === 0 || t === 1) return t;\n  return -a * Math.pow(2, 10 * (t - 1)) * Math.sin((t - 1 - p / (Math.PI * 2) * Math.asin(1 / a)) * (Math.PI * 2) / p);\n};\nvar Spring = function Spring(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var duration = arguments.length > 2 ? arguments[2] : undefined;\n  var _params2 = _slicedToArray(params, 4),\n    _params2$ = _params2[0],\n    mass = _params2$ === void 0 ? 1 : _params2$,\n    _params2$2 = _params2[1],\n    stiffness = _params2$2 === void 0 ? 100 : _params2$2,\n    _params2$3 = _params2[2],\n    damping = _params2$3 === void 0 ? 10 : _params2$3,\n    _params2$4 = _params2[3],\n    velocity = _params2$4 === void 0 ? 0 : _params2$4;\n  mass = clamp(mass, 0.1, 1000);\n  stiffness = clamp(stiffness, 0.1, 1000);\n  damping = clamp(damping, 0.1, 1000);\n  velocity = clamp(velocity, 0.1, 1000);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n  var progress = duration ? duration * t / 1000 : t;\n  if (zeta < 1) {\n    progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n  } else {\n    progress = (a + b * progress) * Math.exp(-progress * w0);\n  }\n  if (t === 0 || t === 1) return t;\n  return 1 - progress;\n};\n\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nvar Steps = function Steps(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var _ref = params,\n    _ref2 = _slicedToArray(_ref, 2),\n    _ref2$ = _ref2[0],\n    steps = _ref2$ === void 0 ? 10 : _ref2$,\n    type = _ref2[1];\n  var trunc = type === 'start' ? Math.ceil : Math.floor;\n  return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n\n// @ts-ignore\nvar Bezier = function Bezier(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var _params3 = _slicedToArray(params, 4),\n    mX1 = _params3[0],\n    mY1 = _params3[1],\n    mX2 = _params3[2],\n    mY2 = _params3[3];\n  return bezier(mX1, mY1, mX2, mY2)(t);\n};\n\n/** The default `ease-in` easing function */\nvar easein = bezier(0.42, 0.0, 1.0, 1.0);\n\n/** Converts easing functions to their `out`counter parts */\nvar EaseOut = function EaseOut(ease) {\n  return function (t) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var duration = arguments.length > 2 ? arguments[2] : undefined;\n    return 1 - ease(1 - t, params, duration);\n  };\n};\n\n/** Converts easing functions to their `in-out` counter parts */\nvar EaseInOut = function EaseInOut(ease) {\n  return function (t) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var duration = arguments.length > 2 ? arguments[2] : undefined;\n    return t < 0.5 ? ease(t * 2, params, duration) / 2 : 1 - ease(t * -2 + 2, params, duration) / 2;\n  };\n};\n\n/** Converts easing functions to their `out-in` counter parts */\nvar EaseOutIn = function EaseOutIn(ease) {\n  return function (t) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var duration = arguments.length > 2 ? arguments[2] : undefined;\n    return t < 0.5 ? (1 - ease(1 - t * 2, params, duration)) / 2 : (ease(t * 2 - 1, params, duration) + 1) / 2;\n  };\n};\n\n/**\n * The default list of easing functions, do note this is different from {@link EASING}\n */\n\nvar EasingFunctions = {\n  steps: Steps,\n  'step-start': function stepStart(t) {\n    return Steps(t, [1, 'start']);\n  },\n  'step-end': function stepEnd(t) {\n    return Steps(t, [1, 'end']);\n  },\n  linear: function linear(t) {\n    return t;\n  },\n  'cubic-bezier': Bezier,\n  ease: function ease(t) {\n    return Bezier(t, [0.25, 0.1, 0.25, 1.0]);\n  },\n  \"in\": easein,\n  out: EaseOut(easein),\n  'in-out': EaseInOut(easein),\n  'out-in': EaseOutIn(easein),\n  'in-quad': Quad,\n  'out-quad': EaseOut(Quad),\n  'in-out-quad': EaseInOut(Quad),\n  'out-in-quad': EaseOutIn(Quad),\n  'in-cubic': Cubic,\n  'out-cubic': EaseOut(Cubic),\n  'in-out-cubic': EaseInOut(Cubic),\n  'out-in-cubic': EaseOutIn(Cubic),\n  'in-quart': Quart,\n  'out-quart': EaseOut(Quart),\n  'in-out-quart': EaseInOut(Quart),\n  'out-in-quart': EaseOutIn(Quart),\n  'in-quint': Quint,\n  'out-quint': EaseOut(Quint),\n  'in-out-quint': EaseInOut(Quint),\n  'out-in-quint': EaseOutIn(Quint),\n  'in-expo': Expo,\n  'out-expo': EaseOut(Expo),\n  'in-out-expo': EaseInOut(Expo),\n  'out-in-expo': EaseOutIn(Expo),\n  'in-sine': Sine,\n  'out-sine': EaseOut(Sine),\n  'in-out-sine': EaseInOut(Sine),\n  'out-in-sine': EaseOutIn(Sine),\n  'in-circ': Circ,\n  'out-circ': EaseOut(Circ),\n  'in-out-circ': EaseInOut(Circ),\n  'out-in-circ': EaseOutIn(Circ),\n  'in-back': Back,\n  'out-back': EaseOut(Back),\n  'in-out-back': EaseInOut(Back),\n  'out-in-back': EaseOutIn(Back),\n  'in-bounce': Bounce,\n  'out-bounce': EaseOut(Bounce),\n  'in-out-bounce': EaseInOut(Bounce),\n  'out-in-bounce': EaseOutIn(Bounce),\n  'in-elastic': Elastic,\n  'out-elastic': EaseOut(Elastic),\n  'in-out-elastic': EaseInOut(Elastic),\n  'out-in-elastic': EaseOutIn(Elastic),\n  spring: Spring,\n  'spring-in': Spring,\n  'spring-out': EaseOut(Spring),\n  'spring-in-out': EaseInOut(Spring),\n  'spring-out-in': EaseOutIn(Spring)\n};\n\n/**\n * Convert string easing to their proper form\n */\nvar complexEasingSyntax = function complexEasingSyntax(ease) {\n  return convertToDash(ease).replace(/^ease-/, '') // Remove the \"ease-\" keyword\n  .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n  .toLowerCase().trim();\n};\n\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nvar getEasingFunction = function getEasingFunction(ease) {\n  return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n\nvar linear = function linear(x) {\n  return x;\n};\nvar Start = 1;\nvar Middle = 0.5;\nvar End = 0;\nfunction step(count, pos) {\n  return function (x) {\n    if (x >= 1) {\n      return 1;\n    }\n    var stepSize = 1 / count;\n    x += pos * stepSize;\n    return x - x % stepSize;\n  };\n}\nvar numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nvar cubicBezierRe = new RegExp(\"cubic-bezier\\\\(\".concat(numberString, \",\").concat(numberString, \",\").concat(numberString, \",\").concat(numberString, \"\\\\)\"));\nvar step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nvar step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\nfunction parseEasingFunction(normalizedEasing) {\n  var cubicData = cubicBezierRe.exec(normalizedEasing);\n  if (cubicData) {\n    // @ts-ignore\n    return bezier.apply(void 0, _toConsumableArray(cubicData.slice(1).map(Number)));\n  }\n  var step1Data = step1Re.exec(normalizedEasing);\n  if (step1Data) {\n    return step(Number(step1Data[1]), End);\n  }\n  var step2Data = step2Re.exec(normalizedEasing);\n  if (step2Data) {\n    // @ts-ignore\n    return step(Number(step2Data[1]), {\n      start: Start,\n      middle: Middle,\n      end: End\n    }[step2Data[2]]);\n  }\n  return getEasingFunction(normalizedEasing);\n}\nfunction calculateActiveDuration(timing) {\n  // @ts-ignore\n  return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\nfunction repeatedDuration(timing) {\n  var _timing$iterations;\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n  if (timing.duration === 0 || timing.iterations === 0) {\n    return 0;\n  }\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n  // if (timing.duration === 'auto') {\n  //   timing.duration = 0;\n  // }\n\n  return (timing.duration === 'auto' ? 0 : Number(timing.duration)) * ((_timing$iterations = timing.iterations) !== null && _timing$iterations !== void 0 ? _timing$iterations : 1);\n}\nvar PhaseNone = 0;\nvar PhaseBefore = 1;\nvar PhaseAfter = 2;\nvar PhaseActive = 3;\nfunction calculatePhase(activeDuration, localTime, timing) {\n  // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n  if (localTime === null) {\n    return PhaseNone;\n  }\n  var endTime = timing.endTime;\n  if (localTime < Math.min(timing.delay, endTime)) {\n    return PhaseBefore;\n  }\n  if (localTime >= Math.min(timing.delay + activeDuration + timing.endDelay, endTime)) {\n    return PhaseAfter;\n  }\n  return PhaseActive;\n}\nfunction calculateActiveTime(activeDuration, fillMode, localTime, phase, delay) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n  switch (phase) {\n    case PhaseBefore:\n      if (fillMode === 'backwards' || fillMode === 'both') return 0;\n      return null;\n    case PhaseActive:\n      return localTime - delay;\n    case PhaseAfter:\n      if (fillMode === 'forwards' || fillMode === 'both') return activeDuration;\n      return null;\n    case PhaseNone:\n      return null;\n  }\n}\nfunction calculateOverallProgress(iterationDuration, phase, iterations, activeTime, iterationStart) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n  var overallProgress = iterationStart;\n  if (iterationDuration === 0) {\n    if (phase !== PhaseBefore) {\n      overallProgress += iterations;\n    }\n  } else {\n    overallProgress += activeTime / iterationDuration;\n  }\n  return overallProgress;\n}\nfunction calculateSimpleIterationProgress(overallProgress, iterationStart, phase, iterations, activeTime, iterationDuration) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n\n  var simpleIterationProgress = overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n  if (simpleIterationProgress === 0 && phase === PhaseAfter && iterations !== 0 && (activeTime !== 0 || iterationDuration === 0)) {\n    simpleIterationProgress = 1;\n  }\n  return simpleIterationProgress;\n}\nfunction calculateCurrentIteration(phase, iterations, simpleIterationProgress, overallProgress) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n  if (phase === PhaseAfter && iterations === Infinity) {\n    return Infinity;\n  }\n  if (simpleIterationProgress === 1) {\n    return Math.floor(overallProgress) - 1;\n  }\n  return Math.floor(overallProgress);\n}\nfunction calculateDirectedProgress(playbackDirection, currentIteration, simpleIterationProgress) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n  var currentDirection = playbackDirection;\n  if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n    var d = currentIteration;\n    if (playbackDirection === 'alternate-reverse') {\n      d += 1;\n    }\n    currentDirection = 'normal';\n    if (d !== Infinity && d % 2 !== 0) {\n      currentDirection = 'reverse';\n    }\n  }\n  if (currentDirection === 'normal') {\n    return simpleIterationProgress;\n  }\n  return 1 - simpleIterationProgress;\n}\nfunction calculateIterationProgress(activeDuration, localTime, timing) {\n  var phase = calculatePhase(activeDuration, localTime, timing);\n  var activeTime = calculateActiveTime(activeDuration, timing.fill, localTime, phase, timing.delay);\n  if (activeTime === null) return null;\n  var duration = timing.duration === 'auto' ? 0 : timing.duration;\n  var overallProgress = calculateOverallProgress(duration, phase, timing.iterations, activeTime, timing.iterationStart);\n  var simpleIterationProgress = calculateSimpleIterationProgress(overallProgress, timing.iterationStart, phase, timing.iterations, activeTime, duration);\n  var currentIteration = calculateCurrentIteration(phase, timing.iterations, simpleIterationProgress, overallProgress);\n  var directedProgress = calculateDirectedProgress(timing.direction, currentIteration, simpleIterationProgress);\n  timing.currentIteration = currentIteration;\n  timing.progress = directedProgress;\n\n  // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n  // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n  return timing.easingFunction(directedProgress);\n}\nfunction convertEffectInput(keyframes, timing, target) {\n  var propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(keyframes, timing);\n  var interpolations = makeInterpolations(propertySpecificKeyframeGroups, target);\n  return function (target, fraction) {\n    if (fraction !== null) {\n      interpolations.filter(function (interpolation) {\n        return fraction >= interpolation.applyFrom && fraction < interpolation.applyTo;\n      }).forEach(function (interpolation) {\n        var offsetFraction = fraction - interpolation.startOffset;\n        var localDuration = interpolation.endOffset - interpolation.startOffset;\n        var scaledLocalTime = localDuration === 0 ? 0 : offsetFraction / localDuration;\n        // apply updated attribute\n        target.setAttribute(interpolation.property, interpolation.interpolation(scaledLocalTime), false, false // disable memoize\n        );\n\n        // if (interpolation.property === 'visibility') {\n        //   console.log(\n        //     scaledLocalTime,\n        //     interpolation.interpolation(scaledLocalTime),\n        //   );\n        // }\n      });\n    } else {\n      for (var property in propertySpecificKeyframeGroups) if (isNotReservedWord(property)) {\n        // clear attribute\n        target.setAttribute(property, null);\n      }\n    }\n  };\n}\nfunction isNotReservedWord(member) {\n  return member !== 'offset' && member !== 'easing' && member !== 'composite' && member !== 'computedOffset';\n}\nfunction makePropertySpecificKeyframeGroups(keyframes, timing) {\n  var propertySpecificKeyframeGroups = {};\n  for (var i = 0; i < keyframes.length; i++) {\n    for (var member in keyframes[i]) {\n      if (isNotReservedWord(member)) {\n        var propertySpecificKeyframe = {\n          offset: keyframes[i].offset,\n          computedOffset: keyframes[i].computedOffset,\n          easing: keyframes[i].easing,\n          easingFunction: parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n          value: keyframes[i][member]\n        };\n        propertySpecificKeyframeGroups[member] = propertySpecificKeyframeGroups[member] || [];\n        propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n      }\n    }\n  }\n  return propertySpecificKeyframeGroups;\n}\nfunction makeInterpolations(propertySpecificKeyframeGroups, target) {\n  var interpolations = [];\n  for (var groupName in propertySpecificKeyframeGroups) {\n    var keyframes = propertySpecificKeyframeGroups[groupName];\n    for (var i = 0; i < keyframes.length - 1; i++) {\n      var startIndex = i;\n      var endIndex = i + 1;\n      var startOffset = keyframes[startIndex].computedOffset;\n      var endOffset = keyframes[endIndex].computedOffset;\n      var applyFrom = startOffset;\n      var applyTo = endOffset;\n      if (i === 0) {\n        applyFrom = -Infinity;\n        if (endOffset === 0) {\n          endIndex = startIndex;\n        }\n      }\n      if (i === keyframes.length - 2) {\n        applyTo = Infinity;\n        if (startOffset === 1) {\n          startIndex = endIndex;\n        }\n      }\n      interpolations.push({\n        applyFrom: applyFrom,\n        applyTo: applyTo,\n        startOffset: keyframes[startIndex].computedOffset,\n        endOffset: keyframes[endIndex].computedOffset,\n        easingFunction: keyframes[startIndex].easingFunction,\n        property: groupName,\n        interpolation: propertyInterpolation(groupName, keyframes[startIndex].value, keyframes[endIndex].value, target)\n      });\n    }\n  }\n  interpolations.sort(function (leftInterpolation, rightInterpolation) {\n    return leftInterpolation.startOffset - rightInterpolation.startOffset;\n  });\n  return interpolations;\n}\nvar InterpolationFactory = function InterpolationFactory(from, to, convertToString) {\n  return function (f) {\n    var interpolated = interpolate(from, to, f);\n    return isNumber(interpolated) ? interpolated : convertToString(interpolated);\n  };\n};\nfunction propertyInterpolation(property, left, right, target) {\n  var metadata = propertyMetadataCache[property];\n  if (metadata && metadata.syntax && metadata[\"int\"]) {\n    var propertyHandler = runtime.styleValueRegistry.getPropertySyntax(metadata.syntax);\n    if (propertyHandler) {\n      var parser = propertyHandler.parser;\n      var usedLeft = parser ? parser(left, target) : left;\n      var usedRight = parser ? parser(right, target) : right;\n\n      // merger [left, right, n2string()]\n      var interpolationArgs = propertyHandler.mixer(usedLeft, usedRight, target);\n      if (interpolationArgs) {\n        var interp = InterpolationFactory.apply(void 0, _toConsumableArray(interpolationArgs));\n        return function (t) {\n          if (t === 0) return left;\n          if (t === 1) return right;\n          return interp(t);\n        };\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return InterpolationFactory(false, true, function (bool) {\n    return bool ? right : left;\n  });\n}\n\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(from, to, f) {\n  if (typeof from === 'number' && typeof to === 'number') {\n    return from * (1 - f) + to * f;\n  }\n  if (typeof from === 'boolean' && typeof to === 'boolean' || typeof from === 'string' && typeof to === 'string' // skip string, eg. path ['M', 10, 10]\n  ) {\n    return f < 0.5 ? from : to;\n  }\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // interpolate arrays/matrix\n    var fromLength = from.length;\n    var toLength = to.length;\n    var length = Math.max(fromLength, toLength);\n    var r = [];\n    for (var i = 0; i < length; i++) {\n      r.push(interpolate(from[i < fromLength ? i : fromLength - 1], to[i < toLength ? i : toLength - 1], f));\n    }\n    return r;\n  }\n  throw new Error(\"Mismatched interpolation arguments \".concat(from, \":\").concat(to));\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nvar AnimationEffectTiming = /*#__PURE__*/function () {\n  function AnimationEffectTiming() {\n    _classCallCheck(this, AnimationEffectTiming);\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n     */\n    this.delay = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n     */\n    this.direction = 'normal';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n     */\n    this.duration = 'auto';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n     */\n    this._easing = 'linear';\n    this.easingFunction = linear;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n     */\n    this.endDelay = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n     */\n    this.fill = 'auto';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n     */\n    this.iterationStart = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n     */\n    this.iterations = 1;\n    this.currentIteration = null;\n    this.progress = null;\n  }\n  return _createClass(AnimationEffectTiming, [{\n    key: \"easing\",\n    get: function get() {\n      return this._easing;\n    },\n    set: function set(value) {\n      this.easingFunction = parseEasingFunction(value);\n      this._easing = value;\n    }\n  }]);\n}();\n\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput) {\n  var normalizedEffectInput = [];\n  for (var property in effectInput) {\n    // skip reserved props\n    if (property in ['easing', 'offset', 'composite']) {\n      continue;\n    }\n\n    // @ts-ignore\n    var values = effectInput[property];\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n    var numKeyframes = values.length;\n    for (var i = 0; i < numKeyframes; i++) {\n      if (!normalizedEffectInput[i]) {\n        var keyframe = {};\n        if ('offset' in effectInput) {\n          keyframe.offset = Number(effectInput.offset);\n        }\n        if ('easing' in effectInput) {\n          // @ts-ignore\n          keyframe.easing = effectInput.easing;\n        }\n        if ('composite' in effectInput) {\n          // @ts-ignore\n          keyframe.composite = effectInput.composite;\n        }\n        normalizedEffectInput[i] = keyframe;\n      }\n      if (values[i] !== undefined && values[i] !== null) {\n        normalizedEffectInput[i][property] = values[i];\n      }\n    }\n  }\n  normalizedEffectInput.sort(function (a, b) {\n    return (a.computedOffset || 0) - (b.computedOffset || 0);\n  });\n  return normalizedEffectInput;\n}\nfunction normalizeKeyframes(effectInput, timing) {\n  if (effectInput === null) {\n    return [];\n  }\n  if (!Array.isArray(effectInput)) {\n    effectInput = convertToArrayForm(effectInput);\n  }\n  var keyframes = effectInput.map(function (originalKeyframe) {\n    var keyframe = {};\n    if (timing !== null && timing !== void 0 && timing.composite) {\n      // This will be auto if the composite operation specified on the effect is being used.\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n      keyframe.composite = 'auto';\n    }\n    for (var member in originalKeyframe) {\n      var memberValue = originalKeyframe[member];\n      if (member === 'offset') {\n        if (memberValue !== null) {\n          memberValue = Number(memberValue);\n          if (!isFinite(memberValue)) throw new Error('Keyframe offsets must be numbers.');\n          if (memberValue < 0 || memberValue > 1) throw new Error('Keyframe offsets must be between 0 and 1.');\n          keyframe.computedOffset = memberValue;\n        }\n      } else if (member === 'composite') {\n        // TODO: Support add & accumulate in KeyframeEffect.composite\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n        if (['replace', 'add', 'accumulate', 'auto'].indexOf(memberValue) === -1) {\n          throw new Error(\"\".concat(memberValue, \" compositing is not supported\"));\n        }\n      } else ;\n\n      // assign to keyframe, no need to parse shorthand value\n      keyframe[member] = memberValue;\n    }\n    if (keyframe.offset === undefined) {\n      keyframe.offset = null;\n    }\n    if (keyframe.easing === undefined) {\n      // override with timing.easing\n      keyframe.easing = (timing === null || timing === void 0 ? void 0 : timing.easing) || 'linear';\n    }\n    if (keyframe.composite === undefined) {\n      keyframe.composite = 'auto';\n    }\n    return keyframe;\n  });\n  var everyFrameHasOffset = true;\n  var previousOffset = -Infinity;\n  for (var i = 0; i < keyframes.length; i++) {\n    var offset = keyframes[i].offset;\n    if (!isNil(offset)) {\n      if (offset < previousOffset) {\n        throw new TypeError('Keyframes are not loosely sorted by offset. Sort or specify offsets.');\n      }\n      previousOffset = offset;\n    } else {\n      everyFrameHasOffset = false;\n    }\n  }\n  keyframes = keyframes.filter(function (keyframe) {\n    return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n  });\n  function spaceKeyframes() {\n    var _keyframes$offset;\n    var _keyframes = keyframes,\n      length = _keyframes.length;\n    keyframes[length - 1].computedOffset = Number((_keyframes$offset = keyframes[length - 1].offset) !== null && _keyframes$offset !== void 0 ? _keyframes$offset : 1);\n    if (length > 1) {\n      var _keyframes$0$offset;\n      keyframes[0].computedOffset = Number((_keyframes$0$offset = keyframes[0].offset) !== null && _keyframes$0$offset !== void 0 ? _keyframes$0$offset : 0);\n    }\n    var previousIndex = 0;\n    var previousOffset = Number(keyframes[0].computedOffset);\n    for (var _i = 1; _i < length; _i++) {\n      var _offset = keyframes[_i].computedOffset;\n      if (!isNil(_offset) && !isNil(previousOffset)) {\n        for (var j = 1; j < _i - previousIndex; j++) keyframes[previousIndex + j].computedOffset = previousOffset + (Number(_offset) - previousOffset) * j / (_i - previousIndex);\n        previousIndex = _i;\n        previousOffset = Number(_offset);\n      }\n    }\n  }\n  if (!everyFrameHasOffset) spaceKeyframes();\n  return keyframes;\n}\nvar fills = 'backwards|forwards|both|none'.split('|');\nvar directions = 'reverse|alternate|alternate-reverse'.split('|');\nfunction makeTiming(timingInput, forGroup) {\n  var timing = new AnimationEffectTiming();\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    Object.keys(timingInput).forEach(function (property) {\n      if (timingInput[property] !== undefined && timingInput[property] !== null && timingInput[property] !== 'auto') {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (typeof timingInput[property] !== 'number' || isNaN(timingInput[property])) {\n            return;\n          }\n        }\n        if (property === 'fill' && fills.indexOf(timingInput[property]) === -1) {\n          return;\n        }\n        if (property === 'direction' && directions.indexOf(timingInput[property]) === -1) {\n          return;\n        }\n        // @ts-ignore\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n  return timing;\n}\nfunction normalizeTimingInput(timingInput, forGroup) {\n  timingInput = numericTimingToObject(timingInput !== null && timingInput !== void 0 ? timingInput : {\n    duration: 'auto'\n  });\n  return makeTiming(timingInput, forGroup);\n}\nfunction numericTimingToObject(timingInput) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = {\n        duration: 'auto'\n      };\n    } else {\n      timingInput = {\n        duration: timingInput\n      };\n    }\n  }\n  return timingInput;\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nvar KeyframeEffect = /*#__PURE__*/function () {\n  // pseudoElement: string | null;\n\n  function KeyframeEffect(target, effectInput, timingInput) {\n    var _this = this;\n    _classCallCheck(this, KeyframeEffect);\n    this.composite = 'replace';\n    this.iterationComposite = 'replace';\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(0, this.timing.delay + this.timing.activeDuration + this.timing.endDelay);\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(this.normalizedKeyframes, this.timing, this.target);\n\n    // 不支持 proxy 时降级成 this.timing\n    var Proxy = runtime.globalThis.Proxy;\n    this.computedTiming = Proxy ? new Proxy(this.timing, {\n      get: function get(target, prop) {\n        if (prop === 'duration') {\n          return target.duration === 'auto' ? 0 : target.duration;\n        }\n        if (prop === 'fill') {\n          return target.fill === 'auto' ? 'none' : target.fill;\n        }\n        if (prop === 'localTime') {\n          return _this.animation && _this.animation.currentTime || null;\n        }\n        if (prop === 'currentIteration') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n          return target.currentIteration || 0;\n        }\n        if (prop === 'progress') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n          return target.progress || 0;\n        }\n        return target[prop];\n      },\n      set: function set() {\n        return true;\n      }\n    }) : this.timing;\n  }\n  return _createClass(KeyframeEffect, [{\n    key: \"applyInterpolations\",\n    value: function applyInterpolations() {\n      this.interpolations(this.target, Number(this.timeFraction));\n    }\n  }, {\n    key: \"update\",\n    value: function update(localTime) {\n      if (localTime === null) {\n        return false;\n      }\n      this.timeFraction = calculateIterationProgress(this.timing.activeDuration, localTime, this.timing);\n      return this.timeFraction !== null;\n    }\n  }, {\n    key: \"getKeyframes\",\n    value: function getKeyframes() {\n      return this.normalizedKeyframes;\n    }\n  }, {\n    key: \"setKeyframes\",\n    value: function setKeyframes(keyframes) {\n      this.normalizedKeyframes = normalizeKeyframes(keyframes);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n     */\n  }, {\n    key: \"getComputedTiming\",\n    value: function getComputedTiming() {\n      return this.computedTiming;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n     */\n  }, {\n    key: \"getTiming\",\n    value: function getTiming() {\n      return this.timing;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n     */\n  }, {\n    key: \"updateTiming\",\n    value: function updateTiming(timing) {\n      var _this2 = this;\n      Object.keys(timing || {}).forEach(function (name) {\n        _this2.timing[name] = timing[name];\n      });\n    }\n  }]);\n}();\nfunction compareAnimations(leftAnimation, rightAnimation) {\n  return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nvar AnimationTimeline = /*#__PURE__*/function () {\n  function AnimationTimeline(document) {\n    var _this = this;\n    _classCallCheck(this, AnimationTimeline);\n    /**\n     * all active animations\n     */\n    this.animations = [];\n    this.ticking = false;\n    this.timelineTicking = false;\n    this.hasRestartedThisFrame = false;\n    this.animationsWithPromises = [];\n    this.inTick = false;\n    this.pendingEffects = [];\n    this.currentTime = null;\n    this.rafId = 0;\n    this.rafCallbacks = [];\n    this.webAnimationsNextTick = function (t) {\n      _this.currentTime = t;\n      _this.discardAnimations();\n      if (_this.animations.length === 0) {\n        _this.timelineTicking = false;\n      } else {\n        _this.requestAnimationFrame(_this.webAnimationsNextTick);\n      }\n    };\n    this.processRafCallbacks = function (t) {\n      var processing = _this.rafCallbacks;\n      _this.rafCallbacks = [];\n      if (t < Number(_this.currentTime)) t = Number(_this.currentTime);\n      _this.animations.sort(compareAnimations);\n      _this.animations = _this.tick(t, true, _this.animations)[0];\n      processing.forEach(function (entry) {\n        entry[1](t);\n      });\n      _this.applyPendingEffects();\n    };\n    this.document = document;\n  }\n  return _createClass(AnimationTimeline, [{\n    key: \"getAnimations\",\n    value: function getAnimations() {\n      this.discardAnimations();\n      return this.animations.slice();\n    }\n  }, {\n    key: \"isTicking\",\n    value: function isTicking() {\n      return this.inTick;\n    }\n  }, {\n    key: \"play\",\n    value: function play(target, keyframes, options) {\n      var effect = new KeyframeEffect(target, keyframes, options);\n      var animation = new Animation(effect, this);\n      this.animations.push(animation);\n      this.restartWebAnimationsNextTick();\n      animation.updatePromises();\n      animation.play();\n      animation.updatePromises();\n      return animation;\n    }\n\n    // RAF is supposed to be the last script to occur before frame rendering but not\n    // all browsers behave like this. This function is for synchonously updating an\n    // animation's effects whenever its state is mutated by script to work around\n    // incorrect script execution ordering by the browser.\n  }, {\n    key: \"applyDirtiedAnimation\",\n    value: function applyDirtiedAnimation(animation) {\n      var _this2 = this;\n      if (this.inTick) {\n        return;\n      }\n      // update active animations in displayobject\n      animation.markTarget();\n      var animations = animation.targetAnimations();\n      animations.sort(compareAnimations);\n\n      // clear inactive animations\n      var inactiveAnimations = this.tick(Number(this.currentTime), false, animations.slice())[1];\n      inactiveAnimations.forEach(function (animation) {\n        var index = _this2.animations.indexOf(animation);\n        if (index !== -1) {\n          _this2.animations.splice(index, 1);\n        }\n      });\n      this.applyPendingEffects();\n    }\n  }, {\n    key: \"restart\",\n    value: function restart() {\n      if (!this.ticking) {\n        this.ticking = true;\n        this.requestAnimationFrame(function () {});\n        this.hasRestartedThisFrame = true;\n      }\n      return this.hasRestartedThisFrame;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.document.defaultView.cancelAnimationFrame(this.frameId);\n    }\n  }, {\n    key: \"applyPendingEffects\",\n    value: function applyPendingEffects() {\n      this.pendingEffects.forEach(function (effect) {\n        effect === null || effect === void 0 || effect.applyInterpolations();\n      });\n      this.pendingEffects = [];\n    }\n  }, {\n    key: \"updateAnimationsPromises\",\n    value: function updateAnimationsPromises() {\n      this.animationsWithPromises = this.animationsWithPromises.filter(function (animation) {\n        return animation.updatePromises();\n      });\n    }\n  }, {\n    key: \"discardAnimations\",\n    value: function discardAnimations() {\n      this.updateAnimationsPromises();\n      this.animations = this.animations.filter(function (animation) {\n        return animation.playState !== 'finished' && animation.playState !== 'idle';\n      });\n    }\n  }, {\n    key: \"restartWebAnimationsNextTick\",\n    value: function restartWebAnimationsNextTick() {\n      if (!this.timelineTicking) {\n        this.timelineTicking = true;\n        this.requestAnimationFrame(this.webAnimationsNextTick);\n      }\n    }\n  }, {\n    key: \"rAF\",\n    value: function rAF(f) {\n      var id = this.rafId++;\n      if (this.rafCallbacks.length === 0) {\n        this.frameId = this.document.defaultView.requestAnimationFrame(this.processRafCallbacks);\n      }\n      this.rafCallbacks.push([id, f]);\n      return id;\n    }\n  }, {\n    key: \"requestAnimationFrame\",\n    value: function requestAnimationFrame(f) {\n      var _this3 = this;\n      return this.rAF(function (x) {\n        _this3.updateAnimationsPromises();\n        f(x);\n        _this3.updateAnimationsPromises();\n      });\n    }\n  }, {\n    key: \"tick\",\n    value: function tick(t, isAnimationFrame, updatingAnimations) {\n      var _this4 = this,\n        _this$pendingEffects,\n        _this$pendingEffects2;\n      this.inTick = true;\n      this.hasRestartedThisFrame = false;\n      this.currentTime = t;\n      this.ticking = false;\n      var newPendingClears = [];\n      var newPendingEffects = [];\n      var activeAnimations = [];\n      var inactiveAnimations = [];\n      updatingAnimations.forEach(function (animation) {\n        animation.tick(t, isAnimationFrame);\n        if (!animation._inEffect) {\n          newPendingClears.push(animation.effect);\n          animation.unmarkTarget();\n        } else {\n          newPendingEffects.push(animation.effect);\n          animation.markTarget();\n        }\n        if (animation._needsTick) _this4.ticking = true;\n        var alive = animation._inEffect || animation._needsTick;\n        animation._inTimeline = alive;\n        if (alive) {\n          activeAnimations.push(animation);\n        } else {\n          inactiveAnimations.push(animation);\n        }\n      });\n      (_this$pendingEffects = this.pendingEffects).push.apply(_this$pendingEffects, newPendingClears);\n      (_this$pendingEffects2 = this.pendingEffects).push.apply(_this$pendingEffects2, newPendingEffects);\n      if (this.ticking) this.requestAnimationFrame(function () {});\n      this.inTick = false;\n      return [activeAnimations, inactiveAnimations];\n    }\n  }]);\n}();\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\nexport { Animation, AnimationEvent, AnimationTimeline, EasingFunctions, KeyframeEffect, compareAnimations, makeTiming, normalizeKeyframes, normalizeTimingInput, numericTimingToObject };","map":{"version":3,"names":["AnimationEvent","_FederatedEvent","manager","target","currentTime","timelineTime","_this","_classCallCheck","_callSuper","type","bubbles","currentTarget","defaultPrevented","eventPhase","AT_TARGET","timeStamp","Date","now","_inherits","_createClass","FederatedEvent","sequenceNumber","Animation","effect","timeline","_this$effect","currentTimePending","_idle","_paused","_finishedFlag","_currentTime","_playbackRate","_inTimeline","animation","id","concat","_inEffect","update","_totalDuration","Number","getComputedTiming","endTime","_holdTime","oldPlayState","updatePromises","key","get","_startTime","playbackRate","_isFinished","readyPromise","animationsWithPromises","indexOf","push","Promise","resolve","reject","resolveReadyPromise","rejectReadyPromise","Error","pending","_this2","finishedPromise","resolveFinishedPromise","rejectFinishedPromise","playState","set","newTime","isNaN","restart","_this$timeline","tickCurrentTime","applyDirtiedAnimation","value","oldCurrentTime","startTime","ensureAlive","_this$effect$target","destroyed","undefined","newPlayState","play","rewind","animations","pause","finish","cancel","_this3","oncancel","event","setTimeout","reverse","updatePlaybackRate","targetAnimations","_this$effect2","getAnimations","markTarget","unmarkTarget","index","splice","tick","isAnimationFrame","fireEvents","Infinity","persist","ERROR_MSG_METHOD_NOT_IMPLEMENTED","addEventListener","listener","options","removeEventListener","dispatchEvent","commitStyles","_this$effect3","_this$effect4","ignoreLimit","baseTime","_this4","onfinish","onframe","_event","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","i","Math","abs","newtonRaphsonIterate","aGuessT","currentSlope","bezier","mY1","mY2","t","sampleValues","Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","convertToDash","str","replace","letter","toLowerCase","charAt","substring","Quad","pow","Cubic","Quart","Quint","Expo","Sine","cos","PI","Circ","sqrt","Back","Bounce","pow2","b","Elastic","params","arguments","length","_params","_slicedToArray","_params$","amplitude","_params$2","period","a","clamp","p","sin","asin","Spring","duration","_params2","_params2$","mass","_params2$2","stiffness","_params2$3","damping","_params2$4","velocity","w0","zeta","wd","progress","exp","Steps","_ref","_ref2","_ref2$","steps","trunc","ceil","floor","Bezier","_params3","easein","EaseOut","ease","EaseInOut","EaseOutIn","EasingFunctions","stepStart","stepEnd","linear","out","spring","complexEasingSyntax","trim","getEasingFunction","x","Start","Middle","End","step","count","pos","stepSize","numberString","cubicBezierRe","RegExp","step1Re","step2Re","parseEasingFunction","normalizedEasing","cubicData","exec","apply","_toConsumableArray","slice","map","step1Data","step2Data","start","middle","end","calculateActiveDuration","timing","repeatedDuration","_timing$iterations","iterations","PhaseNone","PhaseBefore","PhaseAfter","PhaseActive","calculatePhase","activeDuration","localTime","min","delay","endDelay","calculateActiveTime","fillMode","phase","calculateOverallProgress","iterationDuration","activeTime","iterationStart","overallProgress","calculateSimpleIterationProgress","simpleIterationProgress","calculateCurrentIteration","calculateDirectedProgress","playbackDirection","currentIteration","currentDirection","d","calculateIterationProgress","fill","directedProgress","direction","easingFunction","convertEffectInput","keyframes","propertySpecificKeyframeGroups","makePropertySpecificKeyframeGroups","interpolations","makeInterpolations","fraction","filter","interpolation","applyFrom","applyTo","forEach","offsetFraction","startOffset","localDuration","endOffset","scaledLocalTime","setAttribute","property","isNotReservedWord","member","propertySpecificKeyframe","offset","computedOffset","easing","groupName","startIndex","endIndex","propertyInterpolation","sort","leftInterpolation","rightInterpolation","InterpolationFactory","from","to","convertToString","f","interpolated","interpolate","isNumber","left","right","metadata","propertyMetadataCache","syntax","propertyHandler","runtime","styleValueRegistry","getPropertySyntax","parser","usedLeft","usedRight","interpolationArgs","mixer","interp","bool","isArray","fromLength","toLength","max","r","AnimationEffectTiming","_easing","convertToArrayForm","effectInput","normalizedEffectInput","values","numKeyframes","keyframe","composite","normalizeKeyframes","originalKeyframe","memberValue","isFinite","everyFrameHasOffset","previousOffset","isNil","TypeError","spaceKeyframes","_keyframes$offset","_keyframes","_keyframes$0$offset","previousIndex","_i","_offset","j","fills","split","directions","makeTiming","timingInput","forGroup","Object","keys","normalizeTimingInput","numericTimingToObject","KeyframeEffect","iterationComposite","normalizedKeyframes","Proxy","globalThis","computedTiming","prop","applyInterpolations","timeFraction","getKeyframes","setKeyframes","getTiming","updateTiming","name","compareAnimations","leftAnimation","rightAnimation","AnimationTimeline","document","ticking","timelineTicking","hasRestartedThisFrame","inTick","pendingEffects","rafId","rafCallbacks","webAnimationsNextTick","discardAnimations","requestAnimationFrame","processRafCallbacks","processing","entry","applyPendingEffects","isTicking","restartWebAnimationsNextTick","inactiveAnimations","destroy","defaultView","cancelAnimationFrame","frameId","updateAnimationsPromises","rAF","updatingAnimations","_this$pendingEffects","_this$pendingEffects2","newPendingClears","newPendingEffects","activeAnimations","_needsTick","alive","EasingFunction"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/dom/AnimationEvent.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/dom/Animation.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/utils/bezier-easing.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/utils/custom-easing.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/utils/animation.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/utils/interpolation.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/dom/AnimationEffectTiming.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/dom/KeyframeList.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/dom/KeyframeEffect.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/dom/AnimationTimeline.ts","/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g-web-animations-api/src/index.ts"],"sourcesContent":["import type { EventService } from '@antv/g-lite';\nimport { FederatedEvent } from '@antv/g-lite';\nimport type { Animation } from './Animation';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nexport class AnimationEvent\n  extends FederatedEvent\n  implements AnimationPlaybackEvent\n{\n  constructor(\n    manager: EventService | null,\n    target: Animation,\n    public currentTime: number | null,\n    public timelineTime: number,\n  ) {\n    super(manager);\n\n    // @ts-ignore\n    this.target = target;\n    this.type = 'finish';\n    this.bubbles = false;\n    // @ts-ignore\n    this.currentTarget = target;\n    this.defaultPrevented = false;\n    this.eventPhase = this.AT_TARGET;\n    this.timeStamp = Date.now();\n    this.currentTime = currentTime;\n    this.timelineTime = timelineTime;\n  }\n}\n","import type { DisplayObject, IAnimation } from '@antv/g-lite';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '@antv/g-lite';\nimport { AnimationEvent } from './AnimationEvent';\nimport type { AnimationTimeline } from './AnimationTimeline';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\nlet sequenceNumber = 0;\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nexport class Animation implements IAnimation {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/effect\n   */\n  effect: KeyframeEffect;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/timeline\n   */\n  timeline: AnimationTimeline;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/id\n   */\n  id: string;\n\n  // animation: InternalAnimation | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n   */\n  get pending() {\n    return (\n      (this._startTime === null && !this._paused && this.playbackRate !== 0) ||\n      this.currentTimePending\n    );\n  }\n  private currentTimePending = false;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n   */\n  // playState: AnimationPlayState;\n  private _idle = true;\n  private _paused = false;\n  private _finishedFlag = true;\n  get playState(): AnimationPlayState {\n    if (this._idle) return 'idle';\n    if (this._isFinished) return 'finished';\n    if (this._paused) return 'paused';\n    return 'running';\n  }\n\n  /**\n   * record previos state\n   */\n  private oldPlayState: AnimationPlayState | 'pending';\n\n  private _holdTime: number;\n\n  private readyPromise: Promise<any> | undefined;\n  private finishedPromise: Promise<any> | undefined;\n  private resolveReadyPromise: Function;\n  private rejectReadyPromise: Function;\n  private resolveFinishedPromise: Function;\n  private rejectFinishedPromise: Function;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n   * @example\n    animation.pause();\n    animation.ready.then(function() {\n      // Displays 'running'\n      alert(animation.playState);\n    });\n    animation.play();\n   */\n  get ready() {\n    if (!this.readyPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.readyPromise = new Promise((resolve, reject) => {\n        this.resolveReadyPromise = () => {\n          resolve(this);\n        };\n        this.rejectReadyPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (!this.pending) {\n        this.resolveReadyPromise();\n      }\n    }\n    return this.readyPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n   * @example\n    Promise.all(\n      elem.getAnimations().map(\n        function(animation) {\n          return animation.finished\n        }\n      )\n    ).then(\n      function() {\n        return elem.remove();\n      }\n    );\n   */\n  get finished() {\n    if (!this.finishedPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.finishedPromise = new Promise((resolve, reject) => {\n        this.resolveFinishedPromise = () => {\n          resolve(this);\n        };\n        this.rejectFinishedPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (this.playState === 'finished') {\n        this.resolveFinishedPromise();\n      }\n    }\n    return this.finishedPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/onfinish\n   */\n  onfinish: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/oncancel\n   */\n  oncancel: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * get called after each frame when running\n   */\n  onframe: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n   */\n  private _currentTime = 0;\n  get currentTime(): number | null {\n    this.updatePromises();\n    return this._idle || this.currentTimePending ? null : this._currentTime;\n  }\n  set currentTime(newTime: number | null) {\n    newTime = Number(newTime);\n    if (isNaN(newTime)) return;\n    this.timeline.restart();\n    if (!this._paused && this._startTime !== null) {\n      this._startTime =\n        Number(this.timeline?.currentTime) - newTime / this.playbackRate;\n    }\n    this.currentTimePending = false;\n    if (this._currentTime === newTime) {\n      return;\n    }\n    if (this._idle) {\n      this._idle = false;\n      this._paused = true;\n    }\n    this.tickCurrentTime(newTime, true);\n    this.timeline.applyDirtiedAnimation(this);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/startTime\n   */\n  private _startTime: number | null;\n  get startTime() {\n    return this._startTime;\n  }\n  set startTime(newTime: number | null) {\n    if (newTime !== null) {\n      this.updatePromises();\n      newTime = Number(newTime);\n      if (isNaN(newTime)) return;\n      if (this._paused || this._idle) return;\n      this._startTime = newTime;\n      this.tickCurrentTime(\n        (Number(this.timeline.currentTime) - this._startTime) *\n          this.playbackRate,\n      );\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n    }\n  }\n\n  private _playbackRate = 1;\n  get playbackRate() {\n    return this._playbackRate;\n  }\n  set playbackRate(value: number) {\n    if (value === this._playbackRate) {\n      return;\n    }\n\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n    this._playbackRate = value;\n    this.startTime = null;\n    if (this.playState !== 'paused' && this.playState !== 'idle') {\n      this._finishedFlag = false;\n      this._idle = false;\n      this.ensureAlive();\n      this.timeline.applyDirtiedAnimation(this);\n    }\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  get _isFinished() {\n    return (\n      !this._idle &&\n      ((this._playbackRate > 0 &&\n        Number(this._currentTime) >= this._totalDuration) ||\n        (this._playbackRate < 0 && Number(this._currentTime) <= 0))\n    );\n  }\n\n  _totalDuration: number;\n  get totalDuration() {\n    return this._totalDuration;\n  }\n\n  _inEffect: boolean;\n  _inTimeline = true;\n  get _needsTick() {\n    return this.pending || this.playState === 'running' || !this._finishedFlag;\n  }\n\n  constructor(effect: KeyframeEffect, timeline: AnimationTimeline) {\n    this.effect = effect;\n    effect.animation = this;\n    this.timeline = timeline;\n    this.id = `${sequenceNumber++}`;\n\n    this._inEffect = !!this.effect.update(0);\n    this._totalDuration = Number(this.effect?.getComputedTiming().endTime);\n    this._holdTime = 0;\n    this._paused = false;\n    this.oldPlayState = 'idle';\n    this.updatePromises();\n  }\n\n  /**\n   * state machine,\n   * resolve/reject ready/finished Promise according to current state\n   */\n  updatePromises() {\n    if (this.effect.target?.destroyed) {\n      this.readyPromise = undefined;\n      this.finishedPromise = undefined;\n      return false;\n    }\n    const { oldPlayState } = this;\n    const newPlayState = this.pending ? 'pending' : this.playState;\n    if (this.readyPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectReadyPromise();\n        this.readyPromise = undefined;\n      } else if (oldPlayState === 'pending') {\n        this.resolveReadyPromise();\n      } else if (newPlayState === 'pending') {\n        this.readyPromise = undefined;\n      }\n    }\n    if (this.finishedPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectFinishedPromise();\n        this.finishedPromise = undefined;\n      } else if (newPlayState === 'finished') {\n        this.resolveFinishedPromise();\n      } else if (oldPlayState === 'finished') {\n        this.finishedPromise = undefined;\n      }\n    }\n    this.oldPlayState = newPlayState;\n    return this.readyPromise || this.finishedPromise;\n  }\n\n  play() {\n    this.updatePromises();\n    this._paused = false;\n    if (this._isFinished || this._idle) {\n      this.rewind();\n      this._startTime = null;\n    }\n    this._finishedFlag = false;\n    this._idle = false;\n    this.ensureAlive();\n    this.timeline.applyDirtiedAnimation(this);\n\n    if (this.timeline.animations.indexOf(this) === -1) {\n      this.timeline.animations.push(this);\n    }\n\n    this.updatePromises();\n  }\n\n  pause() {\n    this.updatePromises();\n    if (this.currentTime) {\n      this._holdTime = this.currentTime;\n    }\n\n    if (!this._isFinished && !this._paused && !this._idle) {\n      this.currentTimePending = true;\n    } else if (this._idle) {\n      this.rewind();\n      this._idle = false;\n    }\n    this._startTime = null;\n    this._paused = true;\n\n    this.updatePromises();\n  }\n\n  finish() {\n    this.updatePromises();\n    if (this._idle) return;\n    this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n    this._startTime = this._totalDuration - this.currentTime;\n    this.currentTimePending = false;\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n  }\n\n  cancel() {\n    this.updatePromises();\n    if (!this._inEffect) return;\n    this._inEffect = false;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    this._currentTime = 0;\n    this._startTime = null;\n    this.effect.update(null);\n    // effects are invalid after cancellation as the animation state\n    // needs to un-apply.\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n\n    /**\n     * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n     * 2. Let current finished promise be a new promise\n     * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n     */\n    // if (this.finishedPromise) {\n    //   this.rejectFinishedPromise();\n    //   this.finishedPromise = undefined;\n    // }\n\n    if (this.oncancel) {\n      const event = new AnimationEvent(\n        null,\n        this,\n        this.currentTime,\n        null,\n      ) as AnimationPlaybackEvent;\n      setTimeout(() => {\n        this.oncancel(event);\n      });\n    }\n  }\n\n  reverse() {\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n\n    this.playbackRate *= -1;\n    this.play();\n\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n   */\n  updatePlaybackRate(playbackRate: number): void {\n    this.playbackRate = playbackRate;\n  }\n\n  targetAnimations() {\n    const target = this.effect?.target as unknown as DisplayObject;\n    return target.getAnimations();\n  }\n  markTarget() {\n    const animations = this.targetAnimations();\n    if (animations.indexOf(this) === -1) {\n      animations.push(this);\n    }\n  }\n  unmarkTarget() {\n    const animations = this.targetAnimations();\n    const index = animations.indexOf(this);\n    if (index !== -1) {\n      animations.splice(index, 1);\n    }\n  }\n\n  tick(timelineTime: number, isAnimationFrame: boolean) {\n    if (!this._idle && !this._paused) {\n      if (this._startTime === null) {\n        if (isAnimationFrame) {\n          this.startTime = timelineTime - this._currentTime / this.playbackRate;\n        }\n      } else if (!this._isFinished) {\n        this.tickCurrentTime(\n          (timelineTime - this._startTime) * this.playbackRate,\n        );\n      }\n    }\n\n    if (isAnimationFrame) {\n      this.currentTimePending = false;\n      this.fireEvents(timelineTime);\n    }\n  }\n\n  private rewind() {\n    if (this.playbackRate >= 0) {\n      this.currentTime = 0;\n    } else if (this._totalDuration < Infinity) {\n      this.currentTime = this._totalDuration;\n    } else {\n      throw new Error(\n        'Unable to rewind negative playback rate animation with infinite duration',\n      );\n    }\n  }\n\n  persist(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  addEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n  addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n\n  addEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  removeEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | EventListenerOptions,\n  ): void;\n  removeEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions,\n  ): void;\n\n  removeEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  dispatchEvent(event: Event): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  onremove: ((this: Animation, ev: Event) => any) | null;\n  // replaceState: AnimationReplaceState;\n  commitStyles(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  private ensureAlive() {\n    // If an animation is playing backwards and is not fill backwards/both\n    // then it should go out of effect when it reaches the start of its\n    // active interval (currentTime === 0).\n    if (this.playbackRate < 0 && this.currentTime === 0) {\n      this._inEffect = !!this.effect?.update(-1);\n    } else {\n      this._inEffect = !!this.effect?.update(this.currentTime);\n    }\n    if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n      this._inTimeline = true;\n      this.timeline.animations.push(this);\n    }\n  }\n\n  private tickCurrentTime(newTime: number, ignoreLimit?: boolean) {\n    if (newTime !== this._currentTime) {\n      this._currentTime = newTime;\n      if (this._isFinished && !ignoreLimit) {\n        this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n      }\n      this.ensureAlive();\n    }\n  }\n\n  private fireEvents(baseTime: number) {\n    if (this._isFinished) {\n      if (!this._finishedFlag) {\n        if (this.onfinish) {\n          const event = new AnimationEvent(\n            null,\n            this,\n            this.currentTime,\n            baseTime,\n          ) as AnimationPlaybackEvent;\n          setTimeout(() => {\n            if (this.onfinish) {\n              this.onfinish(event);\n            }\n          });\n        }\n        this._finishedFlag = true;\n      }\n    } else {\n      if (this.onframe && this.playState === 'running') {\n        const event = new AnimationEvent(\n          null,\n          this,\n          this.currentTime,\n          baseTime,\n        ) as AnimationPlaybackEvent;\n        this.onframe(event);\n      }\n      this._finishedFlag = false;\n    }\n  }\n}\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nexport const NEWTON_ITERATIONS = 4;\nexport const NEWTON_MIN_SLOPE = 0.001;\nexport const SUBDIVISION_PRECISION = 0.0000001;\nexport const SUBDIVISION_MAX_ITERATIONS = 10;\n\nexport const kSplineTableSize = 11;\nexport const kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nexport const float32ArraySupported = typeof Float32Array === 'function';\n\nexport const A = (aA1: number, aA2: number) => 1.0 - 3.0 * aA2 + 3.0 * aA1;\nexport const B = (aA1: number, aA2: number) => 3.0 * aA2 - 6.0 * aA1;\nexport const C = (aA1: number) => 3.0 * aA1;\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nexport const calcBezier = (aT: number, aA1: number, aA2: number) =>\n  ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nexport const getSlope = (aT: number, aA1: number, aA2: number) =>\n  3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\nexport const binarySubdivide = (\n  aX: number,\n  aA: number,\n  aB: number,\n  mX1: number,\n  mX2: number,\n) => {\n  let currentX: number;\n  let currentT: number;\n  let i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) aB = currentT;\n    else aA = currentT;\n  } while (\n    Math.abs(currentX) > SUBDIVISION_PRECISION &&\n    ++i < SUBDIVISION_MAX_ITERATIONS\n  );\n  return currentT;\n};\n\nexport const newtonRaphsonIterate = (\n  aX: number,\n  aGuessT: number,\n  mX1: number,\n  mX2: number,\n) => {\n  for (let i = 0; i < NEWTON_ITERATIONS; ++i) {\n    const currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) return aGuessT;\n\n    const currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n\n  return aGuessT;\n};\n\nexport const bezier = (mX1: number, mY1: number, mX2: number, mY2: number) => {\n  if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1))\n    throw new Error('bezier x values must be in [0, 1] range');\n\n  if (mX1 === mY1 && mX2 === mY2) return (t: number) => t;\n\n  // Precompute samples table\n  const sampleValues = float32ArraySupported\n    ? new Float32Array(kSplineTableSize)\n    : new Array(kSplineTableSize);\n  for (let i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  const getTForX = (aX: number) => {\n    let intervalStart = 0.0;\n    let currentSample = 1;\n    const lastSample = kSplineTableSize - 1;\n\n    for (\n      ;\n      currentSample !== lastSample && sampleValues[currentSample] <= aX;\n      ++currentSample\n    )\n      intervalStart += kSampleStepSize;\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    const dist =\n      (aX - sampleValues[currentSample]) /\n      (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    const guessForT = intervalStart + dist * kSampleStepSize;\n\n    const initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE)\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    if (initialSlope === 0.0) return guessForT;\n\n    return binarySubdivide(\n      aX,\n      intervalStart,\n      intervalStart + kSampleStepSize,\n      mX1,\n      mX2,\n    );\n  };\n\n  return (t: number) => {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (t === 0 || t === 1) return t;\n    return calcBezier(getTForX(t), mY1, mY2);\n  };\n};\n","/**\n * ported from https://github.com/okikio/native/blob/master/packages/animate/src/custom-easing.ts\n */\nimport type { TypeEasingFunction } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\nimport { bezier } from './bezier-easing';\n\nexport const convertToDash = (str: string) => {\n  str = str.replace(/([A-Z])/g, (letter) => `-${letter.toLowerCase()}`);\n\n  // Remove first dash\n  return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n\nexport type TypeColor = string | number | (string | number)[];\nexport type TypeRGBAFunction = (color: TypeColor) => number[];\n\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nconst Quad: TypeEasingFunction = (t) => t ** 2;\nconst Cubic: TypeEasingFunction = (t) => t ** 3;\nconst Quart: TypeEasingFunction = (t) => t ** 4;\nconst Quint: TypeEasingFunction = (t) => t ** 5;\nconst Expo: TypeEasingFunction = (t) => t ** 6;\nconst Sine: TypeEasingFunction = (t) => 1 - Math.cos((t * Math.PI) / 2);\nconst Circ: TypeEasingFunction = (t) => 1 - Math.sqrt(1 - t * t);\nconst Back: TypeEasingFunction = (t) => t * t * (3 * t - 2);\n\nconst Bounce: TypeEasingFunction = (t) => {\n  let pow2: number;\n  let b = 4;\n  while (t < ((pow2 = 2 ** --b) - 1) / 11) {}\n  return 1 / 4 ** (3 - b) - 7.5625 * ((pow2 * 3 - 2) / 22 - t) ** 2;\n};\n\nconst Elastic: TypeEasingFunction = (t, params: (string | number)[] = []) => {\n  const [amplitude = 1, period = 0.5] = params;\n  const a = clamp(Number(amplitude), 1, 10);\n  const p = clamp(Number(period), 0.1, 2);\n  if (t === 0 || t === 1) return t;\n  return (\n    -a *\n    2 ** (10 * (t - 1)) *\n    Math.sin(\n      ((t - 1 - (p / (Math.PI * 2)) * Math.asin(1 / a)) * (Math.PI * 2)) / p,\n    )\n  );\n};\n\nconst Spring: TypeEasingFunction = (\n  t: number,\n  params: (string | number)[] = [],\n  duration?: number,\n) => {\n  let [mass = 1, stiffness = 100, damping = 10, velocity = 0] = params;\n\n  mass = clamp(mass as number, 0.1, 1000);\n  stiffness = clamp(stiffness as number, 0.1, 1000);\n  damping = clamp(damping as number, 0.1, 1000);\n  velocity = clamp(velocity as number, 0.1, 1000);\n\n  const w0 = Math.sqrt(stiffness / mass);\n  const zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  const wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  const a = 1;\n  const b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  let progress = duration ? (duration * t) / 1000 : t;\n  if (zeta < 1) {\n    progress =\n      Math.exp(-progress * zeta * w0) *\n      (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n  } else {\n    progress = (a + b * progress) * Math.exp(-progress * w0);\n  }\n\n  if (t === 0 || t === 1) return t;\n  return 1 - progress;\n};\n\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nconst Steps: TypeEasingFunction = (t: number, params = []) => {\n  const [steps = 10, type] = params as [number, string];\n  const trunc = type === 'start' ? Math.ceil : Math.floor;\n  return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n\n// @ts-ignore\nconst Bezier: TypeEasingFunction = (t: number, params: number[] = []) => {\n  const [mX1, mY1, mX2, mY2] = params;\n  return bezier(mX1, mY1, mX2, mY2)(t);\n};\n\n/** The default `ease-in` easing function */\nconst easein: TypeEasingFunction = bezier(0.42, 0.0, 1.0, 1.0);\n\n/** Converts easing functions to their `out`counter parts */\nconst EaseOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    1 - ease(1 - t, params, duration);\n};\n\n/** Converts easing functions to their `in-out` counter parts */\nconst EaseInOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    t < 0.5\n      ? ease(t * 2, params, duration) / 2\n      : 1 - ease(t * -2 + 2, params, duration) / 2;\n};\n\n/** Converts easing functions to their `out-in` counter parts */\nconst EaseOutIn = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) => {\n    return t < 0.5\n      ? (1 - ease(1 - t * 2, params, duration)) / 2\n      : (ease(t * 2 - 1, params, duration) + 1) / 2;\n  };\n};\n\n/**\n * The default list of easing functions, do note this is different from {@link EASING}\n */\ntype EasingFunctionType =\n  | 'steps'\n  | 'step-start'\n  | 'step-end'\n  | 'linear'\n  | 'cubic-bezier'\n  | 'ease'\n  | 'in'\n  | 'out'\n  | 'in-out'\n  | 'out-in'\n  | 'in-quad'\n  | 'out-quad'\n  | 'in-out-quad'\n  | 'out-in-quad'\n  | 'in-cubic'\n  | 'out-cubic'\n  | 'in-out-cubic'\n  | 'out-in-cubic'\n  | 'in-quart'\n  | 'out-quart'\n  | 'in-out-quart'\n  | 'out-in-quart'\n  | 'in-quint'\n  | 'out-quint'\n  | 'in-out-quint'\n  | 'out-in-quint'\n  | 'in-expo'\n  | 'out-expo'\n  | 'in-out-expo'\n  | 'out-in-expo'\n  | 'in-sine'\n  | 'out-sine'\n  | 'in-out-sine'\n  | 'out-in-sine'\n  | 'in-circ'\n  | 'out-circ'\n  | 'in-out-circ'\n  | 'out-in-circ'\n  | 'in-back'\n  | 'out-back'\n  | 'in-out-back'\n  | 'out-in-back'\n  | 'in-bounce'\n  | 'out-bounce'\n  | 'in-out-bounce'\n  | 'out-in-bounce'\n  | 'in-elastic'\n  | 'out-elastic'\n  | 'in-out-elastic'\n  | 'out-in-elastic'\n  | 'spring'\n  | 'spring-in'\n  | 'spring-out'\n  | 'spring-in-out'\n  | 'spring-out-in';\nexport const EasingFunctions: Record<EasingFunctionType, TypeEasingFunction> = {\n  steps: Steps,\n  'step-start': (t) => Steps(t, [1, 'start']),\n  'step-end': (t) => Steps(t, [1, 'end']),\n\n  linear: (t) => t,\n  'cubic-bezier': Bezier,\n  ease: (t) => Bezier(t, [0.25, 0.1, 0.25, 1.0]),\n\n  in: easein,\n  out: EaseOut(easein),\n  'in-out': EaseInOut(easein),\n  'out-in': EaseOutIn(easein),\n\n  'in-quad': Quad,\n  'out-quad': EaseOut(Quad),\n  'in-out-quad': EaseInOut(Quad),\n  'out-in-quad': EaseOutIn(Quad),\n\n  'in-cubic': Cubic,\n  'out-cubic': EaseOut(Cubic),\n  'in-out-cubic': EaseInOut(Cubic),\n  'out-in-cubic': EaseOutIn(Cubic),\n\n  'in-quart': Quart,\n  'out-quart': EaseOut(Quart),\n  'in-out-quart': EaseInOut(Quart),\n  'out-in-quart': EaseOutIn(Quart),\n\n  'in-quint': Quint,\n  'out-quint': EaseOut(Quint),\n  'in-out-quint': EaseInOut(Quint),\n  'out-in-quint': EaseOutIn(Quint),\n\n  'in-expo': Expo,\n  'out-expo': EaseOut(Expo),\n  'in-out-expo': EaseInOut(Expo),\n  'out-in-expo': EaseOutIn(Expo),\n\n  'in-sine': Sine,\n  'out-sine': EaseOut(Sine),\n  'in-out-sine': EaseInOut(Sine),\n  'out-in-sine': EaseOutIn(Sine),\n\n  'in-circ': Circ,\n  'out-circ': EaseOut(Circ),\n  'in-out-circ': EaseInOut(Circ),\n  'out-in-circ': EaseOutIn(Circ),\n\n  'in-back': Back,\n  'out-back': EaseOut(Back),\n  'in-out-back': EaseInOut(Back),\n  'out-in-back': EaseOutIn(Back),\n\n  'in-bounce': Bounce,\n  'out-bounce': EaseOut(Bounce),\n  'in-out-bounce': EaseInOut(Bounce),\n  'out-in-bounce': EaseOutIn(Bounce),\n\n  'in-elastic': Elastic,\n  'out-elastic': EaseOut(Elastic),\n  'in-out-elastic': EaseInOut(Elastic),\n  'out-in-elastic': EaseOutIn(Elastic),\n\n  spring: Spring,\n  'spring-in': Spring,\n  'spring-out': EaseOut(Spring),\n  'spring-in-out': EaseInOut(Spring),\n  'spring-out-in': EaseOutIn(Spring),\n};\n\n/**\n * Convert string easing to their proper form\n */\nconst complexEasingSyntax = (ease: string) =>\n  convertToDash(ease)\n    .replace(/^ease-/, '') // Remove the \"ease-\" keyword\n    .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n    .toLowerCase()\n    .trim();\n\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nexport const getEasingFunction = (ease: string) => {\n  return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n","import type { AnimationEffectTiming } from '../dom/AnimationEffectTiming';\nimport { bezier } from './bezier-easing';\nimport { convertToDash, getEasingFunction } from './custom-easing';\n\nexport const linear = (x: number) => {\n  return x;\n};\n\nconst Start = 1;\nconst Middle = 0.5;\nconst End = 0;\n\nfunction step(count: number, pos: number) {\n  return function (x: number) {\n    if (x >= 1) {\n      return 1;\n    }\n    const stepSize = 1 / count;\n    x += pos * stepSize;\n    return x - (x % stepSize);\n  };\n}\n\nconst numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nconst cubicBezierRe = new RegExp(\n  `cubic-bezier\\\\(${numberString},${numberString},${numberString},${numberString}\\\\)`,\n);\nconst step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nconst step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\n\nexport function parseEasingFunction(\n  normalizedEasing: string,\n): (t: number) => number {\n  const cubicData = cubicBezierRe.exec(normalizedEasing);\n  if (cubicData) {\n    // @ts-ignore\n    return bezier(...cubicData.slice(1).map(Number));\n  }\n  const step1Data = step1Re.exec(normalizedEasing);\n  if (step1Data) {\n    return step(Number(step1Data[1]), End);\n  }\n  const step2Data = step2Re.exec(normalizedEasing);\n  if (step2Data) {\n    // @ts-ignore\n    return step(\n      Number(step2Data[1]),\n      { start: Start, middle: Middle, end: End }[step2Data[2]],\n    );\n  }\n  return getEasingFunction(normalizedEasing);\n}\n\nexport function calculateActiveDuration(timing: EffectTiming) {\n  // @ts-ignore\n  return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\n\nfunction repeatedDuration(timing: EffectTiming): number {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n  if (timing.duration === 0 || timing.iterations === 0) {\n    return 0;\n  }\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n  // if (timing.duration === 'auto') {\n  //   timing.duration = 0;\n  // }\n\n  return (\n    (timing.duration === 'auto' ? 0 : Number(timing.duration)) *\n    (timing.iterations ?? 1)\n  );\n}\n\nconst PhaseNone = 0;\nconst PhaseBefore = 1;\nconst PhaseAfter = 2;\nconst PhaseActive = 3;\n\nfunction calculatePhase(\n  activeDuration: number,\n  localTime: number | null,\n  timing: AnimationEffectTiming,\n) {\n  // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n  if (localTime === null) {\n    return PhaseNone;\n  }\n\n  const { endTime } = timing;\n  if (localTime < Math.min(timing.delay, endTime)) {\n    return PhaseBefore;\n  }\n  if (\n    localTime >=\n    Math.min(timing.delay + activeDuration + timing.endDelay, endTime)\n  ) {\n    return PhaseAfter;\n  }\n\n  return PhaseActive;\n}\n\nfunction calculateActiveTime(\n  activeDuration: any,\n  fillMode: string,\n  localTime: number,\n  phase: number,\n  delay: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n  switch (phase) {\n    case PhaseBefore:\n      if (fillMode === 'backwards' || fillMode === 'both') return 0;\n      return null;\n    case PhaseActive:\n      return localTime - delay;\n    case PhaseAfter:\n      if (fillMode === 'forwards' || fillMode === 'both') return activeDuration;\n      return null;\n    case PhaseNone:\n      return null;\n  }\n}\n\nfunction calculateOverallProgress(\n  iterationDuration: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationStart: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n  let overallProgress = iterationStart;\n  if (iterationDuration === 0) {\n    if (phase !== PhaseBefore) {\n      overallProgress += iterations;\n    }\n  } else {\n    overallProgress += activeTime / iterationDuration;\n  }\n  return overallProgress;\n}\n\nfunction calculateSimpleIterationProgress(\n  overallProgress: number,\n  iterationStart: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationDuration: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n\n  let simpleIterationProgress =\n    overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n  if (\n    simpleIterationProgress === 0 &&\n    phase === PhaseAfter &&\n    iterations !== 0 &&\n    (activeTime !== 0 || iterationDuration === 0)\n  ) {\n    simpleIterationProgress = 1;\n  }\n  return simpleIterationProgress;\n}\n\nfunction calculateCurrentIteration(\n  phase: number,\n  iterations: number,\n  simpleIterationProgress: number,\n  overallProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n  if (phase === PhaseAfter && iterations === Infinity) {\n    return Infinity;\n  }\n  if (simpleIterationProgress === 1) {\n    return Math.floor(overallProgress) - 1;\n  }\n  return Math.floor(overallProgress);\n}\n\nfunction calculateDirectedProgress(\n  playbackDirection: string,\n  currentIteration: number,\n  simpleIterationProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n  let currentDirection = playbackDirection;\n  if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n    let d = currentIteration;\n    if (playbackDirection === 'alternate-reverse') {\n      d += 1;\n    }\n    currentDirection = 'normal';\n    if (d !== Infinity && d % 2 !== 0) {\n      currentDirection = 'reverse';\n    }\n  }\n  if (currentDirection === 'normal') {\n    return simpleIterationProgress;\n  }\n  return 1 - simpleIterationProgress;\n}\n\nexport function calculateIterationProgress(\n  activeDuration: number,\n  localTime: number,\n  timing: AnimationEffectTiming,\n) {\n  const phase = calculatePhase(activeDuration, localTime, timing);\n  const activeTime = calculateActiveTime(\n    activeDuration,\n    timing.fill,\n    localTime,\n    phase,\n    timing.delay,\n  );\n  if (activeTime === null) return null;\n\n  const duration = timing.duration === 'auto' ? 0 : timing.duration;\n  const overallProgress = calculateOverallProgress(\n    duration,\n    phase,\n    timing.iterations,\n    activeTime,\n    timing.iterationStart,\n  );\n  const simpleIterationProgress = calculateSimpleIterationProgress(\n    overallProgress,\n    timing.iterationStart,\n    phase,\n    timing.iterations,\n    activeTime,\n    duration,\n  );\n  const currentIteration = calculateCurrentIteration(\n    phase,\n    timing.iterations,\n    simpleIterationProgress,\n    overallProgress,\n  );\n\n  const directedProgress = calculateDirectedProgress(\n    timing.direction,\n    currentIteration,\n    simpleIterationProgress,\n  );\n\n  timing.currentIteration = currentIteration;\n  timing.progress = directedProgress;\n\n  // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n  // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n  return timing.easingFunction(directedProgress);\n}\n\n/**\n * From: [https://easings.net]\n * Read More about easings on [MDN](https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing)\n */\nexport const EASINGS: Record<string, string> = {\n  in: 'ease-in',\n  out: 'ease-out',\n  'in-out': 'ease-in-out',\n\n  // Sine\n  'in-sine': 'cubic-bezier(0.47, 0, 0.745, 0.715)',\n  'out-sine': 'cubic-bezier(0.39, 0.575, 0.565, 1)',\n  'in-out-sine': 'cubic-bezier(0.445, 0.05, 0.55, 0.95)',\n\n  // Quad\n  'in-quad': 'cubic-bezier(0.55, 0.085, 0.68, 0.53)',\n  'out-quad': 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n  'in-out-quad': 'cubic-bezier(0.455, 0.03, 0.515, 0.955)',\n\n  // Cubic\n  'in-cubic': 'cubic-bezier(0.55, 0.055, 0.675, 0.19)',\n  'out-cubic': 'cubic-bezier(0.215, 0.61, 0.355, 1)',\n  'in-out-cubic': 'cubic-bezier(0.645, 0.045, 0.355, 1)',\n\n  // Quart\n  'in-quart': 'cubic-bezier(0.895, 0.03, 0.685, 0.22)',\n  'out-quart': 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n  'in-out-quart': 'cubic-bezier(0.77, 0, 0.175, 1)',\n\n  // Quint\n  'in-quint': 'cubic-bezier(0.755, 0.05, 0.855, 0.06)',\n  'out-quint': 'cubic-bezier(0.23, 1, 0.32, 1)',\n  'in-out-quint': 'cubic-bezier(0.86, 0, 0.07, 1)',\n\n  // Expo\n  'in-expo': 'cubic-bezier(0.95, 0.05, 0.795, 0.035)',\n  'out-expo': 'cubic-bezier(0.19, 1, 0.22, 1)',\n  'in-out-expo': 'cubic-bezier(1, 0, 0, 1)',\n\n  // Circ\n  'in-circ': 'cubic-bezier(0.6, 0.04, 0.98, 0.335)',\n  'out-circ': 'cubic-bezier(0.075, 0.82, 0.165, 1)',\n  'in-out-circ': 'cubic-bezier(0.785, 0.135, 0.15, 0.86)',\n\n  // Back\n  'in-back': 'cubic-bezier(0.6, -0.28, 0.735, 0.045)',\n  'out-back': 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n  'in-out-back': 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n};\nexport const EasingKeys = Object.keys(EASINGS);\n\n/**\n * Converts users input into a usable easing function string\n */\nexport const getEase = (ease: keyof typeof EASINGS = 'ease'): string => {\n  // Convert camelCase strings into dashed strings, then Remove the \"ease-\" keyword\n  const search = convertToDash(ease).replace(/^ease-/, '');\n  return EASINGS[search] || ease;\n};\n","import type {\n  IAnimationEffectTiming,\n  IElement,\n  Interpolatable,\n  TypeEasingFunction,\n} from '@antv/g-lite';\nimport { propertyMetadataCache, runtime } from '@antv/g-lite';\nimport { isNumber } from '@antv/util';\nimport { parseEasingFunction } from './animation';\n\nexport function convertEffectInput(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n  target: IElement | null,\n) {\n  const propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(\n    keyframes,\n    timing,\n  );\n  const interpolations = makeInterpolations(\n    propertySpecificKeyframeGroups,\n    target,\n  );\n\n  return function (target: IElement, fraction: number) {\n    if (fraction !== null) {\n      interpolations\n        .filter((interpolation) => {\n          return (\n            fraction >= interpolation.applyFrom &&\n            fraction < interpolation.applyTo\n          );\n        })\n        .forEach((interpolation) => {\n          const offsetFraction = fraction - interpolation.startOffset;\n          const localDuration =\n            interpolation.endOffset - interpolation.startOffset;\n          const scaledLocalTime =\n            localDuration === 0 ? 0 : offsetFraction / localDuration;\n          // apply updated attribute\n          target.setAttribute(\n            interpolation.property,\n            interpolation.interpolation(scaledLocalTime),\n            false,\n            false, // disable memoize\n          );\n\n          // if (interpolation.property === 'visibility') {\n          //   console.log(\n          //     scaledLocalTime,\n          //     interpolation.interpolation(scaledLocalTime),\n          //   );\n          // }\n        });\n    } else {\n      for (const property in propertySpecificKeyframeGroups)\n        if (isNotReservedWord(property)) {\n          // clear attribute\n          target.setAttribute(property, null);\n        }\n    }\n  };\n}\n\ninterface PropertySpecificKeyframe {\n  offset: number | null;\n  computedOffset: number;\n  easing: string;\n  easingFunction: TypeEasingFunction;\n  value: any;\n}\n\nfunction isNotReservedWord(member: string) {\n  return (\n    member !== 'offset' &&\n    member !== 'easing' &&\n    member !== 'composite' &&\n    member !== 'computedOffset'\n  );\n}\n\nfunction makePropertySpecificKeyframeGroups(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n) {\n  const propertySpecificKeyframeGroups: Record<\n    string,\n    PropertySpecificKeyframe[]\n  > = {};\n\n  for (let i = 0; i < keyframes.length; i++) {\n    for (const member in keyframes[i]) {\n      if (isNotReservedWord(member)) {\n        const propertySpecificKeyframe = {\n          offset: keyframes[i].offset,\n          computedOffset: keyframes[i].computedOffset,\n          easing: keyframes[i].easing,\n          easingFunction:\n            parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n          value: keyframes[i][member],\n        };\n        propertySpecificKeyframeGroups[member] =\n          propertySpecificKeyframeGroups[member] || [];\n        propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n      }\n    }\n  }\n  return propertySpecificKeyframeGroups;\n}\n\nfunction makeInterpolations(\n  propertySpecificKeyframeGroups: Record<string, PropertySpecificKeyframe[]>,\n  target: IElement | null,\n) {\n  const interpolations = [];\n  for (const groupName in propertySpecificKeyframeGroups) {\n    const keyframes = propertySpecificKeyframeGroups[groupName];\n    for (let i = 0; i < keyframes.length - 1; i++) {\n      let startIndex = i;\n      let endIndex = i + 1;\n      const startOffset = keyframes[startIndex].computedOffset;\n      const endOffset = keyframes[endIndex].computedOffset;\n      let applyFrom = startOffset;\n      let applyTo = endOffset;\n\n      if (i === 0) {\n        applyFrom = -Infinity;\n        if (endOffset === 0) {\n          endIndex = startIndex;\n        }\n      }\n      if (i === keyframes.length - 2) {\n        applyTo = Infinity;\n        if (startOffset === 1) {\n          startIndex = endIndex;\n        }\n      }\n\n      interpolations.push({\n        applyFrom,\n        applyTo,\n        startOffset: keyframes[startIndex].computedOffset,\n        endOffset: keyframes[endIndex].computedOffset,\n        easingFunction: keyframes[startIndex].easingFunction,\n        property: groupName,\n        interpolation: propertyInterpolation(\n          groupName,\n          keyframes[startIndex].value,\n          keyframes[endIndex].value,\n          target,\n        ),\n      });\n    }\n  }\n  interpolations.sort((leftInterpolation, rightInterpolation) => {\n    return leftInterpolation.startOffset - rightInterpolation.startOffset;\n  });\n  return interpolations;\n}\n\nconst InterpolationFactory = (\n  from: Interpolatable,\n  to: Interpolatable,\n  convertToString: Function,\n) => {\n  return (f: number) => {\n    const interpolated = interpolate(from, to, f);\n    return isNumber(interpolated)\n      ? interpolated\n      : convertToString(interpolated);\n  };\n};\n\nfunction propertyInterpolation(\n  property: string,\n  left: string | number,\n  right: string | number,\n  target: IElement | null,\n) {\n  const metadata = propertyMetadataCache[property];\n\n  if (metadata && metadata.syntax && metadata.int) {\n    const propertyHandler = runtime.styleValueRegistry.getPropertySyntax(\n      metadata.syntax,\n    );\n\n    if (propertyHandler) {\n      const parser = propertyHandler.parser;\n      const usedLeft = parser ? parser(left, target) : left;\n      const usedRight = parser ? parser(right, target) : right;\n\n      // merger [left, right, n2string()]\n      const interpolationArgs = propertyHandler.mixer(\n        usedLeft,\n        usedRight,\n        target,\n      );\n      if (interpolationArgs) {\n        const interp = InterpolationFactory(\n          // @ts-ignore\n          ...interpolationArgs,\n        );\n        return function (t: number) {\n          if (t === 0) return left;\n          if (t === 1) return right;\n          return interp(t);\n        };\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return InterpolationFactory(false, true, function (bool: boolean) {\n    return bool ? right : left;\n  });\n}\n\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(\n  from: Interpolatable,\n  to: Interpolatable,\n  f: number,\n): Interpolatable {\n  if (typeof from === 'number' && typeof to === 'number') {\n    return from * (1 - f) + to * f;\n  }\n  if (\n    (typeof from === 'boolean' && typeof to === 'boolean') ||\n    (typeof from === 'string' && typeof to === 'string') // skip string, eg. path ['M', 10, 10]\n  ) {\n    return f < 0.5 ? from : to;\n  }\n\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // interpolate arrays/matrix\n    const fromLength = from.length;\n    const toLength = to.length;\n    const length = Math.max(fromLength, toLength);\n\n    const r: number[] = [];\n    for (let i = 0; i < length; i++) {\n      r.push(\n        interpolate(\n          from[i < fromLength ? i : fromLength - 1],\n          to[i < toLength ? i : toLength - 1],\n          f,\n        ) as number,\n      );\n    }\n    return r;\n  }\n  throw new Error(`Mismatched interpolation arguments ${from}:${to}`);\n}\n","import { linear, parseEasingFunction } from '../utils/animation';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nexport class AnimationEffectTiming implements EffectTiming {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n   */\n  delay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n   */\n  direction: PlaybackDirection = 'normal';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n   */\n  duration: number | 'auto' = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n   */\n  private _easing = 'linear';\n  easingFunction = linear;\n  get easing() {\n    return this._easing;\n  }\n  set easing(value: string) {\n    this.easingFunction = parseEasingFunction(value);\n    this._easing = value;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n   */\n  endDelay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n   */\n  fill: FillMode = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n   */\n  iterationStart = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n   */\n  iterations = 1;\n\n  /**\n   * @deprecated\n   */\n  playbackRate: number;\n\n  /**\n   * ref to effect\n   */\n  effect: KeyframeEffect;\n\n  composite: string;\n\n  /**\n   * ComputedEffectTiming\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  activeDuration: number;\n\n  endTime: number;\n\n  currentIteration: number | null = null;\n\n  progress: number | null = null;\n}\n","import { isNil } from '@antv/util';\nimport type { AnimationEffectTiming } from './AnimationEffectTiming';\n\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput: PropertyIndexedKeyframes) {\n  const normalizedEffectInput: Keyframe[] = [];\n\n  for (const property in effectInput) {\n    // skip reserved props\n    if (property in ['easing', 'offset', 'composite']) {\n      continue;\n    }\n\n    // @ts-ignore\n    let values: string[] | (number | null)[] = effectInput[property];\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n\n    const numKeyframes = values.length;\n    for (let i = 0; i < numKeyframes; i++) {\n      if (!normalizedEffectInput[i]) {\n        const keyframe: Keyframe = {};\n        if ('offset' in effectInput) {\n          keyframe.offset = Number(effectInput.offset);\n        }\n\n        if ('easing' in effectInput) {\n          // @ts-ignore\n          keyframe.easing = effectInput.easing;\n        }\n\n        if ('composite' in effectInput) {\n          // @ts-ignore\n          keyframe.composite = effectInput.composite;\n        }\n        normalizedEffectInput[i] = keyframe;\n      }\n\n      if (values[i] !== undefined && values[i] !== null) {\n        normalizedEffectInput[i][property] = values[i];\n      }\n    }\n  }\n\n  normalizedEffectInput.sort(function (a, b) {\n    return (\n      ((a.computedOffset as number) || 0) - ((b.computedOffset as number) || 0)\n    );\n  });\n  return normalizedEffectInput;\n}\n\nexport function normalizeKeyframes(\n  effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n  timing?: AnimationEffectTiming,\n): ComputedKeyframe[] {\n  if (effectInput === null) {\n    return [];\n  }\n\n  if (!Array.isArray(effectInput)) {\n    effectInput = convertToArrayForm(effectInput);\n  }\n\n  let keyframes = effectInput.map((originalKeyframe) => {\n    const keyframe: Keyframe = {};\n\n    if (timing?.composite) {\n      // This will be auto if the composite operation specified on the effect is being used.\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n      keyframe.composite = 'auto';\n    }\n\n    for (const member in originalKeyframe) {\n      let memberValue = originalKeyframe[member];\n      if (member === 'offset') {\n        if (memberValue !== null) {\n          memberValue = Number(memberValue);\n          if (!isFinite(memberValue))\n            throw new Error('Keyframe offsets must be numbers.');\n          if (memberValue < 0 || memberValue > 1)\n            throw new Error('Keyframe offsets must be between 0 and 1.');\n          keyframe.computedOffset = memberValue;\n        }\n      } else if (member === 'composite') {\n        // TODO: Support add & accumulate in KeyframeEffect.composite\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n        if (\n          ['replace', 'add', 'accumulate', 'auto'].indexOf(\n            memberValue as string,\n          ) === -1\n        ) {\n          throw new Error(`${memberValue} compositing is not supported`);\n        }\n      } else if (member === 'easing') {\n        // TODO: Validate animation-timing-function\n        // @see https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function\n        // memberValue = memberValue;\n        // } else {\n        //   memberValue = '' + memberValue;\n      }\n\n      // assign to keyframe, no need to parse shorthand value\n      keyframe[member] = memberValue;\n    }\n    if (keyframe.offset === undefined) {\n      keyframe.offset = null;\n    }\n    if (keyframe.easing === undefined) {\n      // override with timing.easing\n      keyframe.easing = timing?.easing || 'linear';\n    }\n    if (keyframe.composite === undefined) {\n      keyframe.composite = 'auto';\n    }\n    return keyframe;\n  });\n\n  let everyFrameHasOffset = true;\n  let previousOffset = -Infinity;\n  for (let i = 0; i < keyframes.length; i++) {\n    const { offset } = keyframes[i];\n    if (!isNil(offset)) {\n      if (offset < previousOffset) {\n        throw new TypeError(\n          'Keyframes are not loosely sorted by offset. Sort or specify offsets.',\n        );\n      }\n      previousOffset = offset;\n    } else {\n      everyFrameHasOffset = false;\n    }\n  }\n\n  keyframes = keyframes.filter((keyframe) => {\n    return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n  });\n\n  function spaceKeyframes() {\n    const { length } = keyframes;\n    keyframes[length - 1].computedOffset = Number(\n      keyframes[length - 1].offset ?? 1,\n    );\n    if (length > 1) {\n      keyframes[0].computedOffset = Number(keyframes[0].offset ?? 0);\n    }\n\n    let previousIndex = 0;\n    let previousOffset = Number(keyframes[0].computedOffset);\n    for (let i = 1; i < length; i++) {\n      const offset = keyframes[i].computedOffset;\n      if (!isNil(offset) && !isNil(previousOffset)) {\n        for (let j = 1; j < i - previousIndex; j++)\n          keyframes[previousIndex + j].computedOffset =\n            previousOffset +\n            ((Number(offset) - previousOffset) * j) / (i - previousIndex);\n        previousIndex = i;\n        previousOffset = Number(offset);\n      }\n    }\n  }\n  if (!everyFrameHasOffset) spaceKeyframes();\n\n  return keyframes as ComputedKeyframe[];\n}\n","import { IElement, IKeyframeEffect, runtime } from '@antv/g-lite';\nimport {\n  calculateActiveDuration,\n  calculateIterationProgress,\n  convertEffectInput,\n} from '../utils';\nimport type { Animation } from './Animation';\nimport { AnimationEffectTiming } from './AnimationEffectTiming';\nimport { normalizeKeyframes } from './KeyframeList';\n\nconst fills = 'backwards|forwards|both|none'.split('|');\nconst directions = 'reverse|alternate|alternate-reverse'.split('|');\nexport function makeTiming(\n  timingInput: KeyframeEffectOptions,\n  forGroup: boolean,\n) {\n  const timing = new AnimationEffectTiming();\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    (Object.keys(timingInput) as (keyof EffectTiming)[]).forEach((property) => {\n      if (\n        timingInput[property] !== undefined &&\n        timingInput[property] !== null &&\n        timingInput[property] !== 'auto'\n      ) {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (\n            typeof timingInput[property] !== 'number' ||\n            isNaN(timingInput[property])\n          ) {\n            return;\n          }\n        }\n        if (\n          property === 'fill' &&\n          fills.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        if (\n          property === 'direction' &&\n          directions.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        // @ts-ignore\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n  return timing;\n}\n\nexport function normalizeTimingInput(\n  timingInput: KeyframeEffectOptions | number | undefined,\n  forGroup: boolean,\n) {\n  timingInput = numericTimingToObject(timingInput ?? { duration: 'auto' });\n  return makeTiming(timingInput, forGroup);\n}\n\nexport function numericTimingToObject(\n  timingInput: KeyframeEffectOptions | number,\n) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = { duration: 'auto' };\n    } else {\n      timingInput = { duration: timingInput };\n    }\n  }\n  return timingInput;\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nexport class KeyframeEffect implements IKeyframeEffect {\n  composite: CompositeOperation = 'replace';\n  iterationComposite: IterationCompositeOperation = 'replace';\n  // pseudoElement: string | null;\n  target: IElement | null;\n\n  animation: Animation | null;\n\n  timing: AnimationEffectTiming;\n  private computedTiming: ComputedEffectTiming;\n\n  normalizedKeyframes: ComputedKeyframe[];\n\n  private timeFraction: number | null;\n\n  private interpolations: (target: IElement, f: number) => void;\n\n  constructor(\n    target: IElement | null,\n    effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n    timingInput?: KeyframeEffectOptions | number,\n  ) {\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(\n      0,\n      this.timing.delay + this.timing.activeDuration + this.timing.endDelay,\n    );\n\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(\n      this.normalizedKeyframes,\n      this.timing,\n      this.target,\n    );\n\n    // 不支持 proxy 时降级成 this.timing\n    const { Proxy } = runtime.globalThis;\n    this.computedTiming = Proxy\n      ? new Proxy<AnimationEffectTiming>(this.timing, {\n          get: (target, prop) => {\n            if (prop === 'duration') {\n              return target.duration === 'auto' ? 0 : target.duration;\n            }\n            if (prop === 'fill') {\n              return target.fill === 'auto' ? 'none' : target.fill;\n            }\n            if (prop === 'localTime') {\n              return (this.animation && this.animation.currentTime) || null;\n            }\n            if (prop === 'currentIteration') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.currentIteration || 0;\n            }\n            if (prop === 'progress') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.progress || 0;\n            }\n            return target[prop];\n          },\n          set: () => {\n            return true;\n          },\n        })\n      : this.timing;\n  }\n\n  applyInterpolations() {\n    this.interpolations(\n      this.target as unknown as IElement,\n      Number(this.timeFraction),\n    );\n  }\n\n  update(localTime: number | null): boolean {\n    if (localTime === null) {\n      return false;\n    }\n    this.timeFraction = calculateIterationProgress(\n      this.timing.activeDuration,\n      localTime,\n      this.timing,\n    );\n    return this.timeFraction !== null;\n  }\n\n  getKeyframes(): ComputedKeyframe[] {\n    return this.normalizedKeyframes;\n  }\n  setKeyframes(keyframes: Keyframe[] | PropertyIndexedKeyframes | null): void {\n    this.normalizedKeyframes = normalizeKeyframes(keyframes);\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  getComputedTiming(): ComputedEffectTiming {\n    return this.computedTiming;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n   */\n  getTiming(): EffectTiming {\n    return this.timing;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n   */\n  updateTiming(timing?: OptionalEffectTiming): void {\n    Object.keys(timing || {}).forEach((name) => {\n      this.timing[name] = timing[name];\n    });\n  }\n}\n","import type {\n  IDocument,\n  IAnimationTimeline,\n  IElement,\n  IAnimation,\n} from '@antv/g-lite';\nimport { Animation } from './Animation';\nimport { KeyframeEffect } from './KeyframeEffect';\n\nexport function compareAnimations(\n  leftAnimation: IAnimation,\n  rightAnimation: IAnimation,\n) {\n  return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nexport class AnimationTimeline implements IAnimationTimeline {\n  /**\n   * all active animations\n   */\n  animations: Animation[] = [];\n\n  private ticking = false;\n\n  private timelineTicking = false;\n\n  private hasRestartedThisFrame = false;\n\n  animationsWithPromises: Animation[] = [];\n\n  private inTick = false;\n\n  private pendingEffects: (KeyframeEffect | null)[] = [];\n\n  currentTime: number | null = null;\n\n  private rafId = 0;\n  private rafCallbacks: [number, (x: number) => void][] = [];\n\n  private frameId: number;\n\n  constructor(private document: IDocument) {}\n\n  getAnimations() {\n    this.discardAnimations();\n    return this.animations.slice();\n  }\n\n  isTicking() {\n    return this.inTick;\n  }\n\n  play(\n    target: IElement,\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n    options?: number | KeyframeAnimationOptions,\n  ): Animation {\n    const effect = new KeyframeEffect(target, keyframes, options);\n    const animation = new Animation(effect, this);\n    this.animations.push(animation);\n    this.restartWebAnimationsNextTick();\n    animation.updatePromises();\n    animation.play();\n    animation.updatePromises();\n    return animation;\n  }\n\n  // RAF is supposed to be the last script to occur before frame rendering but not\n  // all browsers behave like this. This function is for synchonously updating an\n  // animation's effects whenever its state is mutated by script to work around\n  // incorrect script execution ordering by the browser.\n  applyDirtiedAnimation(animation: Animation) {\n    if (this.inTick) {\n      return;\n    }\n    // update active animations in displayobject\n    animation.markTarget();\n    const animations = animation.targetAnimations();\n    animations.sort(compareAnimations);\n\n    // clear inactive animations\n    const inactiveAnimations = this.tick(\n      Number(this.currentTime),\n      false,\n      animations.slice(),\n    )[1];\n    inactiveAnimations.forEach((animation) => {\n      const index = this.animations.indexOf(animation);\n      if (index !== -1) {\n        this.animations.splice(index, 1);\n      }\n    });\n    this.applyPendingEffects();\n  }\n\n  restart() {\n    if (!this.ticking) {\n      this.ticking = true;\n      this.requestAnimationFrame(() => {});\n      this.hasRestartedThisFrame = true;\n    }\n    return this.hasRestartedThisFrame;\n  }\n\n  destroy() {\n    this.document.defaultView.cancelAnimationFrame(this.frameId);\n  }\n\n  applyPendingEffects() {\n    this.pendingEffects.forEach((effect) => {\n      effect?.applyInterpolations();\n    });\n    this.pendingEffects = [];\n  }\n\n  private updateAnimationsPromises() {\n    this.animationsWithPromises = this.animationsWithPromises.filter(\n      (animation) => {\n        return animation.updatePromises();\n      },\n    );\n  }\n\n  private discardAnimations() {\n    this.updateAnimationsPromises();\n    this.animations = this.animations.filter((animation) => {\n      return (\n        animation.playState !== 'finished' && animation.playState !== 'idle'\n      );\n    });\n  }\n\n  private restartWebAnimationsNextTick() {\n    if (!this.timelineTicking) {\n      this.timelineTicking = true;\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  }\n\n  private webAnimationsNextTick = (t: number) => {\n    this.currentTime = t;\n    this.discardAnimations();\n    if (this.animations.length === 0) {\n      this.timelineTicking = false;\n    } else {\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  };\n\n  private processRafCallbacks = (t: number) => {\n    const processing = this.rafCallbacks;\n    this.rafCallbacks = [];\n    if (t < Number(this.currentTime)) t = Number(this.currentTime);\n    this.animations.sort(compareAnimations);\n    this.animations = this.tick(t, true, this.animations)[0];\n    processing.forEach((entry) => {\n      entry[1](t);\n    });\n    this.applyPendingEffects();\n  };\n\n  private rAF(f: (x: number) => void) {\n    const id = this.rafId++;\n    if (this.rafCallbacks.length === 0) {\n      this.frameId = this.document.defaultView.requestAnimationFrame(\n        this.processRafCallbacks,\n      );\n    }\n    this.rafCallbacks.push([id, f]);\n    return id;\n  }\n\n  private requestAnimationFrame(f: (ts: number) => void) {\n    return this.rAF((x: number) => {\n      this.updateAnimationsPromises();\n      f(x);\n      this.updateAnimationsPromises();\n    });\n  }\n\n  tick(t: number, isAnimationFrame: boolean, updatingAnimations: IAnimation[]) {\n    this.inTick = true;\n    this.hasRestartedThisFrame = false;\n\n    this.currentTime = t;\n    this.ticking = false;\n\n    const newPendingClears: (KeyframeEffect | null)[] = [];\n    const newPendingEffects: (KeyframeEffect | null)[] = [];\n    const activeAnimations: Animation[] = [];\n    const inactiveAnimations: Animation[] = [];\n\n    (updatingAnimations as unknown as Animation[]).forEach((animation) => {\n      animation.tick(t, isAnimationFrame);\n\n      if (!animation._inEffect) {\n        newPendingClears.push(animation.effect);\n        animation.unmarkTarget();\n      } else {\n        newPendingEffects.push(animation.effect);\n        animation.markTarget();\n      }\n\n      if (animation._needsTick) this.ticking = true;\n\n      const alive = animation._inEffect || animation._needsTick;\n      animation._inTimeline = alive;\n      if (alive) {\n        activeAnimations.push(animation);\n      } else {\n        inactiveAnimations.push(animation);\n      }\n    });\n\n    this.pendingEffects.push(...newPendingClears);\n    this.pendingEffects.push(...newPendingEffects);\n\n    if (this.ticking) this.requestAnimationFrame(() => {});\n\n    this.inTick = false;\n    return [activeAnimations, inactiveAnimations];\n  }\n}\n","import { runtime } from '@antv/g-lite';\nimport { AnimationTimeline } from './dom/AnimationTimeline';\nimport { parseEasingFunction } from './utils';\n\nexport * from './dom';\nexport { EasingFunctions } from './utils';\n\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}