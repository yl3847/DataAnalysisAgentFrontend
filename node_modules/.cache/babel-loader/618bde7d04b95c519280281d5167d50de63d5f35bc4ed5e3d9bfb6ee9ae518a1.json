{"ast":null,"code":"import { __assign, __extends, __rest } from \"tslib\";\nimport { isFunction } from '@antv/util';\nimport { Component } from '../../core';\nimport { ifShow, select } from '../../util';\nimport { bowtie, circle, cross, dash, diamond, dot, hexagon, hv, hvh, hyphen, line, plus, point, smooth, square, tick, triangle, triangleDown, vh, vhv } from './symbol';\nimport { parseMarker } from './utils';\nfunction getType(symbol) {\n  var markerType = parseMarker(symbol);\n  if (['base64', 'url', 'image'].includes(markerType)) {\n    return 'image';\n  }\n  if (symbol && markerType === 'symbol') {\n    return 'path';\n  }\n  return null;\n}\nvar Marker = /** @class */function (_super) {\n  __extends(Marker, _super);\n  function Marker() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Marker.prototype.render = function (attributes, container) {\n    var _a = attributes.x,\n      x = _a === void 0 ? 0 : _a,\n      _b = attributes.y,\n      y = _b === void 0 ? 0 : _b;\n    var _c = this.getSubShapeStyle(attributes),\n      symbol = _c.symbol,\n      _d = _c.size,\n      size = _d === void 0 ? 16 : _d,\n      style = __rest(_c, [\"symbol\", \"size\"]);\n    var type = getType(symbol);\n    ifShow(!!type, select(container), function (group) {\n      group.maybeAppendByClassName(\"marker\", type).attr('className', \"marker \".concat(type, \"-marker\")).call(function (selection) {\n        if (type === 'image') {\n          // todo 大小和 path symbol 保持一致\n          var r = size * 2;\n          selection.styles({\n            img: symbol,\n            width: r,\n            height: r,\n            x: x - size,\n            y: y - size\n          });\n        } else {\n          var r = size / 2;\n          var symbolFn = isFunction(symbol) ? symbol : Marker.getSymbol(symbol);\n          selection.styles(__assign({\n            d: symbolFn === null || symbolFn === void 0 ? void 0 : symbolFn(x, y, r)\n          }, style));\n        }\n      });\n    });\n  };\n  Marker.MARKER_SYMBOL_MAP = new Map();\n  /**\n   * 注册 icon 类型\n   * @param type\n   * @param path\n   */\n  Marker.registerSymbol = function (type, symbol) {\n    Marker.MARKER_SYMBOL_MAP.set(type, symbol);\n  };\n  /**\n   * 获取已经注册的 icon 的 path\n   */\n  Marker.getSymbol = function (type) {\n    return Marker.MARKER_SYMBOL_MAP.get(type);\n  };\n  /**\n   * @returns 获取已经注册的 icon 的类型\n   */\n  Marker.getSymbols = function () {\n    return Array.from(Marker.MARKER_SYMBOL_MAP.keys());\n  };\n  return Marker;\n}(Component);\nexport { Marker };\n/** Shapes for Point Geometry */\nMarker.registerSymbol('cross', cross);\nMarker.registerSymbol('hyphen', hyphen);\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('plus', plus);\nMarker.registerSymbol('tick', tick);\nMarker.registerSymbol('circle', circle);\nMarker.registerSymbol('point', point);\nMarker.registerSymbol('bowtie', bowtie);\nMarker.registerSymbol('hexagon', hexagon);\nMarker.registerSymbol('square', square);\nMarker.registerSymbol('diamond', diamond);\nMarker.registerSymbol('triangle', triangle);\nMarker.registerSymbol('triangle-down', triangleDown);\n/** LineSymbols */\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('dot', dot);\nMarker.registerSymbol('dash', dash);\nMarker.registerSymbol('smooth', smooth);\nMarker.registerSymbol('hv', hv);\nMarker.registerSymbol('vh', vh);\nMarker.registerSymbol('hvh', hvh);\nMarker.registerSymbol('vhv', vhv);","map":{"version":3,"names":["isFunction","Component","ifShow","select","bowtie","circle","cross","dash","diamond","dot","hexagon","hv","hvh","hyphen","line","plus","point","smooth","square","tick","triangle","triangleDown","vh","vhv","parseMarker","getType","symbol","markerType","includes","Marker","_super","__extends","prototype","render","attributes","container","_a","x","_b","y","_c","getSubShapeStyle","_d","size","style","__rest","type","group","maybeAppendByClassName","attr","concat","call","selection","r","styles","img","width","height","symbolFn","getSymbol","__assign","d","MARKER_SYMBOL_MAP","Map","registerSymbol","set","get","getSymbols","Array","from","keys"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/component/src/ui/marker/index.ts"],"sourcesContent":["import { isFunction } from '@antv/util';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport { ifShow, select } from '../../util';\nimport {\n  bowtie,\n  circle,\n  cross,\n  dash,\n  diamond,\n  dot,\n  hexagon,\n  hv,\n  hvh,\n  hyphen,\n  line,\n  plus,\n  point,\n  smooth,\n  square,\n  tick,\n  triangle,\n  triangleDown,\n  vh,\n  vhv,\n} from './symbol';\nimport type { FunctionalSymbol, MarkerOptions, MarkerStyleProps } from './types';\nimport { parseMarker } from './utils';\n\nexport type { MarkerStyleProps, MarkerOptions, FunctionalSymbol };\n\nfunction getType(symbol: MarkerStyleProps['symbol']): string | null {\n  const markerType = parseMarker(symbol);\n\n  if (['base64', 'url', 'image'].includes(markerType)) {\n    return 'image';\n  }\n  if (symbol && markerType === 'symbol') {\n    return 'path';\n  }\n\n  return null;\n}\n\nexport class Marker extends Component<MarkerStyleProps> {\n  public render(attributes: Required<MarkerStyleProps>, container: Group) {\n    const { x = 0, y = 0 } = attributes;\n    const { symbol, size = 16, ...style } = this.getSubShapeStyle(attributes);\n\n    const type = getType(symbol);\n    ifShow(!!type, select(container), (group) => {\n      group\n        .maybeAppendByClassName(`marker`, type!)\n        .attr('className', `marker ${type}-marker`)\n        .call((selection) => {\n          if (type === 'image') {\n            // todo 大小和 path symbol 保持一致\n            const r = (size as number) * 2;\n            selection.styles({\n              img: symbol,\n              width: r,\n              height: r,\n              x: x - size,\n              y: y - size,\n            });\n          } else {\n            const r = (size as number) / 2;\n            const symbolFn = isFunction(symbol) ? symbol : Marker.getSymbol(symbol);\n            selection.styles({ d: symbolFn?.(x, y, r), ...style });\n          }\n        });\n    });\n  }\n\n  private static MARKER_SYMBOL_MAP = new Map<string, FunctionalSymbol>();\n\n  /**\n   * 注册 icon 类型\n   * @param type\n   * @param path\n   */\n  public static registerSymbol = (type: string, symbol: FunctionalSymbol) => {\n    Marker.MARKER_SYMBOL_MAP.set(type, symbol);\n  };\n\n  /**\n   * 获取已经注册的 icon 的 path\n   */\n  public static getSymbol = (type: string): FunctionalSymbol | undefined => {\n    return Marker.MARKER_SYMBOL_MAP.get(type);\n  };\n\n  /**\n   * @returns 获取已经注册的 icon 的类型\n   */\n  public static getSymbols = () => {\n    return Array.from(Marker.MARKER_SYMBOL_MAP.keys());\n  };\n}\n\n/** Shapes for Point Geometry */\nMarker.registerSymbol('cross', cross);\nMarker.registerSymbol('hyphen', hyphen);\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('plus', plus);\nMarker.registerSymbol('tick', tick);\n\nMarker.registerSymbol('circle', circle);\nMarker.registerSymbol('point', point);\nMarker.registerSymbol('bowtie', bowtie);\nMarker.registerSymbol('hexagon', hexagon);\nMarker.registerSymbol('square', square);\nMarker.registerSymbol('diamond', diamond);\nMarker.registerSymbol('triangle', triangle);\nMarker.registerSymbol('triangle-down', triangleDown);\n/** LineSymbols */\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('dot', dot);\nMarker.registerSymbol('dash', dash);\nMarker.registerSymbol('smooth', smooth);\nMarker.registerSymbol('hv', hv);\nMarker.registerSymbol('vh', vh);\nMarker.registerSymbol('hvh', hvh);\nMarker.registerSymbol('vhv', vhv);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}