{"ast":null,"code":"import { __assign, __extends, __read, __rest } from \"tslib\";\nimport { Circle } from '@antv/g';\nimport { Marker } from '../../marker';\nimport { Component } from '../../../core';\nimport { classNames, copyAttributes, ellipsisIt, ifShow, parseSeriesAttr, renderExtDo, scaleToPixel, select, subStyleProps, deepAssign } from '../../../util';\nimport { Poptip } from '../../poptip';\nvar CLASS_NAMES = classNames({\n  layout: 'flex',\n  markerGroup: 'marker-group',\n  marker: 'marker',\n  labelGroup: 'label-group',\n  label: 'label',\n  valueGroup: 'value-group',\n  value: 'value',\n  backgroundGroup: 'background-group',\n  background: 'background'\n}, 'legend-category-item');\nvar DEFAULT_POPTIP_PROPS = {\n  offset: [0, 20],\n  domStyles: {\n    '.component-poptip': {\n      opacity: '1',\n      padding: '8px 12px',\n      background: '#fff',\n      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.15)'\n    },\n    '.component-poptip-arrow': {\n      display: 'none'\n    },\n    '.component-poptip-text': {\n      color: '#000',\n      lineHeight: '20px'\n    }\n  }\n};\nfunction styleOfMarker(group) {\n  var marker = group.querySelector(CLASS_NAMES.marker.class);\n  if (marker) return marker.style;\n  return {};\n}\nvar CategoryItem = /** @class */function (_super) {\n  __extends(CategoryItem, _super);\n  function CategoryItem(options) {\n    return _super.call(this, options, {\n      span: [1, 1],\n      marker: function () {\n        return new Circle({\n          style: {\n            r: 6\n          }\n        });\n      },\n      markerSize: 10,\n      labelFill: '#646464',\n      valueFill: '#646464',\n      labelFontSize: 12,\n      valueFontSize: 12,\n      labelTextBaseline: 'middle',\n      valueTextBaseline: 'middle'\n    }) || this;\n  }\n  Object.defineProperty(CategoryItem.prototype, \"showValue\", {\n    get: function () {\n      var valueText = this.attributes.valueText;\n      if (!valueText) return false;\n      if (typeof valueText === 'string' || typeof valueText === 'number') return valueText !== '';\n      if (typeof valueText === 'function') return true;\n      return valueText.attr('text') !== '';\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CategoryItem.prototype, \"actualSpace\", {\n    get: function () {\n      var label = this.labelGroup;\n      var value = this.valueGroup;\n      var markerSize = this.attributes.markerSize;\n      var _a = label.node().getBBox(),\n        labelWidth = _a.width,\n        labelHeight = _a.height;\n      var _b = value.node().getBBox(),\n        valueWidth = _b.width,\n        valueHeight = _b.height;\n      return {\n        markerWidth: markerSize,\n        labelWidth: labelWidth,\n        valueWidth: valueWidth,\n        height: Math.max(markerSize, labelHeight, valueHeight)\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CategoryItem.prototype, \"span\", {\n    get: function () {\n      var span = this.attributes.span;\n      if (!span) return [1, 1];\n      var _a = __read(parseSeriesAttr(span), 2),\n        span1 = _a[0],\n        innerSpan = _a[1];\n      var span2 = this.showValue ? innerSpan : 0;\n      var basis = span1 + span2;\n      return [span1 / basis, span2 / basis];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CategoryItem.prototype, \"shape\", {\n    get: function () {\n      var _a;\n      var _b = this.attributes,\n        markerSize = _b.markerSize,\n        fullWidth = _b.width;\n      var actualSpace = this.actualSpace;\n      var markerWidth = actualSpace.markerWidth,\n        height = actualSpace.height;\n      var _c = this.actualSpace,\n        labelWidth = _c.labelWidth,\n        valueWidth = _c.valueWidth;\n      var _d = __read(this.spacing, 2),\n        spacing1 = _d[0],\n        spacing2 = _d[1];\n      if (fullWidth) {\n        var width_1 = fullWidth - markerSize - spacing1 - spacing2;\n        var _e = __read(this.span, 2),\n          span1 = _e[0],\n          span2 = _e[1];\n        _a = __read([span1 * width_1, span2 * width_1], 2), labelWidth = _a[0], valueWidth = _a[1];\n      }\n      var width = markerWidth + labelWidth + valueWidth + spacing1 + spacing2;\n      return {\n        width: width,\n        height: height,\n        markerWidth: markerWidth,\n        labelWidth: labelWidth,\n        valueWidth: valueWidth\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CategoryItem.prototype, \"spacing\", {\n    get: function () {\n      var spacing = this.attributes.spacing;\n      if (!spacing) return [0, 0];\n      var _a = __read(parseSeriesAttr(spacing), 2),\n        spacing1 = _a[0],\n        spacing2 = _a[1];\n      if (this.showValue) return [spacing1, spacing2];\n      return [spacing1, 0];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CategoryItem.prototype, \"layout\", {\n    get: function () {\n      var _a = this.shape,\n        markerWidth = _a.markerWidth,\n        labelWidth = _a.labelWidth,\n        valueWidth = _a.valueWidth,\n        width = _a.width,\n        height = _a.height;\n      var _b = __read(this.spacing, 2),\n        spacing1 = _b[0],\n        spacing2 = _b[1];\n      return {\n        height: height,\n        width: width,\n        markerWidth: markerWidth,\n        labelWidth: labelWidth,\n        valueWidth: valueWidth,\n        position: [markerWidth / 2, markerWidth + spacing1, markerWidth + labelWidth + spacing1 + spacing2]\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CategoryItem.prototype, \"scaleSize\", {\n    get: function () {\n      var markerShapeStyle = styleOfMarker(this.markerGroup.node());\n      var _a = this.attributes,\n        markerSize = _a.markerSize,\n        _b = _a.markerStrokeWidth,\n        markerStrokeWidth = _b === void 0 ? markerShapeStyle.strokeWidth : _b,\n        _c = _a.markerLineWidth,\n        markerLineWidth = _c === void 0 ? markerShapeStyle.lineWidth : _c,\n        _d = _a.markerStroke,\n        markerStroke = _d === void 0 ? markerShapeStyle.stroke : _d;\n      // empirical value\n      var strokeWidth = +(markerStrokeWidth || markerLineWidth || (markerStroke ? 1 : 0)) * Math.sqrt(2);\n      var _e = this.markerGroup.node().getBBox(),\n        width = _e.width,\n        height = _e.height;\n      return (1 - strokeWidth / Math.max(width, height)) * markerSize;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  CategoryItem.prototype.renderMarker = function (container) {\n    var _this = this;\n    var marker = this.attributes.marker;\n    var style = subStyleProps(this.attributes, 'marker');\n    this.markerGroup = container.maybeAppendByClassName(CLASS_NAMES.markerGroup, 'g').style('zIndex', 0);\n    ifShow(!!marker, this.markerGroup, function () {\n      var _a;\n      var parent = _this.markerGroup.node();\n      var oldMarker = (_a = parent.childNodes) === null || _a === void 0 ? void 0 : _a[0];\n      var newMarker = typeof marker === 'string' ? new Marker({\n        style: {\n          symbol: marker\n        },\n        className: CLASS_NAMES.marker.name\n      }) : marker();\n      if (!oldMarker) {\n        if (!(newMarker instanceof Marker)) select(newMarker).attr('className', CLASS_NAMES.marker.name).styles(style);\n        parent.appendChild(newMarker);\n      } else if (newMarker.nodeName === oldMarker.nodeName) {\n        if (oldMarker instanceof Marker) oldMarker.update(__assign(__assign({}, style), {\n          symbol: marker\n        }));else {\n          copyAttributes(oldMarker, newMarker);\n          select(oldMarker).styles(style);\n        }\n      } else {\n        oldMarker.remove();\n        select(newMarker).attr('className', CLASS_NAMES.marker.name).styles(style);\n        parent.appendChild(newMarker);\n      }\n      // record the scale of marker\n      _this.markerGroup.node().scale(1 / _this.markerGroup.node().getScale()[0]);\n      var scale = scaleToPixel(_this.markerGroup.node(), _this.scaleSize, true);\n      _this.markerGroup.node().style._transform = \"scale(\".concat(scale, \")\");\n    });\n  };\n  CategoryItem.prototype.renderLabel = function (container) {\n    var _a = subStyleProps(this.attributes, 'label'),\n      label = _a.text,\n      style = __rest(_a, [\"text\"]);\n    this.labelGroup = container.maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').style('zIndex', 0);\n    this.labelGroup.maybeAppendByClassName(CLASS_NAMES.label, function () {\n      return renderExtDo(label);\n    }).styles(style);\n  };\n  CategoryItem.prototype.renderValue = function (container) {\n    var _this = this;\n    var _a = subStyleProps(this.attributes, 'value'),\n      value = _a.text,\n      style = __rest(_a, [\"text\"]);\n    this.valueGroup = container.maybeAppendByClassName(CLASS_NAMES.valueGroup, 'g').style('zIndex', 0);\n    ifShow(this.showValue, this.valueGroup, function () {\n      _this.valueGroup.maybeAppendByClassName(CLASS_NAMES.value, function () {\n        return renderExtDo(value);\n      }).styles(style);\n    });\n  };\n  CategoryItem.prototype.createPoptip = function () {\n    var poptip = this.attributes.poptip;\n    var _a = poptip || {},\n      render = _a.render,\n      poptipStyle = __rest(_a, [\"render\"]);\n    var poptipGroup = new Poptip({\n      style: deepAssign(DEFAULT_POPTIP_PROPS, poptipStyle)\n    });\n    this.poptipGroup = poptipGroup;\n    return poptipGroup;\n  };\n  CategoryItem.prototype.bindPoptip = function (node) {\n    var _this = this;\n    var poptip = this.attributes.poptip;\n    if (!poptip) return;\n    var poptipGroup = this.poptipGroup || this.createPoptip();\n    poptipGroup.bind(node, function () {\n      var _a = _this.attributes,\n        labelText = _a.labelText,\n        valueText = _a.valueText,\n        markerFill = _a.markerFill;\n      var label = typeof labelText === 'string' ? labelText : labelText === null || labelText === void 0 ? void 0 : labelText.attr('text');\n      var value = typeof valueText === 'string' ? valueText : valueText === null || valueText === void 0 ? void 0 : valueText.attr('text');\n      if (typeof poptip.render === 'function') {\n        return {\n          html: poptip.render({\n            label: label,\n            value: value,\n            color: markerFill\n          })\n        };\n      }\n      var html = '';\n      if (typeof label === 'string' || typeof label === 'number') {\n        html += \"<div class=\\\"component-poptip-label\\\">\".concat(label, \"</div>\");\n      }\n      if (typeof value === 'string' || typeof value === 'number') {\n        html += \"<div class=\\\"component-poptip-value\\\">\".concat(value, \"</div>\");\n      }\n      return {\n        html: html\n      };\n    });\n  };\n  CategoryItem.prototype.renderPoptip = function (ctn) {\n    var _this = this;\n    var poptip = this.attributes.poptip;\n    if (!poptip) return;\n    var valueNode = ctn.maybeAppendByClassName(CLASS_NAMES.value, 'g').node();\n    var labelNode = ctn.maybeAppendByClassName(CLASS_NAMES.label, 'g').node();\n    [valueNode, labelNode].forEach(function (node) {\n      if (node) {\n        _this.bindPoptip(node);\n      }\n    });\n  };\n  CategoryItem.prototype.renderBackground = function (container) {\n    var _a = this.shape,\n      width = _a.width,\n      height = _a.height;\n    var style = subStyleProps(this.attributes, 'background');\n    this.background = container.maybeAppendByClassName(CLASS_NAMES.backgroundGroup, 'g').style('zIndex', -1);\n    this.background.maybeAppendByClassName(CLASS_NAMES.background, 'rect').styles(__assign({\n      width: width,\n      height: height\n    }, style));\n  };\n  CategoryItem.prototype.adjustLayout = function () {\n    var _a = this.layout,\n      labelWidth = _a.labelWidth,\n      valueWidth = _a.valueWidth,\n      height = _a.height,\n      _b = __read(_a.position, 3),\n      markerX = _b[0],\n      labelX = _b[1],\n      valueX = _b[2];\n    var halfHeight = height / 2;\n    // console.log(this.markerGroup.node().style._transform);\n    this.markerGroup.styles({\n      transform: \"translate(\".concat(markerX, \", \").concat(halfHeight, \")\").concat(this.markerGroup.node().style._transform)\n    });\n    this.labelGroup.styles({\n      transform: \"translate(\".concat(labelX, \", \").concat(halfHeight, \")\")\n    });\n    ellipsisIt(this.labelGroup.select(CLASS_NAMES.label.class).node(), Math.ceil(labelWidth));\n    if (this.showValue) {\n      this.valueGroup.styles({\n        transform: \"translate(\".concat(valueX, \", \").concat(halfHeight, \")\")\n      });\n      ellipsisIt(this.valueGroup.select(CLASS_NAMES.value.class).node(), Math.ceil(valueWidth));\n    }\n  };\n  CategoryItem.prototype.render = function (attributes, container) {\n    var ctn = select(container);\n    var _a = attributes.x,\n      x = _a === void 0 ? 0 : _a,\n      _b = attributes.y,\n      y = _b === void 0 ? 0 : _b;\n    ctn.styles({\n      transform: \"translate(\".concat(x, \", \").concat(y, \")\")\n    });\n    this.renderMarker(ctn);\n    this.renderLabel(ctn);\n    this.renderValue(ctn);\n    this.renderBackground(ctn);\n    this.renderPoptip(ctn);\n    this.adjustLayout();\n  };\n  return CategoryItem;\n}(Component);\nexport { CategoryItem };","map":{"version":3,"names":["Circle","Marker","Component","classNames","copyAttributes","ellipsisIt","ifShow","parseSeriesAttr","renderExtDo","scaleToPixel","select","subStyleProps","deepAssign","Poptip","CLASS_NAMES","layout","markerGroup","marker","labelGroup","label","valueGroup","value","backgroundGroup","background","DEFAULT_POPTIP_PROPS","offset","domStyles","opacity","padding","boxShadow","display","color","lineHeight","styleOfMarker","group","querySelector","class","style","CategoryItem","_super","__extends","options","call","span","r","markerSize","labelFill","valueFill","labelFontSize","valueFontSize","labelTextBaseline","valueTextBaseline","Object","defineProperty","prototype","get","valueText","attributes","attr","_a","node","getBBox","labelWidth","width","labelHeight","height","_b","valueWidth","valueHeight","markerWidth","Math","max","__read","span1","innerSpan","span2","showValue","basis","fullWidth","actualSpace","_c","_d","spacing","spacing1","spacing2","width_1","_e","shape","position","markerShapeStyle","markerStrokeWidth","strokeWidth","markerLineWidth","lineWidth","markerStroke","stroke","sqrt","renderMarker","container","_this","maybeAppendByClassName","parent","oldMarker","childNodes","newMarker","symbol","className","name","styles","appendChild","nodeName","update","__assign","remove","scale","getScale","scaleSize","_transform","concat","renderLabel","text","__rest","renderValue","createPoptip","poptip","render","poptipStyle","poptipGroup","bindPoptip","bind","labelText","markerFill","html","renderPoptip","ctn","valueNode","labelNode","forEach","renderBackground","adjustLayout","markerX","labelX","valueX","halfHeight","transform","ceil","x","y"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/component/src/ui/legend/category/item.ts"],"sourcesContent":["import {\n  BaseStyleProps,\n  Circle,\n  DisplayObject,\n  Group,\n  GroupStyleProps,\n  PathStyleProps,\n  RectStyleProps,\n  TextStyleProps,\n} from '@antv/g';\nimport { Marker } from '../../marker';\nimport type { ComponentOptions } from '../../../core';\nimport { Component } from '../../../core';\nimport { ExtendDisplayObject, PrefixObject } from '../../../types';\nimport {\n  Selection,\n  SeriesAttr,\n  classNames,\n  copyAttributes,\n  ellipsisIt,\n  ifShow,\n  parseSeriesAttr,\n  renderExtDo,\n  scaleToPixel,\n  select,\n  subStyleProps,\n  deepAssign,\n} from '../../../util';\nimport { Poptip } from '../../poptip';\nimport type { PoptipStyleProps } from '../../poptip/types';\nimport type { PoptipRender } from './items';\n\ntype ItemMarkerStyle = { size?: number } & PathStyleProps;\ntype ItemTextStyle = Omit<TextStyleProps, 'text'>;\ntype ItemBackgroundStyle = Omit<RectStyleProps, 'width' | 'height'>;\n\nexport type CategoryItemStyleProps = GroupStyleProps &\n  PrefixObject<ItemMarkerStyle, 'marker'> &\n  PrefixObject<ItemTextStyle, 'label'> &\n  PrefixObject<ItemTextStyle, 'value'> &\n  PrefixObject<ItemBackgroundStyle, 'background'> & {\n    labelText?: ExtendDisplayObject;\n    marker?: string | (() => DisplayObject);\n    /** spacing between marker, label and value */\n    spacing?: SeriesAttr;\n    span?: SeriesAttr;\n    valueText?: ExtendDisplayObject;\n    // if width and height not specific, set it to actual space occurred\n    width?: number;\n    x?: number;\n    y?: number;\n    poptip?: PoptipStyleProps & PoptipRender;\n  };\n\nexport type CategoryItemOptions = ComponentOptions<CategoryItemStyleProps>;\n\nconst CLASS_NAMES = classNames(\n  {\n    layout: 'flex',\n    markerGroup: 'marker-group',\n    marker: 'marker',\n    labelGroup: 'label-group',\n    label: 'label',\n    valueGroup: 'value-group',\n    value: 'value',\n    backgroundGroup: 'background-group',\n    background: 'background',\n  },\n  'legend-category-item'\n);\n\nconst DEFAULT_POPTIP_PROPS: PoptipStyleProps = {\n  offset: [0, 20],\n  domStyles: {\n    '.component-poptip': {\n      opacity: '1',\n      padding: '8px 12px',\n      background: '#fff',\n      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.15)',\n    },\n    '.component-poptip-arrow': {\n      display: 'none',\n    },\n    '.component-poptip-text': {\n      color: '#000',\n      lineHeight: '20px',\n    },\n  },\n};\n\nfunction styleOfMarker(group: Group): BaseStyleProps {\n  const marker = group.querySelector(CLASS_NAMES.marker.class);\n  if (marker) return marker.style;\n  return {};\n}\n\nexport class CategoryItem extends Component<CategoryItemStyleProps> {\n  constructor(options: CategoryItemOptions) {\n    super(options, {\n      span: [1, 1],\n      marker: () => new Circle({ style: { r: 6 } }),\n      markerSize: 10,\n      labelFill: '#646464',\n      valueFill: '#646464',\n      labelFontSize: 12,\n      valueFontSize: 12,\n      labelTextBaseline: 'middle',\n      valueTextBaseline: 'middle',\n    });\n  }\n\n  private poptipGroup!: Poptip;\n\n  private markerGroup!: Selection<Group>;\n\n  private labelGroup!: Selection<Group>;\n\n  private valueGroup!: Selection<Group>;\n\n  private background!: Selection<Group>;\n\n  private get showValue() {\n    const { valueText } = this.attributes;\n    if (!valueText) return false;\n    if (typeof valueText === 'string' || typeof valueText === 'number') return valueText !== '';\n    if (typeof valueText === 'function') return true;\n    return valueText.attr('text') !== '';\n  }\n\n  private get actualSpace() {\n    const label = this.labelGroup;\n    const value = this.valueGroup;\n    const { markerSize } = this.attributes;\n    const { width: labelWidth, height: labelHeight } = label.node().getBBox();\n    const { width: valueWidth, height: valueHeight } = value.node().getBBox();\n    return {\n      markerWidth: markerSize,\n      labelWidth,\n      valueWidth,\n      height: Math.max(markerSize, labelHeight, valueHeight),\n    };\n  }\n\n  private get span() {\n    const { span } = this.attributes;\n    if (!span) return [1, 1];\n    const [span1, innerSpan] = parseSeriesAttr(span!);\n    const span2 = this.showValue ? innerSpan : 0;\n    const basis = span1 + span2;\n    return [span1 / basis, span2 / basis];\n  }\n\n  private get shape() {\n    const { markerSize, width: fullWidth } = this.attributes;\n    const actualSpace = this.actualSpace;\n    const { markerWidth, height } = actualSpace;\n    let { labelWidth, valueWidth } = this.actualSpace;\n    const [spacing1, spacing2] = this.spacing;\n\n    if (fullWidth) {\n      const width = fullWidth - markerSize - spacing1 - spacing2;\n      const [span1, span2] = this.span;\n      [labelWidth, valueWidth] = [span1 * width, span2 * width];\n    }\n\n    const width = markerWidth + labelWidth + valueWidth + spacing1 + spacing2;\n    return { width, height, markerWidth, labelWidth, valueWidth };\n  }\n\n  private get spacing() {\n    const { spacing } = this.attributes;\n    if (!spacing) return [0, 0];\n    const [spacing1, spacing2] = parseSeriesAttr(spacing);\n    if (this.showValue) return [spacing1, spacing2];\n    return [spacing1, 0];\n  }\n\n  private get layout() {\n    const { markerWidth, labelWidth, valueWidth, width, height } = this.shape;\n    const [spacing1, spacing2] = this.spacing;\n    return {\n      height,\n      width,\n      markerWidth,\n      labelWidth,\n      valueWidth,\n      position: [markerWidth / 2, markerWidth + spacing1, markerWidth + labelWidth + spacing1 + spacing2],\n    };\n  }\n\n  private get scaleSize() {\n    const markerShapeStyle = styleOfMarker(this.markerGroup.node());\n    const {\n      markerSize,\n      markerStrokeWidth = markerShapeStyle.strokeWidth,\n      markerLineWidth = markerShapeStyle.lineWidth,\n      markerStroke = markerShapeStyle.stroke,\n    } = this.attributes;\n    // empirical value\n    const strokeWidth = +(markerStrokeWidth || markerLineWidth || (markerStroke ? 1 : 0)) * Math.sqrt(2);\n    const { width, height } = this.markerGroup.node().getBBox();\n    return (1 - strokeWidth / Math.max(width, height)) * markerSize;\n  }\n\n  private renderMarker(container: Selection) {\n    const { marker } = this.attributes;\n    const style = subStyleProps(this.attributes, 'marker');\n    this.markerGroup = container.maybeAppendByClassName(CLASS_NAMES.markerGroup, 'g').style('zIndex', 0);\n    ifShow(!!marker, this.markerGroup, () => {\n      const parent = this.markerGroup.node();\n      const oldMarker = parent.childNodes?.[0] as DisplayObject | undefined;\n      const newMarker =\n        typeof marker === 'string'\n          ? new Marker({ style: { symbol: marker }, className: CLASS_NAMES.marker.name })\n          : marker();\n\n      if (!oldMarker) {\n        if (!(newMarker instanceof Marker)) select(newMarker).attr('className', CLASS_NAMES.marker.name).styles(style);\n        parent.appendChild(newMarker);\n      } else if (newMarker.nodeName === oldMarker.nodeName) {\n        if (oldMarker instanceof Marker) oldMarker.update({ ...style, symbol: marker });\n        else {\n          copyAttributes(oldMarker, newMarker);\n          select(oldMarker).styles(style);\n        }\n      } else {\n        oldMarker.remove();\n        select(newMarker).attr('className', CLASS_NAMES.marker.name).styles(style);\n        parent.appendChild(newMarker);\n      }\n\n      // record the scale of marker\n      this.markerGroup.node().scale(1 / this.markerGroup.node().getScale()[0]);\n      const scale = scaleToPixel(this.markerGroup.node(), this.scaleSize, true);\n      this.markerGroup.node().style._transform = `scale(${scale})`;\n    });\n  }\n\n  private renderLabel(container: Selection) {\n    const { text: label, ...style } = subStyleProps(this.attributes, 'label');\n    this.labelGroup = container.maybeAppendByClassName<Group>(CLASS_NAMES.labelGroup, 'g').style('zIndex', 0);\n    this.labelGroup.maybeAppendByClassName(CLASS_NAMES.label, () => renderExtDo(label)).styles(style);\n  }\n\n  private renderValue(container: Selection) {\n    const { text: value, ...style } = subStyleProps(this.attributes, 'value');\n    this.valueGroup = container.maybeAppendByClassName(CLASS_NAMES.valueGroup, 'g').style('zIndex', 0);\n    ifShow(this.showValue, this.valueGroup, () => {\n      this.valueGroup.maybeAppendByClassName(CLASS_NAMES.value, () => renderExtDo(value)).styles(style);\n    });\n  }\n\n  private createPoptip() {\n    const { poptip } = this.attributes;\n    const { render, ...poptipStyle } = poptip || {};\n    const poptipGroup = new Poptip({ style: deepAssign(DEFAULT_POPTIP_PROPS, poptipStyle) });\n    this.poptipGroup = poptipGroup;\n    return poptipGroup;\n  }\n\n  private bindPoptip(node: DisplayObject) {\n    const { poptip } = this.attributes;\n    if (!poptip) return;\n    const poptipGroup = this.poptipGroup || this.createPoptip();\n    poptipGroup.bind(node, () => {\n      const { labelText, valueText, markerFill } = this.attributes;\n      const label = typeof labelText === 'string' ? labelText : (labelText as DisplayObject)?.attr('text');\n      const value = typeof valueText === 'string' ? valueText : (valueText as DisplayObject)?.attr('text');\n      if (typeof poptip.render === 'function') {\n        return { html: poptip.render({ label, value, color: markerFill as string }) };\n      }\n      let html = '';\n      if (typeof label === 'string' || typeof label === 'number') {\n        html += `<div class=\"component-poptip-label\">${label}</div>`;\n      }\n      if (typeof value === 'string' || typeof value === 'number') {\n        html += `<div class=\"component-poptip-value\">${value}</div>`;\n      }\n      return { html };\n    });\n  }\n\n  private renderPoptip(ctn: Selection) {\n    const { poptip } = this.attributes;\n    if (!poptip) return;\n    const valueNode = ctn.maybeAppendByClassName(CLASS_NAMES.value, 'g').node();\n    const labelNode = ctn.maybeAppendByClassName(CLASS_NAMES.label, 'g').node();\n    [valueNode, labelNode].forEach((node) => {\n      if (node) {\n        this.bindPoptip(node);\n      }\n    });\n  }\n\n  private renderBackground(container: Selection) {\n    const { width, height } = this.shape;\n    const style = subStyleProps(this.attributes, 'background');\n    this.background = container.maybeAppendByClassName(CLASS_NAMES.backgroundGroup, 'g').style('zIndex', -1);\n    this.background.maybeAppendByClassName(CLASS_NAMES.background, 'rect').styles({ width, height, ...style });\n  }\n\n  private adjustLayout() {\n    const {\n      layout: {\n        labelWidth,\n        valueWidth,\n        height,\n        position: [markerX, labelX, valueX],\n      },\n    } = this;\n    const halfHeight = height / 2;\n\n    // console.log(this.markerGroup.node().style._transform);\n\n    this.markerGroup.styles({\n      transform: `translate(${markerX}, ${halfHeight})${this.markerGroup.node().style._transform}`,\n    });\n    this.labelGroup.styles({ transform: `translate(${labelX}, ${halfHeight})` });\n\n    ellipsisIt(this.labelGroup.select(CLASS_NAMES.label.class).node(), Math.ceil(labelWidth));\n    if (this.showValue) {\n      this.valueGroup.styles({ transform: `translate(${valueX}, ${halfHeight})` });\n      ellipsisIt(this.valueGroup.select(CLASS_NAMES.value.class).node(), Math.ceil(valueWidth));\n    }\n  }\n\n  public render(attributes: CategoryItemStyleProps, container: Group) {\n    const ctn = select(container);\n    const { x = 0, y = 0 } = attributes;\n    ctn.styles({ transform: `translate(${x}, ${y})` });\n    this.renderMarker(ctn);\n    this.renderLabel(ctn);\n    this.renderValue(ctn);\n    this.renderBackground(ctn);\n    this.renderPoptip(ctn);\n    this.adjustLayout();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}