{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 聚焦元素交互行为\n *\n * <en/> Focus element behavior\n * @remarks\n * <zh/> 点击元素时，将元素聚焦到视图中心。\n *\n * <en/> When an element is clicked, the element is focused to the center of the view.\n */\nexport class FocusElement extends BaseBehavior {\n  constructor(context, options) {\n    super(context, Object.assign({}, FocusElement.defaultOptions, options));\n    this.focus = event => __awaiter(this, void 0, void 0, function* () {\n      if (!this.validate(event)) return;\n      const {\n        graph\n      } = this.context;\n      yield graph.focusElement(event.target.id, this.options.animation);\n    });\n    this.bindEvents();\n  }\n  bindEvents() {\n    const {\n      graph\n    } = this.context;\n    this.unbindEvents();\n    ELEMENT_TYPES.forEach(type => {\n      graph.on(`${type}:${CommonEvent.CLICK}`, this.focus);\n    });\n  }\n  validate(event) {\n    if (this.destroyed) return false;\n    const {\n      enable\n    } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n  unbindEvents() {\n    const {\n      graph\n    } = this.context;\n    ELEMENT_TYPES.forEach(type => {\n      graph.off(`${type}:${CommonEvent.CLICK}`, this.focus);\n    });\n  }\n  destroy() {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\nFocusElement.defaultOptions = {\n  animation: {\n    easing: 'ease-in',\n    duration: 500\n  },\n  enable: true\n};","map":{"version":3,"names":["isFunction","CommonEvent","ELEMENT_TYPES","BaseBehavior","FocusElement","constructor","context","options","Object","assign","defaultOptions","focus","event","__awaiter","validate","graph","focusElement","target","id","animation","bindEvents","unbindEvents","forEach","type","on","CLICK","destroyed","enable","off","destroy","easing","duration"],"sources":["/Users/yizelu/Desktop/mcp/frontend/node_modules/@antv/g6/src/behaviors/focus-element.ts"],"sourcesContent":["import { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { IElementEvent, ViewportAnimationEffectTiming } from '../types';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> 聚焦元素交互配置项\n *\n * <en/> Focus element behavior options\n */\nexport interface FocusElementOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> 是否启用动画以及动画配置\n   *\n   * <en/> Whether to enable animation\n   */\n  animation?: ViewportAnimationEffectTiming;\n  /**\n   * <zh/> 是否启用聚焦功能\n   *\n   * <en/> Whether to enable the function of focusing on the element\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: IElementEvent) => boolean);\n}\n\n/**\n * <zh/> 聚焦元素交互行为\n *\n * <en/> Focus element behavior\n * @remarks\n * <zh/> 点击元素时，将元素聚焦到视图中心。\n *\n * <en/> When an element is clicked, the element is focused to the center of the view.\n */\nexport class FocusElement extends BaseBehavior<FocusElementOptions> {\n  static defaultOptions: Partial<FocusElementOptions> = {\n    animation: {\n      easing: 'ease-in',\n      duration: 500,\n    },\n    enable: true,\n  };\n\n  constructor(context: RuntimeContext, options: FocusElementOptions) {\n    super(context, Object.assign({}, FocusElement.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n    this.unbindEvents();\n\n    ELEMENT_TYPES.forEach((type) => {\n      graph.on(`${type}:${CommonEvent.CLICK}`, this.focus);\n    });\n  }\n\n  private focus = async (event: IElementEvent) => {\n    if (!this.validate(event)) return;\n    const { graph } = this.context;\n\n    await graph.focusElement(event.target.id, this.options.animation);\n  };\n\n  private validate(event: IElementEvent) {\n    if (this.destroyed) return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n\n    ELEMENT_TYPES.forEach((type) => {\n      graph.off(`${type}:${CommonEvent.CLICK}`, this.focus);\n    });\n  }\n\n  public destroy() {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,UAAU,QAAQ,YAAY;AACvC,SAASC,WAAW,QAAQ,cAAc;AAC1C,SAASC,aAAa,QAAQ,sBAAsB;AAIpD,SAASC,YAAY,QAAQ,iBAAiB;AAuB9C;;;;;;;;;AASA,OAAM,MAAOC,YAAa,SAAQD,YAAiC;EASjEE,YAAYC,OAAuB,EAAEC,OAA4B;IAC/D,KAAK,CAACD,OAAO,EAAEE,MAAM,CAACC,MAAM,CAAC,EAAE,EAAEL,YAAY,CAACM,cAAc,EAAEH,OAAO,CAAC,CAAC;IAajE,KAAAI,KAAK,GAAUC,KAAoB,IAAIC,SAAA;MAC7C,IAAI,CAAC,IAAI,CAACC,QAAQ,CAACF,KAAK,CAAC,EAAE;MAC3B,MAAM;QAAEG;MAAK,CAAE,GAAG,IAAI,CAACT,OAAO;MAE9B,MAAMS,KAAK,CAACC,YAAY,CAACJ,KAAK,CAACK,MAAM,CAACC,EAAE,EAAE,IAAI,CAACX,OAAO,CAACY,SAAS,CAAC;IACnE,CAAC;IAjBC,IAAI,CAACC,UAAU,EAAE;EACnB;EAEQA,UAAUA,CAAA;IAChB,MAAM;MAAEL;IAAK,CAAE,GAAG,IAAI,CAACT,OAAO;IAC9B,IAAI,CAACe,YAAY,EAAE;IAEnBnB,aAAa,CAACoB,OAAO,CAAEC,IAAI,IAAI;MAC7BR,KAAK,CAACS,EAAE,CAAC,GAAGD,IAAI,IAAItB,WAAW,CAACwB,KAAK,EAAE,EAAE,IAAI,CAACd,KAAK,CAAC;IACtD,CAAC,CAAC;EACJ;EASQG,QAAQA,CAACF,KAAoB;IACnC,IAAI,IAAI,CAACc,SAAS,EAAE,OAAO,KAAK;IAChC,MAAM;MAAEC;IAAM,CAAE,GAAG,IAAI,CAACpB,OAAO;IAC/B,IAAIP,UAAU,CAAC2B,MAAM,CAAC,EAAE,OAAOA,MAAM,CAACf,KAAK,CAAC;IAC5C,OAAO,CAAC,CAACe,MAAM;EACjB;EAEQN,YAAYA,CAAA;IAClB,MAAM;MAAEN;IAAK,CAAE,GAAG,IAAI,CAACT,OAAO;IAE9BJ,aAAa,CAACoB,OAAO,CAAEC,IAAI,IAAI;MAC7BR,KAAK,CAACa,GAAG,CAAC,GAAGL,IAAI,IAAItB,WAAW,CAACwB,KAAK,EAAE,EAAE,IAAI,CAACd,KAAK,CAAC;IACvD,CAAC,CAAC;EACJ;EAEOkB,OAAOA,CAAA;IACZ,IAAI,CAACR,YAAY,EAAE;IACnB,KAAK,CAACQ,OAAO,EAAE;EACjB;;AA/COzB,YAAA,CAAAM,cAAc,GAAiC;EACpDS,SAAS,EAAE;IACTW,MAAM,EAAE,SAAS;IACjBC,QAAQ,EAAE;GACX;EACDJ,MAAM,EAAE;CACT","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}